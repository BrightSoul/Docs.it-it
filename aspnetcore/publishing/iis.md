---
title: Host ASP.NET Core in Windows con IIS
author: guardrex
description: Configurazione di Windows Server Internet Information Services (IIS) e distribuzione di applicazioni di ASP.NET Core.
keywords: ASP.NET Core, servizi di informazioni internet, iis, server windows, aggregazione di hosting, modulo di asp.net core, distribuzione web
ms.author: riande
manager: wpickett
ms.date: 03/13/2017
ms.topic: article
ms.assetid: a4449ad3-5bad-410c-afa7-dc32d832b552
ms.technology: aspnet
ms.prod: asp.net-core
uid: publishing/iis
ms.openlocfilehash: 8ffadc1dede4053faa129a3b224aace901e70e14
ms.sourcegitcommit: ad01283f299d346cf757c4f4744c48634dc27e73
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 09/18/2017
---
# <a name="set-up-a-hosting-environment-for-aspnet-core-on-windows-with-iis-and-deploy-to-it"></a><span data-ttu-id="27fcb-104">Configurare un ambiente di hosting per ASP.NET Core in Windows con IIS e distribuirlo</span><span class="sxs-lookup"><span data-stu-id="27fcb-104">Set up a hosting environment for ASP.NET Core on Windows with IIS, and deploy to it</span></span>

<span data-ttu-id="27fcb-105">Di [Luke Latham](https://github.com/GuardRex) e [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="27fcb-105">By [Luke Latham](https://github.com/GuardRex) and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

## <a name="supported-operating-systems"></a><span data-ttu-id="27fcb-106">Sistemi operativi supportati</span><span class="sxs-lookup"><span data-stu-id="27fcb-106">Supported operating systems</span></span>

<span data-ttu-id="27fcb-107">Sono supportati i sistemi operativi seguenti:</span><span class="sxs-lookup"><span data-stu-id="27fcb-107">The following operating systems are supported:</span></span>

* <span data-ttu-id="27fcb-108">Windows 7 e versioni più recenti</span><span class="sxs-lookup"><span data-stu-id="27fcb-108">Windows 7 and newer</span></span>

* <span data-ttu-id="27fcb-109">Windows Server 2008 R2 e più recenti &#8224;</span><span class="sxs-lookup"><span data-stu-id="27fcb-109">Windows Server 2008 R2 and newer&#8224;</span></span>

<span data-ttu-id="27fcb-110">&#8224; Concettualmente, la configurazione di IIS descritta in questo documento si applica anche per l'hosting delle applicazioni ASP.NET Core in Nano Server IIS, ma fare riferimento a [ASP.NET Core con IIS su Nano Server](xref:tutorials/nano-server) per istruzioni specifiche.</span><span class="sxs-lookup"><span data-stu-id="27fcb-110">&#8224;Conceptually, the IIS configuration described in this document also applies to hosting ASP.NET Core applications on Nano Server IIS, but refer to [ASP.NET Core with IIS on Nano Server](xref:tutorials/nano-server) for specific instructions.</span></span>

<span data-ttu-id="27fcb-111">Il [server WebListener](xref:fundamentals/servers/weblistener) non funzionerà in una configurazione di proxy inverso con IIS.</span><span class="sxs-lookup"><span data-stu-id="27fcb-111">[WebListener server](xref:fundamentals/servers/weblistener) will not work in a reverse-proxy configuration with IIS.</span></span> <span data-ttu-id="27fcb-112">È necessario usare il [server Kestrel](xref:fundamentals/servers/kestrel).</span><span class="sxs-lookup"><span data-stu-id="27fcb-112">You must use the [Kestrel server](xref:fundamentals/servers/kestrel).</span></span>

## <a name="iis-configuration"></a><span data-ttu-id="27fcb-113">Configurazione di IIS</span><span class="sxs-lookup"><span data-stu-id="27fcb-113">IIS configuration</span></span>

<span data-ttu-id="27fcb-114">Abilitare il ruolo **Server Web (IIS)** e stabilire i servizi di ruolo.</span><span class="sxs-lookup"><span data-stu-id="27fcb-114">Enable the **Web Server (IIS)** role and establish role services.</span></span>

### <a name="windows-desktop-operating-systems"></a><span data-ttu-id="27fcb-115">Sistemi operativi desktop di Windows</span><span class="sxs-lookup"><span data-stu-id="27fcb-115">Windows desktop operating systems</span></span>

<span data-ttu-id="27fcb-116">Passare a **Pannello di controllo > Programmi > Programmi e funzionalità > Disattivazione o attivare le funzionalità di Windows** (a sinistra dello schermo).</span><span class="sxs-lookup"><span data-stu-id="27fcb-116">Navigate to **Control Panel > Programs > Programs and Features > Turn Windows features on or off** (left side of the screen).</span></span> <span data-ttu-id="27fcb-117">Aprire il gruppo per **Internet Information Services** e **Strumenti di gestione Web**.</span><span class="sxs-lookup"><span data-stu-id="27fcb-117">Open the group for **Internet Information Services** and **Web Management Tools**.</span></span> <span data-ttu-id="27fcb-118">Selezionare la casella per **Console di gestione IIS**.</span><span class="sxs-lookup"><span data-stu-id="27fcb-118">Check the box for **IIS Management Console**.</span></span> <span data-ttu-id="27fcb-119">Selezionare la casella per **Servizi World Wide Web**.</span><span class="sxs-lookup"><span data-stu-id="27fcb-119">Check the box for **World Wide Web Services**.</span></span> <span data-ttu-id="27fcb-120">Accettare le funzionalità predefinite per **servizi World Wide Web** o personalizzare le funzionalità IIS in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="27fcb-120">Accept the default features for **World Wide Web Services** or customize the IIS features to suit your needs.</span></span>

![La console di gestione IIS e servizi World Wide Web sono selezionati nelle funzionalità di Windows.](iis/_static/windows-features-win10.png)

### <a name="windows-server-operating-systems"></a><span data-ttu-id="27fcb-122">Sistemi operativi Windows Server</span><span class="sxs-lookup"><span data-stu-id="27fcb-122">Windows Server operating systems</span></span>

<span data-ttu-id="27fcb-123">Per i sistemi operativi del server, usare la procedura guidata **Aggiungi ruoli e funzionalità** tramite il menù **Gestisci** o il collegamento in **Server Manager**.</span><span class="sxs-lookup"><span data-stu-id="27fcb-123">For server operating systems, use the **Add Roles and Features** wizard via the **Manage** menu or the link in **Server Manager**.</span></span> <span data-ttu-id="27fcb-124">Nel passaggio **Ruoli del server** selezionare la casella per **Server Web (IIS)**.</span><span class="sxs-lookup"><span data-stu-id="27fcb-124">On the **Server Roles** step, check the box for **Web Server (IIS)**.</span></span>

![Il ruolo Server Web IIS viene selezionato nel passaggio dei ruoli del server Selezionare.](iis/_static/server-roles-ws2016.png)

<span data-ttu-id="27fcb-126">Nel passaggio **Servizi ruolo** selezionare i servizi ruolo IIS desiderato o accettare i servizi ruolo predefiniti forniti.</span><span class="sxs-lookup"><span data-stu-id="27fcb-126">On the **Role services** step, select the IIS role services you desire or accept the default role services provided.</span></span>

![I servizi ruolo predefiniti vengono selezionati nel passaggio Selezionare i servizi ruolo.](iis/_static/role-services-ws2016.png)

<span data-ttu-id="27fcb-128">Procedere con il passaggio **Conferma** per installare il ruolo del server web e i servizi.</span><span class="sxs-lookup"><span data-stu-id="27fcb-128">Proceed through the **Confirmation** step to install the web server role and services.</span></span> <span data-ttu-id="27fcb-129">Un riavvio del server/IIS non è necessario dopo l'installazione del ruolo Server Web (IIS).</span><span class="sxs-lookup"><span data-stu-id="27fcb-129">A server/IIS restart is not required after installing the Web Server (IIS) role.</span></span>

## <a name="install-the-net-core-windows-server-hosting-bundle"></a><span data-ttu-id="27fcb-130">Installare l'aggregazione di Hosting di.NET Core Windows Server</span><span class="sxs-lookup"><span data-stu-id="27fcb-130">Install the .NET Core Windows Server Hosting bundle</span></span>

1. <span data-ttu-id="27fcb-131">Installare l'[aggregazione di Hosting di.NET Core Windows Server](https://aka.ms/dotnetcore.2.0.0-windowshosting) nel sistema di hosting.</span><span class="sxs-lookup"><span data-stu-id="27fcb-131">Install the [.NET Core Windows Server Hosting bundle](https://aka.ms/dotnetcore.2.0.0-windowshosting) on the hosting system.</span></span> <span data-ttu-id="27fcb-132">L'aggregazione installerà il Runtime di .NET Core, la libreria di .NET Core e il [Modulo di ASP.NET Core](xref:fundamentals/servers/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="27fcb-132">The bundle will install the .NET Core Runtime, .NET Core Library, and the [ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module).</span></span> <span data-ttu-id="27fcb-133">Il modulo crea il proxy inverso tra IIS e il server Kestrel.</span><span class="sxs-lookup"><span data-stu-id="27fcb-133">The module creates the reverse-proxy between IIS and the Kestrel server.</span></span> <span data-ttu-id="27fcb-134">Nota: se il sistema non dispone di una connessione a Internet, ottenere e installare *[Microsoft Visual C++ 2015 Redistributable](https://www.microsoft.com/download/details.aspx?id=53840) * prima di installare l'aggregazione di Hosting di .NET Core Windows Server.</span><span class="sxs-lookup"><span data-stu-id="27fcb-134">Note: If the system doesn't have an Internet connection, obtain and install the *[Microsoft Visual C++ 2015 Redistributable](https://www.microsoft.com/download/details.aspx?id=53840)* before installing the .NET Core Windows Server Hosting bundle.</span></span>

2. <span data-ttu-id="27fcb-135">Riavviare il sistema o eseguire **net stop was /y** seguito da **net start w3svc** da un prompt dei comandi per visualizzare una modifica al percorso di sistema.</span><span class="sxs-lookup"><span data-stu-id="27fcb-135">Restart the system or execute **net stop was /y** followed by **net start w3svc** from a command prompt to pick up a change to the system PATH.</span></span>

> [!NOTE]
> <span data-ttu-id="27fcb-136">Se si usa una configurazione condivisa di IIS, vedere [Modulo di ASP.NET Core con configurazione condivisa di IIS](xref:hosting/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration).</span><span class="sxs-lookup"><span data-stu-id="27fcb-136">If you use an IIS Shared Configuration, see [ASP.NET Core Module with IIS Shared Configuration](xref:hosting/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration).</span></span>

## <a name="install-web-deploy-when-publishing-with-visual-studio"></a><span data-ttu-id="27fcb-137">Installare la Distribuzione Web quando si pubblica con Visual Studio</span><span class="sxs-lookup"><span data-stu-id="27fcb-137">Install Web Deploy when publishing with Visual Studio</span></span>

<span data-ttu-id="27fcb-138">Se si prevede di distribuire le applicazioni con Distribuzione Web in Visual Studio, installare la versione più recente di Distribuzione Web nel sistema di hosting.</span><span class="sxs-lookup"><span data-stu-id="27fcb-138">If you intend to deploy your applications with Web Deploy in Visual Studio, install the latest version of Web Deploy on the hosting system.</span></span> <span data-ttu-id="27fcb-139">Per installare Distribuzione Web, è possibile usare il [Programma di installazione dela piattaforma Web (WebPI)](https://www.microsoft.com/web/downloads/platform.aspx) o ottenere direttamente da un programma di installazione di [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=43717).</span><span class="sxs-lookup"><span data-stu-id="27fcb-139">To install Web Deploy, you can use the [Web Platform Installer (WebPI)](https://www.microsoft.com/web/downloads/platform.aspx) or obtain an installer directly from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=43717).</span></span> <span data-ttu-id="27fcb-140">Il metodo preferito consiste nell'usare WebPI.</span><span class="sxs-lookup"><span data-stu-id="27fcb-140">The preferred method is to use WebPI.</span></span> <span data-ttu-id="27fcb-141">WebPI offre un'installazione autonoma e una configurazione per i provider di hosting.</span><span class="sxs-lookup"><span data-stu-id="27fcb-141">WebPI offers a standalone setup and a configuration for hosting providers.</span></span>

## <a name="application-configuration"></a><span data-ttu-id="27fcb-142">Configurazione dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="27fcb-142">Application configuration</span></span>

### <a name="enabling-the-iisintegration-components"></a><span data-ttu-id="27fcb-143">Abilitare i componenti IISIntegration</span><span class="sxs-lookup"><span data-stu-id="27fcb-143">Enabling the IISIntegration components</span></span>

# <a name="aspnet-core-2xtabaspnetcore2x"></a>[<span data-ttu-id="27fcb-144">ASP.NET Core 2.x</span><span class="sxs-lookup"><span data-stu-id="27fcb-144">ASP.NET Core 2.x</span></span>](#tab/aspnetcore2x)

<span data-ttu-id="27fcb-145">Un file *Program.cs* tipico chiama [CreateDefaultBuilder](/dotnet/api/microsoft.aspnetcore.webhost.createdefaultbuilder) per avviare la configurazione di un host.</span><span class="sxs-lookup"><span data-stu-id="27fcb-145">A typical *Program.cs* calls [CreateDefaultBuilder](/dotnet/api/microsoft.aspnetcore.webhost.createdefaultbuilder) to begin setting up a host.</span></span> <span data-ttu-id="27fcb-146">`CreateDefaultBuilder` configura [Kestrel](xref:fundamentals/servers/kestrel) come server Web e abilita l'integrazione IIS configurando il percorso base e la porta per il [modulo ASP.NET Core](xref:fundamentals/servers/aspnet-core-module):</span><span class="sxs-lookup"><span data-stu-id="27fcb-146">`CreateDefaultBuilder` configures [Kestrel](xref:fundamentals/servers/kestrel) as the web server and enables IIS integration by configuring the base path and port for the [ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module):</span></span>

```csharp
public static IWebHost BuildWebHost(string[] args) =>
    WebHost.CreateDefaultBuilder(args)
        ...
```

# <a name="aspnet-core-1xtabaspnetcore1x"></a>[<span data-ttu-id="27fcb-147">ASP.NET Core 1.x</span><span class="sxs-lookup"><span data-stu-id="27fcb-147">ASP.NET Core 1.x</span></span>](#tab/aspnetcore1x)

<span data-ttu-id="27fcb-148">Includere una dipendenza sul pacchetto [Microsoft.AspNetCore.Server.IISIntegration](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.IISIntegration/) nelle dipendenze dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-148">Include a dependency on the [Microsoft.AspNetCore.Server.IISIntegration](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.IISIntegration/) package in the application dependencies.</span></span> <span data-ttu-id="27fcb-149">Incorporare il middleware di IIS Integration nell'applicazione aggiungendo il metodo di estensione *UseIISIntegration* a *WebHostBuilder*:</span><span class="sxs-lookup"><span data-stu-id="27fcb-149">Incorporate IIS Integration middleware into the application by adding the *UseIISIntegration* extension method to *WebHostBuilder*:</span></span>

```csharp
var host = new WebHostBuilder()
    .UseKestrel()
    .UseIISIntegration()
    ...
```

<span data-ttu-id="27fcb-150">Sono necessari sia `UseKestrel` sia `UseIISIntegration`.</span><span class="sxs-lookup"><span data-stu-id="27fcb-150">Both `UseKestrel` and `UseIISIntegration` are required.</span></span> <span data-ttu-id="27fcb-151">La chiamata del codice *UseIISIntegration* non influisce sulla portabilità del codice.</span><span class="sxs-lookup"><span data-stu-id="27fcb-151">Code calling *UseIISIntegration* doesn't affect code portability.</span></span> <span data-ttu-id="27fcb-152">Se l'app non viene eseguita dietro IIS (ad esempio, se l'app viene eseguita direttamente in Kestrel), `UseIISIntegration` non esegue nessuna operazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-152">If the app isn't run behind IIS (for example, the app is run directly on Kestrel), `UseIISIntegration` no-ops.</span></span>

---

<span data-ttu-id="27fcb-153">Per altre informazioni sull'hosting, vedere [Hosting in ASP.NET Core](xref:fundamentals/hosting).</span><span class="sxs-lookup"><span data-stu-id="27fcb-153">For more information on hosting, see [Hosting in ASP.NET Core](xref:fundamentals/hosting).</span></span>

### <a name="iis-options"></a><span data-ttu-id="27fcb-154">Opzioni IIS</span><span class="sxs-lookup"><span data-stu-id="27fcb-154">IIS options</span></span>

<span data-ttu-id="27fcb-155">Per configurare le opzioni del servizio *IISIntegration*, includere una configurazione del servizio per *IISOptions* in *ConfigureServices*:</span><span class="sxs-lookup"><span data-stu-id="27fcb-155">To configure *IISIntegration* service options, include a service configuration for *IISOptions* in *ConfigureServices*:</span></span>

```csharp
services.Configure<IISOptions>(options => 
{
    ...
});
```

| <span data-ttu-id="27fcb-156">Opzione</span><span class="sxs-lookup"><span data-stu-id="27fcb-156">Option</span></span>                         | <span data-ttu-id="27fcb-157">Impostazione predefinita</span><span class="sxs-lookup"><span data-stu-id="27fcb-157">Default</span></span> | <span data-ttu-id="27fcb-158">Impostazione</span><span class="sxs-lookup"><span data-stu-id="27fcb-158">Setting</span></span> |
| ------------------------------ | ------- | ------- |
| `AutomaticAuthentication`      | `true`  | <span data-ttu-id="27fcb-159">Se è `true`, il middleware di autenticazione imposta `HttpContext.User` e risponde alle richieste generiche.</span><span class="sxs-lookup"><span data-stu-id="27fcb-159">If `true`, the authentication middleware sets the `HttpContext.User` and responds to generic challenges.</span></span> <span data-ttu-id="27fcb-160">Se è `false`, il middleware di autenticazione fornisce solo un'identità (`HttpContext.User`) e risponde alle richieste solo in base a un’istruzione esplicita di `AuthenticationScheme`.</span><span class="sxs-lookup"><span data-stu-id="27fcb-160">If `false`, the authentication middleware only provides an identity (`HttpContext.User`) and responds to challenges when explicitly requested by the `AuthenticationScheme`.</span></span> <span data-ttu-id="27fcb-161">Per il funzionamento di `AutomaticAuthentication` l’autenticazione di Windows deve essere abilitata in IIS.</span><span class="sxs-lookup"><span data-stu-id="27fcb-161">Windows Authentication must be enabled in IIS for `AutomaticAuthentication` to function.</span></span> |
| `AuthenticationDisplayName`    | `null`  | <span data-ttu-id="27fcb-162">Imposta il nome visualizzato dagli utenti nelle pagine di accesso.</span><span class="sxs-lookup"><span data-stu-id="27fcb-162">Sets the display name shown to users on login pages.</span></span> |
| `ForwardClientCertificate`     | `true`  | <span data-ttu-id="27fcb-163">Se è `true` ed è presente l’intestazione della richiesta `MS-ASPNETCORE-CLIENTCERT`, `HttpContext.Connection.ClientCertificate` viene popolato.</span><span class="sxs-lookup"><span data-stu-id="27fcb-163">If `true` and the `MS-ASPNETCORE-CLIENTCERT` request header is present, the `HttpContext.Connection.ClientCertificate` is populated.</span></span> |

### <a name="webconfig"></a><span data-ttu-id="27fcb-164">web.config</span><span class="sxs-lookup"><span data-stu-id="27fcb-164">web.config</span></span>

<span data-ttu-id="27fcb-165">Il file *web.config* configura il modulo di ASP.NET Core e fornisce altre configurazioni di IIS.</span><span class="sxs-lookup"><span data-stu-id="27fcb-165">The *web.config* file configures the ASP.NET Core Module and provides other IIS configuration.</span></span> <span data-ttu-id="27fcb-166">La creazione, trasformazione e pubblicazione *web.config* viene gestita da `Microsoft.NET.Sdk.Web`, che viene incluso quando si imposta l'SDK del progetto nella parte superiore del file *csproj*, `<Project Sdk="Microsoft.NET.Sdk.Web">`.</span><span class="sxs-lookup"><span data-stu-id="27fcb-166">Creating, transforming, and publishing *web.config* is handled by `Microsoft.NET.Sdk.Web`, which is included when you set your project's SDK at the top of your *.csproj* file, `<Project Sdk="Microsoft.NET.Sdk.Web">`.</span></span> <span data-ttu-id="27fcb-167">Per impedire che la destinazione MSBuild trasformi il file *web.config*, aggiungere la proprietà ** \<IsTransformWebConfigDisabled >** al file di progetto con un'impostazione di `true`:</span><span class="sxs-lookup"><span data-stu-id="27fcb-167">To prevent the MSBuild target from transforming your *web.config* file, add the **\<IsTransformWebConfigDisabled>** property to your project file with a setting of `true`:</span></span>

```xml
<PropertyGroup>
  <IsTransformWebConfigDisabled>true</IsTransformWebConfigDisabled>
</PropertyGroup>
```

<span data-ttu-id="27fcb-168">Se non si dispone di un file *web.config* nel progetto quando si pubblica con *dotnet.publish* o con la pubblicazione con Visual Studio, il file viene creato automaticamente nell'output pubblicato.</span><span class="sxs-lookup"><span data-stu-id="27fcb-168">If you don't have a *web.config* file in the project when you publish with *dotnet publish* or with Visual Studio publish, the file is created for you in published output.</span></span> <span data-ttu-id="27fcb-169">Se si dispone del file nel progetto, esso viene trasformato con i corretti *processPath* e *argomenti* per configurare il modulo di ASP.NET Core e spostato nell'output pubblicato.</span><span class="sxs-lookup"><span data-stu-id="27fcb-169">If you have the file in your project, it's transformed with the correct *processPath* and *arguments* to configure the ASP.NET Core Module and moved to published output.</span></span> <span data-ttu-id="27fcb-170">La trasformazione non tocca le impostazioni di configurazione di IIS incluse nel file.</span><span class="sxs-lookup"><span data-stu-id="27fcb-170">The transformation doesn't touch IIS configuration settings that you've included in the file.</span></span>

## <a name="create-the-iis-website"></a><span data-ttu-id="27fcb-171">Creare il sito Web IIS</span><span class="sxs-lookup"><span data-stu-id="27fcb-171">Create the IIS Website</span></span>

1. <span data-ttu-id="27fcb-172">Nel sistema IIS di destinazione creare una cartella per contenere le cartelle e i file pubblicati dell'applicazione, che sono descritti in [Struttura della Directory](xref:hosting/directory-structure).</span><span class="sxs-lookup"><span data-stu-id="27fcb-172">On the target IIS system, create a folder to contain the application's published folders and files, which are described in [Directory Structure](xref:hosting/directory-structure).</span></span>

2. <span data-ttu-id="27fcb-173">All'interno della cartella creata creare una cartella dei *registri* per contenere i registri applicazioni (se si prevede di abilitare la registrazione).</span><span class="sxs-lookup"><span data-stu-id="27fcb-173">Within the folder you created, create a *logs* folder to hold application logs (if you plan to enable logging).</span></span> <span data-ttu-id="27fcb-174">Se si prevede di distribuire l'applicazione con una cartella *registri* nel payload, è possibile saltare questo passaggio.</span><span class="sxs-lookup"><span data-stu-id="27fcb-174">If you plan to deploy your application with a *logs* folder in the payload, you may skip this step.</span></span>

3. <span data-ttu-id="27fcb-175">In **Gestione IIS**, creare un nuovo sito Web.</span><span class="sxs-lookup"><span data-stu-id="27fcb-175">In **IIS Manager**, create a new website.</span></span> <span data-ttu-id="27fcb-176">Fornire un **Nome del sito** e impostare il **Percorso fisico** alla cartella di distribuzione dell'applicazione che è stata creata.</span><span class="sxs-lookup"><span data-stu-id="27fcb-176">Provide a **Site name** and set the **Physical path** to the application's deployment folder that you created.</span></span> <span data-ttu-id="27fcb-177">Fornire la configurazione dell'**Associazione** e creare il sito Web.</span><span class="sxs-lookup"><span data-stu-id="27fcb-177">Provide the **Binding** configuration and create the website.</span></span>

4. <span data-ttu-id="27fcb-178">Impostare il pool di applicazioni su **Nessun codice gestito**.</span><span class="sxs-lookup"><span data-stu-id="27fcb-178">Set the application pool to **No Managed Code**.</span></span> <span data-ttu-id="27fcb-179">ASP.NET Core viene eseguito in un processo separato e gestisce il runtime.</span><span class="sxs-lookup"><span data-stu-id="27fcb-179">ASP.NET Core runs in a separate process and manages the runtime.</span></span>

5. <span data-ttu-id="27fcb-180">Aprire la finestra **Aggiungi sito Web**.</span><span class="sxs-lookup"><span data-stu-id="27fcb-180">Open the **Add Website** window.</span></span>

   ![Fare clic su Aggiungi sito Web dal menu di scelta rapida dei siti.](iis/_static/add-website-context-menu-ws2016.png)

6. <span data-ttu-id="27fcb-182">Configurare il sito Web.</span><span class="sxs-lookup"><span data-stu-id="27fcb-182">Configure the website.</span></span>

   ![Specificare il nome del sito, il percorso fisico e il nome Host nel passaggio Aggiungi sito Web.](iis/_static/add-website-ws2016.png)

7. <span data-ttu-id="27fcb-184">Nel riquadro **Pool di applicazioni** aprire la finestra **Modifica Pool di applicazioni** facendo clic col tasto destro sul pool di applicazioni del sito Web e selezionando **Impostazioni Basic... ** dal menu a comparsa.</span><span class="sxs-lookup"><span data-stu-id="27fcb-184">In the **Application Pools** panel, open the **Edit Application Pool** window by right-clicking on the website's application pool and selecting **Basic Settings...** from the popup menu.</span></span>

   ![Selezionare le Impostazioni Basic dal menu di scelta rapida del Pool di applicazioni.](iis/_static/apppools-basic-settings-ws2016.png)

8. <span data-ttu-id="27fcb-186">Impostare la **versione CLR.NET** su **Nessun codice gestito**.</span><span class="sxs-lookup"><span data-stu-id="27fcb-186">Set the **.NET CLR version** to **No Managed Code**.</span></span>

   ![Non impostare il Codice gestito per la versione CLR.NET.](iis/_static/edit-apppool-ws2016.png)
     
    <span data-ttu-id="27fcb-188">Nota: l'impostazione della **versione CLR.NET** su **Nessun codice gestito** è facoltativa.</span><span class="sxs-lookup"><span data-stu-id="27fcb-188">Note: Setting the **.NET CLR version** to **No Managed Code** is optional.</span></span> <span data-ttu-id="27fcb-189">ASP.NET Core non si basa sul caricamento del CLR del desktop.</span><span class="sxs-lookup"><span data-stu-id="27fcb-189">ASP.NET Core doesn't rely on loading the desktop CLR.</span></span>

9. <span data-ttu-id="27fcb-190">Confermare che l'identità del modello del processo disponga delle autorizzazioni appropriate.</span><span class="sxs-lookup"><span data-stu-id="27fcb-190">Confirm the process model identity has the proper permissions.</span></span>

    <span data-ttu-id="27fcb-191">Se si modifica l'identità predefinita del pool di applicazioni (**Modello di processo** > **identità**) da **ApplicationPoolIdentity** a un'altra identità, verificare che la nuova identità disponga delle autorizzazioni necessarie per accedere alla cartella dell'applicazione, al database e alle altre risorse richieste.</span><span class="sxs-lookup"><span data-stu-id="27fcb-191">If you change the default identity of the application pool (**Process Model** > **Identity**) from **ApplicationPoolIdentity** to another identity, verify that the new identity has the required permissions to access the application's folder, database, and other required resources.</span></span>
   
## <a name="deploy-the-application"></a><span data-ttu-id="27fcb-192">Distribuire l'applicazione</span><span class="sxs-lookup"><span data-stu-id="27fcb-192">Deploy the application</span></span>
<span data-ttu-id="27fcb-193">Distribuire l'applicazione nella cartella creata nel sistema IIS di destinazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-193">Deploy the application to the folder you created on the target IIS system.</span></span> <span data-ttu-id="27fcb-194">Distribuzione Web è il metodo consigliato per la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-194">Web Deploy is the recommended mechanism for deployment.</span></span> <span data-ttu-id="27fcb-195">Le alternative a Distribuzione Web sono elencate di seguito.</span><span class="sxs-lookup"><span data-stu-id="27fcb-195">Alternatives to Web Deploy are listed below.</span></span>

<span data-ttu-id="27fcb-196">Verificare che l'app pubblicata per la distribuzione non sia in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-196">Confirm that the published app for deployment isn't running.</span></span> <span data-ttu-id="27fcb-197">I file nella cartella *publish* sono bloccati durante l'esecuzione dell'app.</span><span class="sxs-lookup"><span data-stu-id="27fcb-197">Files in the *publish* folder are locked when the app is running.</span></span> <span data-ttu-id="27fcb-198">La distribuzione non viene eseguita perché non è possibile copiare i file bloccati.</span><span class="sxs-lookup"><span data-stu-id="27fcb-198">Deployment can't occur because locked files can't be copied.</span></span>

### <a name="web-deploy-with-visual-studio"></a><span data-ttu-id="27fcb-199">Distribuzione web con Visual Studio</span><span class="sxs-lookup"><span data-stu-id="27fcb-199">Web Deploy with Visual Studio</span></span>
<span data-ttu-id="27fcb-200">Vedere l'argomento [Creare profili di pubblicazione per Visual Studio e MSBuild, per distribuire le app ASP.NET Core](xref:publishing/web-publishing-vs#publish-profiles) per informazioni su come creare un profilo di pubblicazione da usare con Distribuzione Web.</span><span class="sxs-lookup"><span data-stu-id="27fcb-200">See [Create publish profiles for Visual Studio and MSBuild, to deploy ASP.NET Core apps](xref:publishing/web-publishing-vs#publish-profiles) topic to learn how to create a publish profile for use with Web Deploy.</span></span> <span data-ttu-id="27fcb-201">Se il provider di hosting fornisce un Profilo di pubblicazione o il supporto per crearne uno, scaricare il profilo e importarlo usando la finestra di dialogo di Visual Studio **Pubblica**.</span><span class="sxs-lookup"><span data-stu-id="27fcb-201">If your hosting provider supplies a Publish Profile or support for creating one, download their profile and import it using the Visual Studio **Publish** dialog.</span></span>

![Pagina della finestra di dialogo Pubblica](iis/_static/pub-dialog.png)

### <a name="web-deploy-outside-of-visual-studio"></a><span data-ttu-id="27fcb-203">Distribuzione Web all'esterno di Visual Studio</span><span class="sxs-lookup"><span data-stu-id="27fcb-203">Web Deploy outside of Visual Studio</span></span>
<span data-ttu-id="27fcb-204">È anche possibile usare Distribuzione Web all'esterno di Visual Studio dalla riga di comando.</span><span class="sxs-lookup"><span data-stu-id="27fcb-204">You can also use Web Deploy outside of Visual Studio from the command line.</span></span> <span data-ttu-id="27fcb-205">Per altre informazioni sulla distribuzione, vedere [Strumento Distribuzione Web](https://docs.microsoft.com/iis/publish/using-web-deploy/use-the-web-deployment-tool).</span><span class="sxs-lookup"><span data-stu-id="27fcb-205">For more information, see [Web Deployment Tool](https://docs.microsoft.com/iis/publish/using-web-deploy/use-the-web-deployment-tool).</span></span>

### <a name="alternatives-to-web-deploy"></a><span data-ttu-id="27fcb-206">Alternative a Distribuzione web</span><span class="sxs-lookup"><span data-stu-id="27fcb-206">Alternatives to Web Deploy</span></span>
<span data-ttu-id="27fcb-207">Se non si desidera usare Distribuzione Web o non si usa Visual Studio, è possibile usare uno dei diversi metodi per spostare l'applicazione nel sistema di hosting, ad esempio Xcopy, Robocopy o PowerShell.</span><span class="sxs-lookup"><span data-stu-id="27fcb-207">If you don't wish to use Web Deploy or are not using Visual Studio, you may use any of several methods to move the application to the hosting system, such as Xcopy, Robocopy, or PowerShell.</span></span> <span data-ttu-id="27fcb-208">Gli utenti di Visual Studio possono usare gli [Esempi di pubblicazione](https://github.com/aspnet/vsweb-publish/blob/master/samples/samples.md).</span><span class="sxs-lookup"><span data-stu-id="27fcb-208">Visual Studio users may use the [Publish Samples](https://github.com/aspnet/vsweb-publish/blob/master/samples/samples.md).</span></span>

## <a name="browse-the-website"></a><span data-ttu-id="27fcb-209">Esplorare il sito Web</span><span class="sxs-lookup"><span data-stu-id="27fcb-209">Browse the website</span></span>
![Il browser Microsoft Edge ha caricato la pagina di avvio IIS.](iis/_static/browsewebsite.png)
   
>[!WARNING]
> <span data-ttu-id="27fcb-211">Le applicazioni .NET core sono ospitate tramite un proxy inverso tra IIS e il server Kestrel.</span><span class="sxs-lookup"><span data-stu-id="27fcb-211">.NET Core applications are hosted via a reverse-proxy between IIS and the Kestrel server.</span></span> <span data-ttu-id="27fcb-212">Per creare il proxy inverso, il file *web.config* deve essere presente nel percorso radice del contenuto (in genere il percorso di base dell'app) dell'applicazione distribuita, che è il percorso fisico del sito Web fornito a IIS.</span><span class="sxs-lookup"><span data-stu-id="27fcb-212">In order to create the reverse-proxy, the *web.config* file must be present at the content root path (typically the app base path) of the deployed application, which is the website physical path provided to IIS.</span></span> <span data-ttu-id="27fcb-213">I file riservati esistono nel percorso fisico dell'app, incluse le sottocartelle, ad esempio *my_application.runtimeconfig.json*, *my_application.xml* (commenti della documentazione XML), e *my_application.deps.json*.</span><span class="sxs-lookup"><span data-stu-id="27fcb-213">Sensitive files exist on the app's physical path, including subfolders, such as *my_application.runtimeconfig.json*, *my_application.xml* (XML Documentation comments), and *my_application.deps.json*.</span></span> <span data-ttu-id="27fcb-214">Il file *web.config* è necessario per creare il proxy inverso in Kestrel, che impedisce a IIS di usare questi e altri file riservati.</span><span class="sxs-lookup"><span data-stu-id="27fcb-214">The *web.config* file is required to create the reverse proxy to Kestrel, which prevents IIS from serving these and other sensitive files.</span></span> <span data-ttu-id="27fcb-215">**Pertanto, è importante che il file *web.config* non sia mai accidentalmente rinominato o rimosso dalla distribuzione.**</span><span class="sxs-lookup"><span data-stu-id="27fcb-215">**Therefore, it is important that the *web.config* file is never accidently renamed or removed from the deployment.**</span></span>

## <a name="data-protection"></a><span data-ttu-id="27fcb-216">Protezione dei dati</span><span class="sxs-lookup"><span data-stu-id="27fcb-216">Data protection</span></span>

<span data-ttu-id="27fcb-217">Un'applicazione ASP.NET Core archivierà il gruppo di chiavi in memoria alla condizione seguente:</span><span class="sxs-lookup"><span data-stu-id="27fcb-217">An ASP.NET Core application will store the keyring in memory under the following condition:</span></span>

* <span data-ttu-id="27fcb-218">Un sito Web è ospitato dietro a IIS.</span><span class="sxs-lookup"><span data-stu-id="27fcb-218">A website is hosted behind IIS.</span></span>
* <span data-ttu-id="27fcb-219">Lo stack di protezione dei dati non è stato configurato per archiviare il gruppo di chiavi in un archivio permanente.</span><span class="sxs-lookup"><span data-stu-id="27fcb-219">The Data Protection stack has not been configured to store the keyring in a persistent store.</span></span>

<span data-ttu-id="27fcb-220">Se il gruppo di chiavi verrà archiviato in memoria, quando l'app viene riavviata:</span><span class="sxs-lookup"><span data-stu-id="27fcb-220">If the keyring is stored in memory, when the app restarts:</span></span>

* <span data-ttu-id="27fcb-221">Tutti i token di autenticazione dei moduli non saranno validi.</span><span class="sxs-lookup"><span data-stu-id="27fcb-221">All forms authentication tokens will be invalid.</span></span> 
* <span data-ttu-id="27fcb-222">Gli utenti dovranno accedere di nuovo per la richiesta successiva.</span><span class="sxs-lookup"><span data-stu-id="27fcb-222">Users will need to login again on their next request.</span></span> 
* <span data-ttu-id="27fcb-223">Tutti i dati che sono stati protetti con il gruppo di chiavi non saranno più protetti.</span><span class="sxs-lookup"><span data-stu-id="27fcb-223">Any data you protected with the keyring will no longer be unprotected.</span></span>

> [!WARNING]
> <span data-ttu-id="27fcb-224">La protezione dei dati viene usata da diversi middlewares di ASP.NET, inclusi quelli usati nell'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-224">Data Protection is used by several ASP.NET middlewares, including those used in authentication.</span></span> <span data-ttu-id="27fcb-225">Anche se non si chiamano in modo specifico le API di protezione dei dati dal proprio codice è necessario configurare la protezione dei dati con uno script di distribuzione o nel proprio codice.</span><span class="sxs-lookup"><span data-stu-id="27fcb-225">Even if you do not specifically call any Data Protection APIs from your own code you should configure Data Protection with a deployment script or in your own code.</span></span> <span data-ttu-id="27fcb-226">Se non si configura la protezione dei dati, per impostazione predefinita, le chiavi verranno conservate in memoria ed eliminate quando l'app viene riavviata.</span><span class="sxs-lookup"><span data-stu-id="27fcb-226">If you do not configure data protection, by default the keys will be held in memory and discarded when your app restarts.</span></span> <span data-ttu-id="27fcb-227">Il riavvio invaliderà i cookie scritti per l'autenticazione dei cookie e gli utenti dovranno accedere di nuovo.</span><span class="sxs-lookup"><span data-stu-id="27fcb-227">Restarting will invalidate any cookies written by the cookie authentication and users will have to login again.</span></span>

<span data-ttu-id="27fcb-228">Per configurare la protezione dei dati in IIS è necessario usare uno degli approcci seguenti:</span><span class="sxs-lookup"><span data-stu-id="27fcb-228">To configure Data Protection under IIS you must use one of the following approaches:</span></span>

* <span data-ttu-id="27fcb-229">Eseguire uno [script di powershell](https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1) per creare le voci del Registro di sistema appropriato (ad esempio, `.\Provision-AutoGenKeys.ps1 DefaultAppPool`).</span><span class="sxs-lookup"><span data-stu-id="27fcb-229">Run a [powershell script](https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1) to create suitable registry entries (For example,  `.\Provision-AutoGenKeys.ps1 DefaultAppPool`).</span></span> <span data-ttu-id="27fcb-230">Questo archivierà le chiavi nel registro, protetto tramite DPAPI con una chiave del livello del computer.</span><span class="sxs-lookup"><span data-stu-id="27fcb-230">This will store keys in the registry, protected using DPAPI with a machine wide key.</span></span>
* <span data-ttu-id="27fcb-231">Configurare il Pool di applicazioni IIS per caricare il profilo utente.</span><span class="sxs-lookup"><span data-stu-id="27fcb-231">Configure the IIS Application Pool to load the user profile.</span></span> <span data-ttu-id="27fcb-232">Questa impostazione è nella sezione **Modello del processo** in **Impostazioni avanzate** per il pool di applicazioni.</span><span class="sxs-lookup"><span data-stu-id="27fcb-232">This setting is in the **Process Model** section under the **Advanced Settings** for the application pool.</span></span> <span data-ttu-id="27fcb-233">Impostare **Caricamento del profilo utente** su `True`.</span><span class="sxs-lookup"><span data-stu-id="27fcb-233">Set **Load User Profile** to `True`.</span></span> <span data-ttu-id="27fcb-234">Questo archivierà le chiavi nella directory del profilo utente e le terrà protette tramite DPAPI con una chiave specifica per l'account utente usato per il pool di applicazioni.</span><span class="sxs-lookup"><span data-stu-id="27fcb-234">This will store keys under the user profile directory, and protected using DPAPI with a key specific to the user account used for the app pool.</span></span>
* <span data-ttu-id="27fcb-235">Modificare il codice dell'applicazione per [usare il file system come archivio del gruppo di chiavi](xref:security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="27fcb-235">Adjust your application code to [use the file system as a key ring store](xref:security/data-protection/configuration/overview).</span></span> <span data-ttu-id="27fcb-236">Usare un certificato X509 per proteggere le chiavi e assicurarsi che sia un certificato attendibile.</span><span class="sxs-lookup"><span data-stu-id="27fcb-236">Use an X509 certificate to protect the key ring and ensure it is a trusted certificate.</span></span> <span data-ttu-id="27fcb-237">Ad esempio, in caso di un certificato autofirmato, è necessario inserirlo nell'archivio di Radice attendibile.</span><span class="sxs-lookup"><span data-stu-id="27fcb-237">For example, if it is a self signed certificate you must place it in the Trusted Root store.</span></span>

<span data-ttu-id="27fcb-238">Quando si usa IIS in una web farm:</span><span class="sxs-lookup"><span data-stu-id="27fcb-238">When using IIS in a web farm:</span></span>

* <span data-ttu-id="27fcb-239">Usare una condivisione di file a cui possano accedere tutti i computer.</span><span class="sxs-lookup"><span data-stu-id="27fcb-239">Use a file share all machines can access.</span></span>
* <span data-ttu-id="27fcb-240">Distribuire un certificato X509 in ogni computer.</span><span class="sxs-lookup"><span data-stu-id="27fcb-240">Deploy an X509 certificate to each machine.</span></span>  <span data-ttu-id="27fcb-241">Configurare [protezione dei dati nel codice](https://docs.microsoft.com/aspnet/core/security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="27fcb-241">Configure [data protection in code](https://docs.microsoft.com/aspnet/core/security/data-protection/configuration/overview).</span></span>

### <a name="1-create-a-data-protection-registry-hive"></a><span data-ttu-id="27fcb-242">1. Creare un Hive del Registro di sistema di protezione dei dati</span><span class="sxs-lookup"><span data-stu-id="27fcb-242">1. Create a Data Protection Registry Hive</span></span>

<span data-ttu-id="27fcb-243">Le chiavi di protezione dei dati usate dalle applicazioni ASP.NET vengono archiviate nell'hive del registro esterno alle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="27fcb-243">Data Protection keys used by ASP.NET applications are stored in registry hives external to the applications.</span></span> <span data-ttu-id="27fcb-244">Per mantenere le chiavi per una determinata applicazione, è necessario creare un hive del registro per il pool di applicazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-244">To persist the keys for a given application, you must create a registry hive for the application's application pool.</span></span>

<span data-ttu-id="27fcb-245">Per le installazioni autonome IIS, è possibile usare lo [script PowerShell AutoGenKeys.ps1 - Effettuare il provisioning di protezione dei dati](https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1) per ogni pool di applicazioni usato con un'applicazione ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="27fcb-245">For standalone IIS installations, you may use the [Data Protection Provision-AutoGenKeys.ps1 PowerShell script](https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1) for each application pool used with an ASP.NET Core application.</span></span> <span data-ttu-id="27fcb-246">Questo script creerà una chiave del registro speciale nel registro HKLM che ACLed solo per l'account del processo di lavoro.</span><span class="sxs-lookup"><span data-stu-id="27fcb-246">This script will create a special registry key in the HKLM registry that is ACLed only to the worker process account.</span></span> <span data-ttu-id="27fcb-247">Le chiavi vengono crittografate a riposo tramite la DPAPI.</span><span class="sxs-lookup"><span data-stu-id="27fcb-247">Keys are encrypted at rest using DPAPI.</span></span>

<span data-ttu-id="27fcb-248">In scenari di web farm un'applicazione può essere configurata per usare un percorso UNC per archiviare il relativo gruppo di chiavi di protezione dei dati.</span><span class="sxs-lookup"><span data-stu-id="27fcb-248">In web farm scenarios, an application can be configured to use a UNC path to store its data protection key ring.</span></span> <span data-ttu-id="27fcb-249">Per impostazione predefinita, le chiavi di protezione dei dati non vengono crittografate.</span><span class="sxs-lookup"><span data-stu-id="27fcb-249">By default, the data protection keys are not encrypted.</span></span> <span data-ttu-id="27fcb-250">È necessario assicurarsi che le autorizzazioni del file per una condivisione di questo tipo siano limitate per l'applicazione che viene eseguita come l'account di Windows.</span><span class="sxs-lookup"><span data-stu-id="27fcb-250">You should ensure that the file permissions for such a share are limited to the Windows account the application runs as.</span></span> <span data-ttu-id="27fcb-251">Inoltre è possibile scegliere di proteggere le chiavi a riposo tramite un certificato X509.</span><span class="sxs-lookup"><span data-stu-id="27fcb-251">In addition you may choose to protect keys at rest using an X509 certificate.</span></span> <span data-ttu-id="27fcb-252">Si consiglia di prendere in considerazione un meccanismo per consentire agli utenti di caricare i certificati, inserirli nell'archivio dei certificati attendibili dell'utente e assicurarsi che siano disponibili in tutti i computer in cui verrà eseguita l'applicazione dell'utente.</span><span class="sxs-lookup"><span data-stu-id="27fcb-252">You may wish to consider a mechanism to allow users to upload certificates, place them into the user's trusted certificate store, and ensure they are available on all machines the user's application will run on.</span></span> <span data-ttu-id="27fcb-253">Vedere [Configurazione della protezione dati](xref:security/data-protection/configuration/overview#data-protection-configuring) per altri dettagli.</span><span class="sxs-lookup"><span data-stu-id="27fcb-253">See [Configuring Data Protection](xref:security/data-protection/configuration/overview#data-protection-configuring) for details.</span></span>

### <a name="2-configure-the-iis-application-pool-to-load-the-user-profile"></a><span data-ttu-id="27fcb-254">2. Configurare il Pool di applicazioni IIS per caricare il profilo utente</span><span class="sxs-lookup"><span data-stu-id="27fcb-254">2. Configure the IIS Application Pool to load the user profile</span></span>
<span data-ttu-id="27fcb-255">Questa impostazione è nella sezione Modello del processo in Impostazioni avanzate per il pool di applicazioni.</span><span class="sxs-lookup"><span data-stu-id="27fcb-255">This setting is in the Process Model section under the Advanced Settings for the application pool.</span></span> <span data-ttu-id="27fcb-256">Impostare il Caricamento del profilo utente su True.</span><span class="sxs-lookup"><span data-stu-id="27fcb-256">Set Load User Profile to True.</span></span> <span data-ttu-id="27fcb-257">Questo archivierà le chiavi nella directory del profilo utente e le terrà protette tramite DPAPI con una chiave specifica per l'account utente usato per il pool di applicazioni.</span><span class="sxs-lookup"><span data-stu-id="27fcb-257">This will store keys under the user profile directory, and protected using DPAPI with a key specific to the user account used for the app pool.</span></span>

### <a name="3-machine-wide-policy-for-data-protection"></a><span data-ttu-id="27fcb-258">3. Criteri a livello di computer per la protezione dei dati</span><span class="sxs-lookup"><span data-stu-id="27fcb-258">3. Machine-wide policy for data protection</span></span>

<span data-ttu-id="27fcb-259">Il sistema di protezione dei dati ha un supporto limitato per impostazione predefinita per i [criteri a livello di computer](xref:security/data-protection/configuration/machine-wide-policy#data-protection-configuration-machinewidepolicy) per tutte le applicazioni che usano le API di protezione dei dati.</span><span class="sxs-lookup"><span data-stu-id="27fcb-259">The data protection system has limited support for setting default [machine-wide policy](xref:security/data-protection/configuration/machine-wide-policy#data-protection-configuration-machinewidepolicy) for all applications that consume the data protection APIs.</span></span> <span data-ttu-id="27fcb-260">Vedere la documentazione sulla [protezione dei dati](xref:security/data-protection/index) per maggiori dettagli.</span><span class="sxs-lookup"><span data-stu-id="27fcb-260">See the [data protection](xref:security/data-protection/index) documentation for more details.</span></span>

## <a name="configuration-of-sub-applications"></a><span data-ttu-id="27fcb-261">Configurazione delle sotto-applicazioni</span><span class="sxs-lookup"><span data-stu-id="27fcb-261">Configuration of sub-applications</span></span>

<span data-ttu-id="27fcb-262">Sotto applicazioni aggiunte sotto l'applicazione della radice non devono includere il modulo di ASP.NET Core come gestore.</span><span class="sxs-lookup"><span data-stu-id="27fcb-262">Sub applications added under the root application shouldn't include the ASP.NET Core Module as a handler.</span></span> <span data-ttu-id="27fcb-263">Se si aggiunge il modulo come un gestore in un file della sotto applicazione *web.config*, si riceve un riferimento 500.19 (errore del server interno) al file di configurazione non corretto quando si tenta di passare alla sotto app.</span><span class="sxs-lookup"><span data-stu-id="27fcb-263">If you add the module as a handler in a sub-application's *web.config* file, you receive a 500.19 (Internal Server Error) referencing the faulty config file when you attempt to browse the sub app.</span></span> <span data-ttu-id="27fcb-264">Nell'esempio seguente viene illustrato il contenuto di un file pubblicato *web.config* per una sotto app di ASP.NET Core:</span><span class="sxs-lookup"><span data-stu-id="27fcb-264">The following example shows the contents of a published *web.config* file for an ASP.NET Core sub app:</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <aspNetCore processPath="dotnet" 
        arguments=".\MyApp.dll" 
        stdoutLogEnabled="false" 
        stdoutLogFile=".\logs\stdout" />
  </system.webServer>
</configuration>
```

<span data-ttu-id="27fcb-265">Se si intende ospitare una sotto app di ASP.NET Core sotto un'app ASP.NET Core, è necessario rimuovere in modo esplicito il gestore ereditato nel file della sub app *web.config*:</span><span class="sxs-lookup"><span data-stu-id="27fcb-265">If you intend to host a non-ASP.NET Core sub app underneath an ASP.NET Core app, you must explicitly remove the inherited handler in the sub app *web.config* file:</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <handlers>
      <remove name="aspNetCore"/>
    </handlers>
    <aspNetCore processPath="dotnet" 
        arguments=".\MyApp.dll" 
        stdoutLogEnabled="false" 
        stdoutLogFile=".\logs\stdout" />
  </system.webServer>
</configuration>
```

<span data-ttu-id="27fcb-266">Per altre informazioni sulla configurazione del modulo di ASP.NET Core con il file *web.config*, vedere l'argomento[Introduzione al modulo di ASP.NET Core](xref:fundamentals/servers/aspnet-core-module) e il [riferimento alla configurazione del modulo di ASP.NET Core](xref:hosting/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="27fcb-266">For more information on configuring the ASP.NET Core Module with the *web.config* file, see the [Introduction to ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module) topic and the [ASP.NET Core Module configuration reference](xref:hosting/aspnet-core-module).</span></span>

## <a name="configuration-of-iis-with-webconfig"></a><span data-ttu-id="27fcb-267">Configurazione di IIS con web.config</span><span class="sxs-lookup"><span data-stu-id="27fcb-267">Configuration of IIS with web.config</span></span>

<span data-ttu-id="27fcb-268">La configurazione di IIS è comunque influenzata dalla sezione `<system.webServer>` di *web.config* per tali funzionalità IIS che si applicano a una configurazione di proxy inverso.</span><span class="sxs-lookup"><span data-stu-id="27fcb-268">IIS configuration is still influenced by the `<system.webServer>` section of *web.config* for those IIS features that apply to a reverse proxy configuration.</span></span> <span data-ttu-id="27fcb-269">Ad esempio, è possibile disporre della IIS configurata a livello di sistema per usare la compressione dinamica, ma è possibile disabilitare questa impostazione per un'app con l'elemento `<urlCompression>` nel file dell'app *web.config*.</span><span class="sxs-lookup"><span data-stu-id="27fcb-269">For example, you may have IIS configured at the system level to use dynamic compression, but you could disable that setting for an app with the `<urlCompression>` element in the app's *web.config* file.</span></span> <span data-ttu-id="27fcb-270">Per altre informazioni, vedere il riferimento alla configurazione [ per `<system.webServer>`](https://docs.microsoft.com/iis/configuration/system.webServer/), [Riferimento di configurazione del modulo di ASP.NET Core](xref:hosting/aspnet-core-module), e [Uso dei moduli di IIS con ASP.NET Core](xref:hosting/iis-modules).</span><span class="sxs-lookup"><span data-stu-id="27fcb-270">For more information, see the [configuration reference for `<system.webServer>`](https://docs.microsoft.com/iis/configuration/system.webServer/), [ASP.NET Core Module Configuration Reference](xref:hosting/aspnet-core-module), and [Using IIS Modules with ASP.NET Core](xref:hosting/iis-modules).</span></span> <span data-ttu-id="27fcb-271">Se è necessario impostare le variabili di ambiente per le singole app in esecuzione nel pool di applicazioni isolate (supportate in IIS 10.0+), vedere la sezione *Comando AppCmd.exe* dell'argomento [Variabili di ambiente \<environmentVariables >](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) nella documentazione di riferimento.</span><span class="sxs-lookup"><span data-stu-id="27fcb-271">If you need to set environment variables for individual apps running in isolated Application Pools (supported on IIS 10.0+), see the *AppCmd.exe command* section of the [Environment Variables \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) topic in the IIS reference documentation.</span></span>

## <a name="configuration-sections-of-webconfig"></a><span data-ttu-id="27fcb-272">Sezioni di configurazione di web.config</span><span class="sxs-lookup"><span data-stu-id="27fcb-272">Configuration sections of web.config</span></span>

<span data-ttu-id="27fcb-273">A differenza delle applicazioni .NET Framework che sono configurate con gli elementi `<system.web>`, `<appSettings>`, `<connectionStrings>`, e `<location>` in *web.config*, le app ASP.NET Core vengono configurate tramite altri provider di configurazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-273">Unlike .NET Framework applications that are configured with the `<system.web>`, `<appSettings>`, `<connectionStrings>`, and `<location>` elements in *web.config*, ASP.NET Core apps are configured using other configuration providers.</span></span> <span data-ttu-id="27fcb-274">Per altre informazioni, vedere [Configurazione](xref:fundamentals/configuration).</span><span class="sxs-lookup"><span data-stu-id="27fcb-274">For more information, see [Configuration](xref:fundamentals/configuration).</span></span>

## <a name="application-pools"></a><span data-ttu-id="27fcb-275">Pool di applicazioni</span><span class="sxs-lookup"><span data-stu-id="27fcb-275">Application Pools</span></span>

<span data-ttu-id="27fcb-276">Quando si ospitano più siti Web in un unico sistema, è necessario isolare le applicazioni le une dalle altre eseguendo ciascuna app nel proprio pool di applicazioni.</span><span class="sxs-lookup"><span data-stu-id="27fcb-276">When hosting multiple websites on a single system, you should isolate the applications from each other by running each app in its own application pool.</span></span> <span data-ttu-id="27fcb-277">La finestra di dialogo di IIS **Aggiungi sito Web** ha per impostazione predefinita questo comportamento.</span><span class="sxs-lookup"><span data-stu-id="27fcb-277">The IIS **Add Website** dialog defaults to this behavior.</span></span> <span data-ttu-id="27fcb-278">Quando si fornisce un **Nome del sito**, il testo viene automaticamente trasferito alla casella di testo **Pool di applicazioni**.</span><span class="sxs-lookup"><span data-stu-id="27fcb-278">When you provide a **Site name**, the text is automatically transferred to the **Application pool** textbox.</span></span> <span data-ttu-id="27fcb-279">Verrà creato un nuovo pool di applicazioni usando il nome del sito quando si aggiunge il sito Web.</span><span class="sxs-lookup"><span data-stu-id="27fcb-279">A new application pool will be created using the site name when you add the website.</span></span>

## <a name="application-pool-identity"></a><span data-ttu-id="27fcb-280">Identità del pool di applicazione</span><span class="sxs-lookup"><span data-stu-id="27fcb-280">Application Pool Identity</span></span>

<span data-ttu-id="27fcb-281">Un account di identità di pool di applicazioni consente di eseguire un'applicazione in un account univoco senza la necessità di creare e gestire i domini o gli account locali.</span><span class="sxs-lookup"><span data-stu-id="27fcb-281">An application pool identity account allows you to run an application under a unique account without having to create and manage domains or local accounts.</span></span> <span data-ttu-id="27fcb-282">In IIS 8.0 + il processo di lavoro amministrazione IIS (WAS) crea un account virtuale con il nome del nuovo pool di applicazioni e l'esecuzione di processi di lavoro del pool di applicazioni con questo account per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="27fcb-282">On IIS 8.0+, the IIS Admin Worker Process (WAS) will create a virtual account with the name of the new application pool and run the application pool's worker processes under this account by default.</span></span> <span data-ttu-id="27fcb-283">Nella Console di gestione IIS in Impostazioni avanzate per il pool di applicazioni, verificare che l'identità venga impostata per usare **ApplicationPoolIdentity** come illustrato nell'immagine seguente.</span><span class="sxs-lookup"><span data-stu-id="27fcb-283">In the IIS Management Console, under Advanced Settings for your application pool, ensure that the Identity is set to use **ApplicationPoolIdentity** as shown in the image below.</span></span>

![Finestra di dialogo Impostazioni avanzate del pool di applicazione](iis/_static/apppool-identity.png)

<span data-ttu-id="27fcb-285">Il processo di gestione IIS crea un identificatore sicuro con il nome del pool di applicazioni nel sistema di sicurezza di Windows.</span><span class="sxs-lookup"><span data-stu-id="27fcb-285">The IIS management process creates a secure identifier with the name of the application pool in the Windows Security System.</span></span> <span data-ttu-id="27fcb-286">Le risorse possono essere protette tramite questa identità. Tuttavia, questa identità non è un account utente reale e non verrà visualizzata nella Console di gestione utenti di Windows.</span><span class="sxs-lookup"><span data-stu-id="27fcb-286">Resources can be secured by using this identity; however, this identity is not a real user account and won't show up in the Windows User Management Console.</span></span>

<span data-ttu-id="27fcb-287">Se è necessario concedere l'accesso elevato del processo di lavoro IIS all'applicazione, sarà necessario modificare l'elenco di controllo di accesso (ACL) per la directory contenente l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-287">If you need to grant the IIS worker process elevated access to your application, you will need to modify the Access Control List (ACL) for the directory containing your application.</span></span>

1. <span data-ttu-id="27fcb-288">Aprire Esplora risorse, quindi spostarsi nella directory.</span><span class="sxs-lookup"><span data-stu-id="27fcb-288">Open Windows Explorer and navigate to the directory.</span></span>

2. <span data-ttu-id="27fcb-289">Fare clic con il pulsante destro sulla directory e fare clic su **Proprietà**.</span><span class="sxs-lookup"><span data-stu-id="27fcb-289">Right click on the directory and click **Properties**.</span></span>

3. <span data-ttu-id="27fcb-290">Sotto la scheda **Sicurezza**, fare clic sul pulsante **Modifica** pulsante e quindi il pulsante **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="27fcb-290">Under the **Security** tab, click the **Edit** button and then the **Add** button.</span></span>

4. <span data-ttu-id="27fcb-291">Fare clic su di **percorsi** pulsante e assicurarsi di selezionare il sistema.</span><span class="sxs-lookup"><span data-stu-id="27fcb-291">Click the **Locations** button and make sure you select your system.</span></span>

5. <span data-ttu-id="27fcb-292">Immettere **IIS AppPool\DefaultAppPool** nella casella di testo **Immettere i nomi degli oggetti da selezionare**.</span><span class="sxs-lookup"><span data-stu-id="27fcb-292">Enter **IIS AppPool\DefaultAppPool** in **Enter the object names to select** textbox.</span></span>

  ![Selezionare la finestra di dialogo degli utenti o dei gruppi per la cartella dell'applicazione](iis/_static/select-users-or-groups-1.png)

6. <span data-ttu-id="27fcb-294">Fare clic sul pulsante **Controlla nomi** e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="27fcb-294">Click the **Check Names** button and then click **OK**.</span></span>

  ![Selezionare la finestra di dialogo degli utenti o dei gruppi per la cartella dell'applicazione](iis/_static/select-users-or-groups-2.png)

<span data-ttu-id="27fcb-296">È possibile farlo anche tramite un prompt dei comandi usando lo strumento **ICACLS**:</span><span class="sxs-lookup"><span data-stu-id="27fcb-296">You can also do this via a command prompt using **ICACLS** tool:</span></span>

```console
ICACLS C:\sites\MyWebApp /grant "IIS AppPool\DefaultAppPool":F
```

## <a name="troubleshooting-tips"></a><span data-ttu-id="27fcb-297">Suggerimenti per la risoluzione dei problemi</span><span class="sxs-lookup"><span data-stu-id="27fcb-297">Troubleshooting tips</span></span>

<span data-ttu-id="27fcb-298">Per diagnosticare problemi con le distribuzioni di IIS, studiare l'output del browser, esaminare il registro dell'**applicazione** del sistema tramite **Visualizzatore eventi**e abilitare la registrazione`stdout`.</span><span class="sxs-lookup"><span data-stu-id="27fcb-298">To diagnose problems with IIS deployments, study browser output, examine the system's **Application** log through **Event Viewer**, and enable `stdout` logging.</span></span> <span data-ttu-id="27fcb-299">Il registro del **Modulo di ASP.NET Core** verrà trovato nel percorso fornito nell'attributo *stdoutLogFile* dell'elemento `<aspNetCore>` in *web.config*. Le cartelle nel percorso fornito nel valore dell'attributo devono essere presenti nella distribuzione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-299">The **ASP.NET Core Module** log will be found on the path provided in the *stdoutLogFile* attribute of the `<aspNetCore>` element in *web.config*. Any folders on the path provided in the attribute value must exist in the deployment.</span></span> <span data-ttu-id="27fcb-300">È anche necessario impostare *stdoutLogEnabled = "true"*.</span><span class="sxs-lookup"><span data-stu-id="27fcb-300">You must also set *stdoutLogEnabled="true"*.</span></span> <span data-ttu-id="27fcb-301">Le applicazioni che usano l'SDK `Microsoft.NET.Sdk.Web` per creare il file *web.config* useranno come impostazione definita *stdoutLogEnabled* su *false*, pertanto è necessario specificare manualmente il file *web.config* o modificare il file per permettere la `stdout` registrazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-301">Applications that use the `Microsoft.NET.Sdk.Web` SDK to create the *web.config* file will default the *stdoutLogEnabled* setting to *false*, so you must manually provide the *web.config* file or modify the file in order to enable `stdout` logging.</span></span>

<span data-ttu-id="27fcb-302">Molti errori comuni non vengono visualizzati nel browser, nel Registro dell'applicazione e nel Registro del modulo di ASP.NET Core fino a quando il modulo *startupTimeLimit* (impostazione predefinita: 120 secondi) e *startupRetryCount* (valore predefinito: 2) non sono stati superati.</span><span class="sxs-lookup"><span data-stu-id="27fcb-302">Several of the common errors do not appear in the browser, Application Log, and ASP.NET Core Module Log until the module *startupTimeLimit* (default: 120 seconds) and *startupRetryCount* (default: 2) have passed.</span></span> <span data-ttu-id="27fcb-303">Pertanto, attendere sei minuti completi prima di dedurre che il modulo non è riuscito ad avviare un processo per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-303">Therefore, wait a full six minutes before deducing that the module has failed to start a process for the application.</span></span>

<span data-ttu-id="27fcb-304">Un modo veloce per determinare se l'applicazione funziona correttamente è quello di eseguire l'applicazione direttamente su Kestrel.</span><span class="sxs-lookup"><span data-stu-id="27fcb-304">One quick way to determine if the application is working properly is to run the application directly on Kestrel.</span></span> <span data-ttu-id="27fcb-305">Se è stata pubblicata l'applicazione come una distribuzione dipendente dal framework, eseguire **dotnet my_application.dll** nella cartella di distribuzione, che è il percorso fisico di IIS per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-305">If the application was published as a framework-dependent deployment, execute **dotnet my_application.dll** in the deployment folder, which is the IIS physical path to the application.</span></span> <span data-ttu-id="27fcb-306">Se è stata pubblicata l'applicazione come distribuzione indipendente, eseguire l'eseguibile dell'applicazione direttamente da un prompt dei comandi, **my_application.exe**, nella cartella di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-306">If the application was published as a self-contained deployment, run the application's executable directly from a command prompt, **my_application.exe**, in the deployment folder.</span></span> <span data-ttu-id="27fcb-307">Se Kestrel è in ascolto sulla porta predefinita 5000, si deve essere in grado di passare all'applicazione in `http://localhost:5000/`.</span><span class="sxs-lookup"><span data-stu-id="27fcb-307">If Kestrel is listening on default port 5000, you should be able to browse the application at `http://localhost:5000/`.</span></span> <span data-ttu-id="27fcb-308">Se l'applicazione risponde in genere in corrispondenza dell'indirizzo endpoint di Kestrel, è più probabile che il problema sia correlato con la configurazione di IIS ASP.NET Core modulo-Kestrel ed è meno probabile che sia all'interno dell'applicazione stessa.</span><span class="sxs-lookup"><span data-stu-id="27fcb-308">If the application responds normally at the Kestrel endpoint address, the problem is more likely related to the IIS-ASP.NET Core Module-Kestrel configuration and less likely within the application itself.</span></span>

<span data-ttu-id="27fcb-309">Un modo per determinare se il proxy inverso IIS al server Kestrel funziona correttamente è quello di eseguire una semplice richiesta di file statici per un foglio di stile, uno script o un'immagine dai file statici dell'applicazione in *wwwroot* tramite [Middleware del File statico](xref:fundamentals/static-files).</span><span class="sxs-lookup"><span data-stu-id="27fcb-309">One way to determine if the IIS reverse proxy to the Kestrel server is working properly is to perform a simple static file request for a stylesheet, script, or image from the application's static files in *wwwroot* using [Static File middleware](xref:fundamentals/static-files).</span></span> <span data-ttu-id="27fcb-310">Se l'applicazione può essere attiva per file statici, ma le visualizzazioni MVC e altri endpoint hanno esito negativo, è meno probabile che il problema sia relazionato con la configurazione di IIS ASP.NET Core modulo-Kestrel e più probabile che sia all'interno dell'applicazione stessa (ad esempio, il routing MVC o l'errore del server 500 Internal).</span><span class="sxs-lookup"><span data-stu-id="27fcb-310">If the application can serve static files but MVC Views and other endpoints are failing, the problem is less likely related to the IIS-ASP.NET Core Module-Kestrel configuration and more likely within the application itself (for example, MVC routing or 500 Internal Server Error).</span></span>

<span data-ttu-id="27fcb-311">Quando viene avviato normalmente Kestrel dietro IIS, ma l'app non verrà eseguita nel sistema dopo averla correttamente eseguita in locale, è possibile aggiungere temporaneamente una variabile di ambiente per *web.config* per impostare il `ASPNETCORE_ENVIRONMENT` su `Development`.</span><span class="sxs-lookup"><span data-stu-id="27fcb-311">When Kestrel starts normally behind IIS but the app won't run on the system after successfully running locally, you can temporarily add an environment variable to *web.config* to set the `ASPNETCORE_ENVIRONMENT` to `Development`.</span></span> <span data-ttu-id="27fcb-312">Fino a quando non si esegue l'override dell'ambiente nell'avvio dell'app, la [pagina d'eccezione dello sviluppatore](xref:fundamentals/error-handling) verrà visualizzata quando l'app viene eseguita nel sistema.</span><span class="sxs-lookup"><span data-stu-id="27fcb-312">As long as you don't override the environment in app startup, this will allow the [developer exception page](xref:fundamentals/error-handling) to appear when the app is run on the system.</span></span> <span data-ttu-id="27fcb-313">Impostare la variabile di ambiente per `ASPNETCORE_ENVIRONMENT` in questo modo è consigliato solo per i sistemi del processo di gestione temporanea/ di test che non sono esposti a Internet.</span><span class="sxs-lookup"><span data-stu-id="27fcb-313">Setting the environment variable for `ASPNETCORE_ENVIRONMENT` in this way is only recommended for staging/testing systems that are not exposed to the Internet.</span></span> <span data-ttu-id="27fcb-314">Assicurarsi di rimuovere la variabile di ambiente dal file *web.config* al termine del file.</span><span class="sxs-lookup"><span data-stu-id="27fcb-314">Be sure you remove the environment variable from the *web.config* file when finished.</span></span> <span data-ttu-id="27fcb-315">Per informazioni sull'impostazione delle variabili di ambiente tramite *web.config* per il proxy inverso, vedere [elemento figlio environmentVariables di aspNetCore](xref:hosting/aspnet-core-module#setting-environment-variables).</span><span class="sxs-lookup"><span data-stu-id="27fcb-315">For information on setting environment variables via *web.config* for the reverse proxy, see [environmentVariables child element of aspNetCore](xref:hosting/aspnet-core-module#setting-environment-variables).</span></span>

<span data-ttu-id="27fcb-316">Nella maggior parte dei casi l'abilitazione della registrazione dell'applicazione per ricevere assistenza nella risoluzione dei problemi con l'applicazione o il proxy inverso.</span><span class="sxs-lookup"><span data-stu-id="27fcb-316">In most cases, enabling application logging will assist in troubleshooting problems with application or the reverse proxy.</span></span> <span data-ttu-id="27fcb-317">Per altre informazioni, vedere [Registrazione](xref:fundamentals/logging).</span><span class="sxs-lookup"><span data-stu-id="27fcb-317">See [Logging](xref:fundamentals/logging) for more information.</span></span>

<span data-ttu-id="27fcb-318">L'ultimo suggerimento di risoluzione dei problemi è relativo alle app che non vengono eseguite dopo l'aggiornamento di .NET Core SDK nelle versioni computer o pacchetto di sviluppo all'interno dell'app.</span><span class="sxs-lookup"><span data-stu-id="27fcb-318">Our last troubleshooting tip pertains to apps that fail to run after upgrading either the .NET Core SDK on the development machine or package versions within the app.</span></span> <span data-ttu-id="27fcb-319">In alcuni casi i pacchetti incoerenti possono interrompere un'app quando si eseguono aggiornamenti principali.</span><span class="sxs-lookup"><span data-stu-id="27fcb-319">In some cases, incoherent packages may break an app when performing major upgrades.</span></span> <span data-ttu-id="27fcb-320">È possibile risolvere la maggior parte di questi problemi eliminando le cartelle `bin` e `obj` nel progetto, cancellando le caches del pacchetto in `%UserProfile%\.nuget\packages\` e `%LocalAppData%\Nuget\v3-cache`, ripristinando il progetto e confermando che la distribuzione precedente sul sistema è stata eliminata completamente prima di distribuire nuovamente l'app.</span><span class="sxs-lookup"><span data-stu-id="27fcb-320">You can fix most of these issues by deleting the `bin` and `obj` folders in the project, clearing package caches at `%UserProfile%\.nuget\packages\` and `%LocalAppData%\Nuget\v3-cache`, restoring the project, and confirming that your prior deployment on the system has been completely deleted prior to re-deploying the app.</span></span>

>[!TIP]
> <span data-ttu-id="27fcb-321">Un modo pratico per cancellare le cache del pacchetto per ottenere lo strumento `NuGet.exe` da [NuGet.org](https://www.nuget.org/), aggiungerlo al percorso del sistema ed eseguire `nuget locals all -clear` da un prompt dei comandi.</span><span class="sxs-lookup"><span data-stu-id="27fcb-321">A convenient way to clear package caches is to obtain the `NuGet.exe` tool from [NuGet.org](https://www.nuget.org/), add it to your system PATH, and execute `nuget locals all -clear` from a command prompt.</span></span>

## <a name="common-errors"></a><span data-ttu-id="27fcb-322">Errori comuni</span><span class="sxs-lookup"><span data-stu-id="27fcb-322">Common errors</span></span>

<span data-ttu-id="27fcb-323">Quello che segue non è un elenco completo di errori.</span><span class="sxs-lookup"><span data-stu-id="27fcb-323">The following is not a complete list of errors.</span></span> <span data-ttu-id="27fcb-324">Qualora si incontrasse un errore che non è presente qui, lasciare un messaggio di errore dettagliato nella sezione commenti.</span><span class="sxs-lookup"><span data-stu-id="27fcb-324">Should you encounter an error not listed here, please leave a detailed error message in the comments section below.</span></span>

### <a name="installer-unable-to-obtain-vc-redistributable"></a><span data-ttu-id="27fcb-325">Il programma di installazione non riesce ad ottenere VC++ Ridistribuibile</span><span class="sxs-lookup"><span data-stu-id="27fcb-325">Installer unable to obtain VC++ Redistributable</span></span>

* <span data-ttu-id="27fcb-326">**Eccezione del programma di installazione:** 0x80072efd o 0x80072f76 - Errore non specificato</span><span class="sxs-lookup"><span data-stu-id="27fcb-326">**Installer Exception:** 0x80072efd or 0x80072f76 - Unspecified error</span></span>

* <span data-ttu-id="27fcb-327">**Installer Log Exception&#8224;:** Error 0x80072efd oppure0x80072f76: Impossibile eseguire i file EXE del pacchetto</span><span class="sxs-lookup"><span data-stu-id="27fcb-327">**Installer Log Exception&#8224;:** Error 0x80072efd or 0x80072f76: Failed to execute EXE package</span></span>

  <span data-ttu-id="27fcb-328">&#8224; Il log si trova in C:\Users\\{USER}\AppData\Local\Temp\dd_DotNetCoreWinSvrHosting__{timestamp}.log.</span><span class="sxs-lookup"><span data-stu-id="27fcb-328">&#8224;The log is located at C:\Users\\{USER}\AppData\Local\Temp\dd_DotNetCoreWinSvrHosting__{timestamp}.log.</span></span>

<span data-ttu-id="27fcb-329">Risoluzione dei problemi:</span><span class="sxs-lookup"><span data-stu-id="27fcb-329">Troubleshooting:</span></span>

* <span data-ttu-id="27fcb-330">Se il sistema non ha accesso a Internet durante l'installazione del server che ospita l'aggregazione, questa eccezione si verificherà quando il programma di installazione non riesce ad ottenere il *Microsoft Visual C++ 2015 Redistributable*.</span><span class="sxs-lookup"><span data-stu-id="27fcb-330">If the system does not have Internet access while installing the server hosting bundle, this exception will occur when the installer is prevented from obtaining the *Microsoft Visual C++ 2015 Redistributable*.</span></span> <span data-ttu-id="27fcb-331">È possibile ottenere un programma di installazione da [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=53840).</span><span class="sxs-lookup"><span data-stu-id="27fcb-331">You may obtain an installer from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=53840).</span></span> <span data-ttu-id="27fcb-332">Se il programma di installazione non riesce, il runtime .NET Core necessario per le distribuzioni dipendenti dal framework host potrebbe non essere ricevuto.</span><span class="sxs-lookup"><span data-stu-id="27fcb-332">If the installer fails, you may not receive the .NET Core runtime required to host framework-dependent deployments.</span></span> <span data-ttu-id="27fcb-333">Se si prevede di ospitare le distribuzioni dipendenti da framework, verificare che il runtime sia installato nelle funzionalità &amp; Programmi.</span><span class="sxs-lookup"><span data-stu-id="27fcb-333">If you plan to host framework-dependent deployments, confirm that the runtime is installed in Programs &amp; Features.</span></span> <span data-ttu-id="27fcb-334">È possibile ottenere un programma di installazione di runtime da [Download .NET](https://www.microsoft.com/net/download/core).</span><span class="sxs-lookup"><span data-stu-id="27fcb-334">You may obtain a runtime installer from [.NET Downloads](https://www.microsoft.com/net/download/core).</span></span> <span data-ttu-id="27fcb-335">Dopo aver installato il runtime, riavviare il sistema o riavviare IIS eseguendo **net stop was /y** seguito da **net start w3svc** da un prompt dei comandi.</span><span class="sxs-lookup"><span data-stu-id="27fcb-335">After installing the runtime, restart the system or restart IIS by executing **net stop was /y** followed by **net start w3svc** from a command prompt.</span></span>

### <a name="os-upgrade-removed-the-32-bit-aspnet-core-module"></a><span data-ttu-id="27fcb-336">L'aggiornamento del sistema operativo ha rimosso il modulo di ASP.NET Core a 32 bit</span><span class="sxs-lookup"><span data-stu-id="27fcb-336">OS upgrade removed the 32-bit ASP.NET Core Module</span></span>

* <span data-ttu-id="27fcb-337">**Registro dell'applicazione:** Il modulo DLL**C:\WINDOWS\system32\inetsrv\aspnetcore.dll** non è riuscito a caricare.</span><span class="sxs-lookup"><span data-stu-id="27fcb-337">**Application Log:** The Module DLL **C:\WINDOWS\system32\inetsrv\aspnetcore.dll** failed to load.</span></span> <span data-ttu-id="27fcb-338">L'errore è nei dati.</span><span class="sxs-lookup"><span data-stu-id="27fcb-338">The data is the error.</span></span>

<span data-ttu-id="27fcb-339">Risoluzione dei problemi:</span><span class="sxs-lookup"><span data-stu-id="27fcb-339">Troubleshooting:</span></span>

* <span data-ttu-id="27fcb-340">I file non-OS nella directory **C:\Windows\SysWOW64\inetsrv** non vengono conservati durante un aggiornamento del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="27fcb-340">Non-OS files in the **C:\Windows\SysWOW64\inetsrv** directory are not preserved during an OS upgrade.</span></span> <span data-ttu-id="27fcb-341">Se si dispone di un Modulo di ASP.NET Core installato prima di un aggiornamento del sistema operativo e quindi si prova a eseguire qualsiasi pool di applicazioni in modalità a 32 bit dopo un aggiornamento del sistema operativo, si verificherà questo problema.</span><span class="sxs-lookup"><span data-stu-id="27fcb-341">If you have the ASP.NET Core Module installed prior to an OS upgrade and then try to run any AppPool in 32-bit mode after an OS upgrade, you will encounter this issue.</span></span> <span data-ttu-id="27fcb-342">Dopo un aggiornamento del sistema operativo, ripristinare il Modulo di ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="27fcb-342">After an OS upgrade, repair the ASP.NET Core Module.</span></span> <span data-ttu-id="27fcb-343">Vedere [Installare l'aggregazione di Hosting di.NET Core Windows Server](#install-the-net-core-windows-server-hosting-bundle).</span><span class="sxs-lookup"><span data-stu-id="27fcb-343">See [Install the .NET Core Windows Server Hosting bundle](#install-the-net-core-windows-server-hosting-bundle).</span></span> <span data-ttu-id="27fcb-344">Selezionare **Ripara** quando si esegue il programma di installazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-344">Select **Repair** when you run the installer.</span></span>

### <a name="platform-conflicts-with-rid"></a><span data-ttu-id="27fcb-345">La piattaforma è in conflitto con RID</span><span class="sxs-lookup"><span data-stu-id="27fcb-345">Platform conflicts with RID</span></span>

* <span data-ttu-id="27fcb-346">**Browser:** errore HTTP 502.5 - errore del processo</span><span class="sxs-lookup"><span data-stu-id="27fcb-346">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="27fcb-347">**Registro dell'applicazione:** l'applicazione "MACHINE/WEBROOT/APPHOST/MY_APPLICATION" con radice fisica "C:\{PATH}\' Impossibile avviare il processo con la riga di comando""C:\\{PATH}\my_application.{exe|dll}" ", ErrorCode = "0x80004005 : ff.</span><span class="sxs-lookup"><span data-stu-id="27fcb-347">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\{PATH}\' failed to start process with commandline '"C:\\{PATH}\my_application.{exe|dll}" ', ErrorCode = '0x80004005 : ff.</span></span>

* <span data-ttu-id="27fcb-348">**Registro del modulo ASP.NET Core:** Eccezione non gestita: System.BadImageFormatException: Impossibile caricare il file o l'assembly "my_application.dll".</span><span class="sxs-lookup"><span data-stu-id="27fcb-348">**ASP.NET Core Module Log:** Unhandled Exception: System.BadImageFormatException: Could not load file or assembly 'my_application.dll'.</span></span> <span data-ttu-id="27fcb-349">Tentativo di caricare un programma con un formato non corretto.</span><span class="sxs-lookup"><span data-stu-id="27fcb-349">An attempt was made to load a program with an incorrect format.</span></span>

<span data-ttu-id="27fcb-350">Risoluzione dei problemi:</span><span class="sxs-lookup"><span data-stu-id="27fcb-350">Troubleshooting:</span></span>

* <span data-ttu-id="27fcb-351">Confermare che l'applicazione venga eseguita in locale su Kestrel.</span><span class="sxs-lookup"><span data-stu-id="27fcb-351">Confirm that the application runs locally on Kestrel.</span></span> <span data-ttu-id="27fcb-352">Un errore del processo può essere il risultato di un problema all'interno dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-352">A process failure might be the result of a problem within the application.</span></span> <span data-ttu-id="27fcb-353">Per altre informazioni, vedere [Consigli per la risoluzione dei problemi](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="27fcb-353">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

* <span data-ttu-id="27fcb-354">Confermare di non aver impostato un `<PlatformTarget>` nel *csproj* che è in conflitto con il RID.</span><span class="sxs-lookup"><span data-stu-id="27fcb-354">Confirm that you didn't set a `<PlatformTarget>` in your *.csproj* that conflicts with the RID.</span></span> <span data-ttu-id="27fcb-355">Ad esempio, non specificare un `<PlatformTarget>` di `x86` e pubblicare con un RID di `win10-x64`, tramite l'uso di *dotnet publish - c Release -r win10-x64* o impostando `<RuntimeIdentifiers>` nel *csproj* su `win10-x64`.</span><span class="sxs-lookup"><span data-stu-id="27fcb-355">For example, don't specify a `<PlatformTarget>` of `x86` and publish with an RID of `win10-x64`, either by using *dotnet publish -c Release -r win10-x64* or by setting the `<RuntimeIdentifiers>` in your *.csproj* to `win10-x64`.</span></span> <span data-ttu-id="27fcb-356">Il progetto verrà pubblicato senza avviso o errore, ma con esito negativo in merito alle eccezioni registrate in precedenza nel sistema.</span><span class="sxs-lookup"><span data-stu-id="27fcb-356">The project will publish without warning or error but fail with the above logged exceptions on the system.</span></span>

* <span data-ttu-id="27fcb-357">Se questa eccezione si verifica per una distribuzione di App di Azure durante l'aggiornamento di un'applicazione e la distribuzione di assembly più recenti, eliminare manualmente tutti i file dalla distribuzione precedente.</span><span class="sxs-lookup"><span data-stu-id="27fcb-357">If this exception occurs for an Azure Apps deployment when upgrading an application and deploying newer assemblies, manually delete all files from the prior deployment.</span></span> <span data-ttu-id="27fcb-358">Le assembly incompatibili con il tempo di ritardo possono causare una eccezione `System.BadImageFormatException` quando si distribuisce un'app aggiornata.</span><span class="sxs-lookup"><span data-stu-id="27fcb-358">Lingering incompatible assemblies can result in a `System.BadImageFormatException` exception when deploying an upgraded app.</span></span>

### <a name="uri-endpoint-wrong-or-stopped-website"></a><span data-ttu-id="27fcb-359">Endpoint dell'URI non corretto o sito web arrestato</span><span class="sxs-lookup"><span data-stu-id="27fcb-359">URI endpoint wrong or stopped website</span></span>

* <span data-ttu-id="27fcb-360">**Browser:** ERR_CONNECTION_REFUSED</span><span class="sxs-lookup"><span data-stu-id="27fcb-360">**Browser:** ERR_CONNECTION_REFUSED</span></span>

* <span data-ttu-id="27fcb-361">**Registro dell'applicazione:** Nessuna voce</span><span class="sxs-lookup"><span data-stu-id="27fcb-361">**Application Log:** No entry</span></span>

* <span data-ttu-id="27fcb-362">**Registro del modulo di ASP.NET Core:** il file di registro non è stato creato</span><span class="sxs-lookup"><span data-stu-id="27fcb-362">**ASP.NET Core Module Log:** Log file not created</span></span>

<span data-ttu-id="27fcb-363">Risoluzione dei problemi:</span><span class="sxs-lookup"><span data-stu-id="27fcb-363">Troubleshooting:</span></span>

* <span data-ttu-id="27fcb-364">Confermare che si usa l'endpoint URI corretto per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-364">Confirm you are using the correct URI endpoint for the application.</span></span> <span data-ttu-id="27fcb-365">Controllare le associazioni.</span><span class="sxs-lookup"><span data-stu-id="27fcb-365">Check your bindings.</span></span>

* <span data-ttu-id="27fcb-366">Confermare che il sito Web IIS non si trovi nello stato *In arresto*.</span><span class="sxs-lookup"><span data-stu-id="27fcb-366">Confirm that the IIS website is not in the *Stopped* state.</span></span>

### <a name="corewebengine-or-w3svc-server-features-disabled"></a><span data-ttu-id="27fcb-367">Le funzionalità del server CoreWebEngine o W3SVC sono disabilitate</span><span class="sxs-lookup"><span data-stu-id="27fcb-367">CoreWebEngine or W3SVC server features disabled</span></span>

* <span data-ttu-id="27fcb-368">**Eccezione del sistema operativo:** per usare il modulo di ASP.NET Core è necessario installare le funzionalità di IIS 7.0 CoreWebEngine e W3SVC.</span><span class="sxs-lookup"><span data-stu-id="27fcb-368">**OS Exception:** The IIS 7.0 CoreWebEngine and W3SVC features must be installed to use the ASP.NET Core Module.</span></span>

<span data-ttu-id="27fcb-369">Risoluzione dei problemi:</span><span class="sxs-lookup"><span data-stu-id="27fcb-369">Troubleshooting:</span></span>

* <span data-ttu-id="27fcb-370">Confermare che siano state abilitati il ruolo e le funzionalità appropriate.</span><span class="sxs-lookup"><span data-stu-id="27fcb-370">Confirm that you have enabled the proper role and features.</span></span> <span data-ttu-id="27fcb-371">Vedere [Configurazione di IIS](#iis-configuration).</span><span class="sxs-lookup"><span data-stu-id="27fcb-371">See [IIS Configuration](#iis-configuration).</span></span>

### <a name="incorrect-website-physical-path-or-application-missing"></a><span data-ttu-id="27fcb-372">Percorso fisico del sito Web non corretto o applicazione mancante</span><span class="sxs-lookup"><span data-stu-id="27fcb-372">Incorrect website physical path or application missing</span></span>

* <span data-ttu-id="27fcb-373">**Browser:** 403 Non consentito: accesso negato **- OPPURE -** 403.14 Non consentito - Il server Web è configurato per non visualizzare il contenuto di questa directory.</span><span class="sxs-lookup"><span data-stu-id="27fcb-373">**Browser:** 403 Forbidden - Access is denied **--OR--** 403.14 Forbidden - The Web server is configured to not list the contents of this directory.</span></span>

* <span data-ttu-id="27fcb-374">**Registro dell'applicazione:** Nessuna voce</span><span class="sxs-lookup"><span data-stu-id="27fcb-374">**Application Log:** No entry</span></span>

* <span data-ttu-id="27fcb-375">**Registro del modulo di ASP.NET Core:** il file di registro non è stato creato</span><span class="sxs-lookup"><span data-stu-id="27fcb-375">**ASP.NET Core Module Log:** Log file not created</span></span>

<span data-ttu-id="27fcb-376">Risoluzione dei problemi:</span><span class="sxs-lookup"><span data-stu-id="27fcb-376">Troubleshooting:</span></span>

* <span data-ttu-id="27fcb-377">Controllare il sito Web IIS **Impostazioni di base** e la cartella dell'applicazione fisica.</span><span class="sxs-lookup"><span data-stu-id="27fcb-377">Check the IIS website **Basic Settings** and the physical application folder.</span></span> <span data-ttu-id="27fcb-378">Confermare che l'applicazione si trovi nella cartella nel sito Web IIS **Percorso fisico**.</span><span class="sxs-lookup"><span data-stu-id="27fcb-378">Confirm that the application is in the folder at the IIS website **Physical path**.</span></span>

### <a name="incorrect-role-module-not-installed-or-incorrect-permissions"></a><span data-ttu-id="27fcb-379">Ruolo non corretto, modulo non installato o autorizzazioni non corrette</span><span class="sxs-lookup"><span data-stu-id="27fcb-379">Incorrect role, module not installed, or incorrect permissions</span></span>

* <span data-ttu-id="27fcb-380">**Browser:** 500.19 Errore interno al server – non è possibile accedere alla pagina richiesta perché i dati di configurazione per la pagina non sono validi.</span><span class="sxs-lookup"><span data-stu-id="27fcb-380">**Browser:** 500.19 Internal Server Error - The requested page cannot be accessed because the related configuration data for the page is invalid.</span></span>

* <span data-ttu-id="27fcb-381">**Registro dell'applicazione:** Nessuna voce</span><span class="sxs-lookup"><span data-stu-id="27fcb-381">**Application Log:** No entry</span></span>

* <span data-ttu-id="27fcb-382">**Registro del modulo di ASP.NET Core:** il file di registro non è stato creato</span><span class="sxs-lookup"><span data-stu-id="27fcb-382">**ASP.NET Core Module Log:** Log file not created</span></span>

<span data-ttu-id="27fcb-383">Risoluzione dei problemi:</span><span class="sxs-lookup"><span data-stu-id="27fcb-383">Troubleshooting:</span></span>

* <span data-ttu-id="27fcb-384">Confermare che sia stato abilitato il ruolo appropriato.</span><span class="sxs-lookup"><span data-stu-id="27fcb-384">Confirm that you have enabled the proper role.</span></span> <span data-ttu-id="27fcb-385">Vedere [Configurazione di IIS](#iis-configuration).</span><span class="sxs-lookup"><span data-stu-id="27fcb-385">See [IIS Configuration](#iis-configuration).</span></span>

* <span data-ttu-id="27fcb-386">Controllare **Programmi &amp; Funzionalità** e confermare che il **Modulo di Microsoft ASP.NET Core** sia stato installato.</span><span class="sxs-lookup"><span data-stu-id="27fcb-386">Check **Programs &amp; Features** and confirm that the **Microsoft ASP.NET Core Module** has been installed.</span></span> <span data-ttu-id="27fcb-387">Se il **Modulo di Microsoft ASP.NET Core** non è presente nell'elenco dei programmi installati, installare il modulo.</span><span class="sxs-lookup"><span data-stu-id="27fcb-387">If the **Microsoft ASP.NET Core Module** is not present in the list of installed programs, install the module.</span></span> <span data-ttu-id="27fcb-388">Vedere [Installare l'aggregazione di Hosting di.NET Core Windows Server](#install-the-net-core-windows-server-hosting-bundle).</span><span class="sxs-lookup"><span data-stu-id="27fcb-388">See [Install the .NET Core Windows Server Hosting bundle](#install-the-net-core-windows-server-hosting-bundle).</span></span>

* <span data-ttu-id="27fcb-389">Assicurarsi che il **Pool di applicazioni > Modello di processo > Identità** sia impostato su **ApplicationPoolIdentity** o che un'identità personalizzata disponga delle autorizzazioni appropriate per accedere alla cartella di distribuzione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-389">Make sure that the **Application Pool > Process Model > Identity** is set to **ApplicationPoolIdentity** or your custom identity has the correct permissions to access the application's deployment folder.</span></span>

### <a name="incorrect-processpath-missing-path-variable-hosting-bundle-not-installed-systemiis-not-restarted-vc-redistributable-not-installed-or-dotnetexe-access-violation"></a><span data-ttu-id="27fcb-390">ProcessPath non corretto, variabile di percorso mancante, aggregazione di hosting non installata, sistema/IIS non riavviato, VC Redistributable non installato o violazione dell'accesso a dotnet.exe</span><span class="sxs-lookup"><span data-stu-id="27fcb-390">Incorrect processPath, missing PATH variable, hosting bundle not installed, system/IIS not restarted, VC++ Redistributable not installed, or dotnet.exe access violation</span></span>

* <span data-ttu-id="27fcb-391">**Browser:** errore HTTP 502.5 - errore del processo</span><span class="sxs-lookup"><span data-stu-id="27fcb-391">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="27fcb-392">**Registro dell'applicazione:** l'applicazione "MACHINE/WEBROOT/APPHOST/MY_APPLICATION" con radice fisica "C:\\PATH}\' Impossibile avviare il processo con la riga di comando"".\my_application.exe" ", ErrorCode = "0x80070002 : 0.</span><span class="sxs-lookup"><span data-stu-id="27fcb-392">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' failed to start process with commandline '".\my_application.exe" ', ErrorCode = '0x80070002 : 0.</span></span>

* <span data-ttu-id="27fcb-393">**Registro del modulo di ASP.NET Core:** il file di registro è stato creato ma è vuoto</span><span class="sxs-lookup"><span data-stu-id="27fcb-393">**ASP.NET Core Module Log:** Log file created but empty</span></span>

<span data-ttu-id="27fcb-394">Risoluzione dei problemi:</span><span class="sxs-lookup"><span data-stu-id="27fcb-394">Troubleshooting:</span></span>

* <span data-ttu-id="27fcb-395">Confermare che l'applicazione venga eseguita in locale su Kestrel.</span><span class="sxs-lookup"><span data-stu-id="27fcb-395">Confirm that the application runs locally on Kestrel.</span></span> <span data-ttu-id="27fcb-396">Un errore del processo può essere il risultato di un problema all'interno dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-396">A process failure might be the result of a problem within the application.</span></span> <span data-ttu-id="27fcb-397">Per altre informazioni, vedere [Consigli per la risoluzione dei problemi](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="27fcb-397">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

* <span data-ttu-id="27fcb-398">Controllare che l'attributo *processPath* nell'elemento `<aspNetCore>` in *web.config* confermi che si tratta di *dotnet* per una distribuzione dipendente da framework o *.\my_application.exe* per una distribuzione indipendente.</span><span class="sxs-lookup"><span data-stu-id="27fcb-398">Check the *processPath* attribute on the `<aspNetCore>` element in *web.config* to confirm that it is *dotnet* for a framework-dependent deployment or *.\my_application.exe* for a self-contained deployment.</span></span>

* <span data-ttu-id="27fcb-399">Per una distribuzione dipendente dal framework, *dotnet.exe* potrebbe non essere accessibile tramite le impostazioni del percorso.</span><span class="sxs-lookup"><span data-stu-id="27fcb-399">For a framework-dependent deployment, *dotnet.exe* might not be accessible via the PATH settings.</span></span> <span data-ttu-id="27fcb-400">Confermare che *C:\Program Files\dotnet\* esiste nelle impostazioni del percorso di sistema.</span><span class="sxs-lookup"><span data-stu-id="27fcb-400">Confirm that *C:\Program Files\dotnet\* exists in the System PATH settings.</span></span>

* <span data-ttu-id="27fcb-401">Per una distribuzione dipendente da framework, *dotnet.exe* potrebbe non essere accessibile per l'identità dell'utente del Pool di applicazioni.</span><span class="sxs-lookup"><span data-stu-id="27fcb-401">For a framework-dependent deployment, *dotnet.exe* might not be accessible for the user identity of the Application Pool.</span></span> <span data-ttu-id="27fcb-402">Confermare che l'identità dell'utente di AppPool disponga dell'accesso alla directory *C:\Program Files\dotnet*.</span><span class="sxs-lookup"><span data-stu-id="27fcb-402">Confirm that the AppPool user identity has access to the *C:\Program Files\dotnet* directory.</span></span> <span data-ttu-id="27fcb-403">Verificare che non siano presenti regole di negazione configurate per l'identità dell'utente di AppPool in *C:\Program Files\dotnet* e nelle directory dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-403">Confirm that there are no deny rules configured for the AppPool user identity on the *C:\Program Files\dotnet* and application directories.</span></span>

* <span data-ttu-id="27fcb-404">È possibile aver distribuito una distribuzione dipendente dal framework e installato .NET Core senza riavviare IIS.</span><span class="sxs-lookup"><span data-stu-id="27fcb-404">You may have deployed a framework-dependent deployment and installed .NET Core without restarting IIS.</span></span> <span data-ttu-id="27fcb-405">Riavviare il server o riavviare IIS eseguendo **net stop was /y** seguito da **net start w3svc** da un prompt dei comandi.</span><span class="sxs-lookup"><span data-stu-id="27fcb-405">Either restart the server or restart IIS by executing **net stop was /y** followed by **net start w3svc** from a command prompt.</span></span>

* <span data-ttu-id="27fcb-406">È possibile aver distribuito una distribuzione dipendente dal framework senza installare il runtime .NET Core nel sistema di hosting.</span><span class="sxs-lookup"><span data-stu-id="27fcb-406">You may have deployed a framework-dependent deployment without installing the .NET Core runtime on the hosting system.</span></span> <span data-ttu-id="27fcb-407">Se si sta tentando di eseguire una distribuzione in una distribuzione dipendente dal framework e non è stato installato il runtime .NET Core, eseguire il **Programma di installazione dell'aggregazione di hosting .NET Core Windows Server** nel sistema.</span><span class="sxs-lookup"><span data-stu-id="27fcb-407">If you're attempting to deploy a framework-dependent deployment and have not installed the .NET Core runtime, run the **.NET Core Windows Server Hosting bundle installer** on the system.</span></span> <span data-ttu-id="27fcb-408">Vedere [Installare l'aggregazione di Hosting di.NET Core Windows Server](#install-the-net-core-windows-server-hosting-bundle).</span><span class="sxs-lookup"><span data-stu-id="27fcb-408">See [Install the .NET Core Windows Server Hosting bundle](#install-the-net-core-windows-server-hosting-bundle).</span></span> <span data-ttu-id="27fcb-409">Se si sta cercando di installare il runtime .NET Core in un sistema senza una connessione ad Internet, ottenere il runtime da [NET.Downloads](https://www.microsoft.com/net/download/core) ed eseguire il programma di installazione dell'aggregazione di hosting per installare il modulo di ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="27fcb-409">If you are attempting to install the .NET Core runtime on a system without an Internet connection, obtain the runtime from [.NET Downloads](https://www.microsoft.com/net/download/core) and run the hosting bundle installer to install the ASP.NET Core Module.</span></span> <span data-ttu-id="27fcb-410">Completare l'installazione riavviando il sistema o riavviando IIS eseguendo **net stop was /y** seguito da **net start w3svc** da un prompt dei comandi.</span><span class="sxs-lookup"><span data-stu-id="27fcb-410">Complete the installation by restarting the system or restarting IIS by executing **net stop was /y** followed by **net start w3svc** from a command prompt.</span></span>

* <span data-ttu-id="27fcb-411">È possibile aver distribuito una distribuzione dipendente dal framework e installato .NET Core senza riavviare il sistema/IIS.</span><span class="sxs-lookup"><span data-stu-id="27fcb-411">You may have deployed a framework-dependent deployment and installed .NET Core without restarting the system/IIS.</span></span> <span data-ttu-id="27fcb-412">Riavviare il sistema o riavviare IIS eseguendo **net stop was /y** seguito da **net start w3svc** da un prompt dei comandi.</span><span class="sxs-lookup"><span data-stu-id="27fcb-412">Either restart the system or restart IIS by executing **net stop was /y** followed by **net start w3svc** from a command prompt.</span></span>

* <span data-ttu-id="27fcb-413">È possibile aver distribuito una distribuzione dipendente dal framework e *Microsoft Visual C++ 2015 Redistributable (x64)* non è installato nel sistema.</span><span class="sxs-lookup"><span data-stu-id="27fcb-413">You may have deployed a framework-dependent deployment and the *Microsoft Visual C++ 2015 Redistributable (x64)* is not installed on the system.</span></span> <span data-ttu-id="27fcb-414">È possibile ottenere un programma di installazione da [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=53840).</span><span class="sxs-lookup"><span data-stu-id="27fcb-414">You may obtain an installer from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=53840).</span></span>

### <a name="incorrect-arguments-of-aspnetcore-element"></a><span data-ttu-id="27fcb-415">Argomenti non corretti dell'elemento \<aspNetCore\></span><span class="sxs-lookup"><span data-stu-id="27fcb-415">Incorrect arguments of \<aspNetCore\> element</span></span>

* <span data-ttu-id="27fcb-416">**Browser:** errore HTTP 502.5 - errore del processo</span><span class="sxs-lookup"><span data-stu-id="27fcb-416">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="27fcb-417">**Registro dell'applicazione:** l'applicazione "MACHINE/WEBROOT/APPHOST/MY_APPLICATION" con radice fisica "C:\\PATH}\' Impossibile avviare il processo con la riga di comando'"dotnet\my_application.dll", ErrorCode = "0x80004005 : 80008081.</span><span class="sxs-lookup"><span data-stu-id="27fcb-417">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' failed to start process with commandline '"dotnet" .\my_application.dll', ErrorCode = '0x80004005 : 80008081.</span></span>

* <span data-ttu-id="27fcb-418">**Registro di modulo di ASP.NET Core:** l'esecuzione dell'applicazione non esiste: "PATH\my_application.dll"</span><span class="sxs-lookup"><span data-stu-id="27fcb-418">**ASP.NET Core Module Log:** The application to execute does not exist: 'PATH\my_application.dll'</span></span>

<span data-ttu-id="27fcb-419">Risoluzione dei problemi:</span><span class="sxs-lookup"><span data-stu-id="27fcb-419">Troubleshooting:</span></span>

* <span data-ttu-id="27fcb-420">Confermare che l'applicazione venga eseguita in locale su Kestrel.</span><span class="sxs-lookup"><span data-stu-id="27fcb-420">Confirm that the application runs locally on Kestrel.</span></span> <span data-ttu-id="27fcb-421">Un errore del processo può essere il risultato di un problema all'interno dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-421">A process failure might be the result of a problem within the application.</span></span> <span data-ttu-id="27fcb-422">Per altre informazioni, vedere [Consigli per la risoluzione dei problemi](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="27fcb-422">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

* <span data-ttu-id="27fcb-423">Esaminare l'attributo *argomenti* nell'elemento `<aspNetCore>` in *web.config* per confermare che si tratta di (a) *.\my_application.dll* per una distribuzione dipendente dal framework oppure (b) non è presente, è una stringa vuota (*argomenti=""*) o è un elenco di argomenti dell'applicazione (*argomenti="arg1, arg2,..."*) per una distribuzione indipendente.</span><span class="sxs-lookup"><span data-stu-id="27fcb-423">Examine the *arguments* attribute on the `<aspNetCore>` element in *web.config* to confirm that it is either (a) *.\my_application.dll* for a framework-dependent deployment; or (b) not present, an empty string (*arguments=""*), or a list of your application's arguments (*arguments="arg1, arg2, ..."*) for a self-contained deployment.</span></span>

### <a name="missing-net-framework-version"></a><span data-ttu-id="27fcb-424">Versione di .NET Framework non presente</span><span class="sxs-lookup"><span data-stu-id="27fcb-424">Missing .NET Framework version</span></span>

* <span data-ttu-id="27fcb-425">**Browser:** 502.3 Gateway non valido - si è verificato un errore di connessione durante il tentativo di routing della richiesta.</span><span class="sxs-lookup"><span data-stu-id="27fcb-425">**Browser:** 502.3 Bad Gateway - There was a connection error while trying to route the request.</span></span>

* <span data-ttu-id="27fcb-426">**Registro dell'applicazione:** ErrorCode = l'applicazione "MACHINE/WEBROOT/APPHOST/MY_APPLICATION" con radice fisica "C:\\PATH}\' Impossibile avviare il processo con la riga di comando""dotnet\my_application.dll", ErrorCode = "0x80004005 : 80008081.</span><span class="sxs-lookup"><span data-stu-id="27fcb-426">**Application Log:** ErrorCode = Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' failed to start process with commandline '"dotnet" .\my_application.dll', ErrorCode = '0x80004005 : 80008081.</span></span>

* <span data-ttu-id="27fcb-427">**Registro di modulo di ASP.NET Core:** Metodo, file o eccezione dell'assembly mancanti.</span><span class="sxs-lookup"><span data-stu-id="27fcb-427">**ASP.NET Core Module Log:** Missing method, file, or assembly exception.</span></span> <span data-ttu-id="27fcb-428">Il metodo, il file o l'assembly specificati nell'eccezione sono un metodo, un file o un'assembly .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="27fcb-428">The method, file, or assembly specified in the exception is a .NET Framework method, file, or assembly.</span></span>

<span data-ttu-id="27fcb-429">Risoluzione dei problemi:</span><span class="sxs-lookup"><span data-stu-id="27fcb-429">Troubleshooting:</span></span>

* <span data-ttu-id="27fcb-430">Installare la versione di .NET Framework mancante dal sistema.</span><span class="sxs-lookup"><span data-stu-id="27fcb-430">Install the .NET Framework version missing from the system.</span></span>

* <span data-ttu-id="27fcb-431">Per una distribuzione dipendente dal framework, verificare di avere il runtime corretto installato nel sistema.</span><span class="sxs-lookup"><span data-stu-id="27fcb-431">For a framework-dependent deployment, confirm that you have the correct runtime installed on the system.</span></span> <span data-ttu-id="27fcb-432">Per esempio, se si aggiorna un progetto da 1.0 a 1.1, distribuire il sistema di hosting e ricevere questa eccezione, assicurarsi di installare il framework 1.1 nel sistema di hosting.</span><span class="sxs-lookup"><span data-stu-id="27fcb-432">For example if you upgrade a project from 1.0 to 1.1, deploy to the hosting system, and receive this exception, ensure you install the 1.1 framework on the hosting system.</span></span>

### <a name="stopped-application-pool"></a><span data-ttu-id="27fcb-433">Pool di applicazioni arrestato</span><span class="sxs-lookup"><span data-stu-id="27fcb-433">Stopped Application Pool</span></span>

* <span data-ttu-id="27fcb-434">**Browser:** 503 Servizio non disponibile</span><span class="sxs-lookup"><span data-stu-id="27fcb-434">**Browser:** 503 Service Unavailable</span></span>

* <span data-ttu-id="27fcb-435">**Registro dell'applicazione:** Nessuna voce</span><span class="sxs-lookup"><span data-stu-id="27fcb-435">**Application Log:** No entry</span></span>

* <span data-ttu-id="27fcb-436">**Registro del modulo di ASP.NET Core:** il file di registro non è stato creato</span><span class="sxs-lookup"><span data-stu-id="27fcb-436">**ASP.NET Core Module Log:** Log file not created</span></span>

<span data-ttu-id="27fcb-437">Risoluzione dei problemi</span><span class="sxs-lookup"><span data-stu-id="27fcb-437">Troubleshooting</span></span>

* <span data-ttu-id="27fcb-438">Confermare che il pool di applicazioni non si trovi nello stato *In arresto*.</span><span class="sxs-lookup"><span data-stu-id="27fcb-438">Confirm that the Application Pool is not in the *Stopped* state.</span></span>

### <a name="iis-integration-middleware-not-implemented"></a><span data-ttu-id="27fcb-439">Middleware di integrazione di IIS non implementato</span><span class="sxs-lookup"><span data-stu-id="27fcb-439">IIS Integration middleware not implemented</span></span>

* <span data-ttu-id="27fcb-440">**Browser:** errore HTTP 502.5 - errore del processo</span><span class="sxs-lookup"><span data-stu-id="27fcb-440">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="27fcb-441">**Registro dell'applicazione:** l'applicazione "MACHINE/WEBROOT/APPHOST/MY_APPLICATION" con radice fisica "C:\\{PATH}\' ha creato un processo con la riga di comando" "C:\\{PATH}\my_application.{exe|dll}" ma ha danneggiato o non ha risposto o non è stata in ascolto sulla porta specificata "{PORT}", ErrorCode = "0x800705b4"</span><span class="sxs-lookup"><span data-stu-id="27fcb-441">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' created process with commandline '"C:\\{PATH}\my_application.{exe|dll}" ' but either crashed or did not reponse or did not listen on the given port '{PORT}', ErrorCode = '0x800705b4'</span></span>

* <span data-ttu-id="27fcb-442">**Registro di modulo di ASP.NET Core:** Il file di registro ha creato e mostra il normale funzionamento.</span><span class="sxs-lookup"><span data-stu-id="27fcb-442">**ASP.NET Core Module Log:** Log file created and shows normal operation.</span></span>

<span data-ttu-id="27fcb-443">Risoluzione dei problemi</span><span class="sxs-lookup"><span data-stu-id="27fcb-443">Troubleshooting</span></span>

* <span data-ttu-id="27fcb-444">Confermare che l'applicazione venga eseguita in locale su Kestrel.</span><span class="sxs-lookup"><span data-stu-id="27fcb-444">Confirm that the application runs locally on Kestrel.</span></span> <span data-ttu-id="27fcb-445">Un errore del processo può essere il risultato di un problema all'interno dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-445">A process failure might be the result of a problem within the application.</span></span> <span data-ttu-id="27fcb-446">Per altre informazioni, vedere [Consigli per la risoluzione dei problemi](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="27fcb-446">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

* <span data-ttu-id="27fcb-447">Verificare che si sia fatto un corretto riferimento al middleware di integrazione IIS chiamando il metodo *.UseIISIntegration()* nell'applicazione *WebHostBuilder()*.</span><span class="sxs-lookup"><span data-stu-id="27fcb-447">Confirm that you have correctly referenced the IIS Integration middleware by calling the *.UseIISIntegration()* method on the application's *WebHostBuilder()*.</span></span>

### <a name="sub-application-includes-a-handlers-section"></a><span data-ttu-id="27fcb-448">La sotto-applicazione include una sezione \<gestori\></span><span class="sxs-lookup"><span data-stu-id="27fcb-448">Sub-application includes a \<handlers\> section</span></span>

* <span data-ttu-id="27fcb-449">**Browser:** errore HTTP 500.19 - errore del server interno</span><span class="sxs-lookup"><span data-stu-id="27fcb-449">**Browser:** HTTP Error 500.19 - Internal Server Error</span></span>

* <span data-ttu-id="27fcb-450">**Registro dell'applicazione:** Nessuna voce</span><span class="sxs-lookup"><span data-stu-id="27fcb-450">**Application Log:** No entry</span></span>

* <span data-ttu-id="27fcb-451">**Registro di modulo di ASP.NET Core:** Il file di registro ha creato e mostra il normale funzionamento per l'applicazione della radice.</span><span class="sxs-lookup"><span data-stu-id="27fcb-451">**ASP.NET Core Module Log:** Log file created and shows normal operation for the root application.</span></span> <span data-ttu-id="27fcb-452">Il file di registro non è stato creato per la sotto-applicazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-452">Log file not created for the sub-application.</span></span>

<span data-ttu-id="27fcb-453">Risoluzione dei problemi</span><span class="sxs-lookup"><span data-stu-id="27fcb-453">Troubleshooting</span></span>

* <span data-ttu-id="27fcb-454">Verificare che il file *web.config* della sotto-applicazione non includa una sezione `<handlers>`.</span><span class="sxs-lookup"><span data-stu-id="27fcb-454">Confirm that the sub-application's *web.config* file doesn't include a `<handlers>` section.</span></span>

### <a name="application-configuration-general-issue"></a><span data-ttu-id="27fcb-455">Problema generale della configurazione dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="27fcb-455">Application configuration general issue</span></span>

* <span data-ttu-id="27fcb-456">**Browser:** errore HTTP 502.5 - errore del processo</span><span class="sxs-lookup"><span data-stu-id="27fcb-456">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="27fcb-457">**Registro dell'applicazione:** l'applicazione "MACHINE/WEBROOT/APPHOST/MY_APPLICATION" con radice fisica "C:\\{PATH}\' ha creato un processo con la riga di comando" "C:\\{PATH}\my_application.{exe|dll}" ma ha danneggiato o non ha risposto o non è stata in ascolto sulla porta specificata "{PORT}", ErrorCode = "0x800705b4"</span><span class="sxs-lookup"><span data-stu-id="27fcb-457">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' created process with commandline '"C:\\{PATH}\my_application.{exe|dll}" ' but either crashed or did not reponse or did not listen on the given port '{PORT}', ErrorCode = '0x800705b4'</span></span>

* <span data-ttu-id="27fcb-458">**Registro del modulo di ASP.NET Core:** il file di registro è stato creato ma è vuoto</span><span class="sxs-lookup"><span data-stu-id="27fcb-458">**ASP.NET Core Module Log:** Log file created but empty</span></span>

<span data-ttu-id="27fcb-459">Risoluzione dei problemi</span><span class="sxs-lookup"><span data-stu-id="27fcb-459">Troubleshooting</span></span>

* <span data-ttu-id="27fcb-460">Questa eccezione generale indica che non è stato possibile avviare il processo, probabilmente a causa di un problema di configurazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="27fcb-460">This general exception indicates that the process failed to start, most likely due to an application configuration issue.</span></span> <span data-ttu-id="27fcb-461">Facendo riferimento alla [Struttura della Directory](xref:hosting/directory-structure), verificare che i file e le cartelle distribuiti dell'applicazione siano appropriati e che i file di configurazione dell'applicazione siano presenti e contengano le impostazioni corrette per l'app e l'ambiente.</span><span class="sxs-lookup"><span data-stu-id="27fcb-461">Referring to [Directory Structure](xref:hosting/directory-structure), confirm that your application's deployed files and folders are appropriate and that your application's configuration files are present and contain the correct settings for your app and environment.</span></span> <span data-ttu-id="27fcb-462">Per altre informazioni, vedere [Consigli per la risoluzione dei problemi](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="27fcb-462">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

## <a name="resources"></a><span data-ttu-id="27fcb-463">Risorse</span><span class="sxs-lookup"><span data-stu-id="27fcb-463">Resources</span></span>

* [<span data-ttu-id="27fcb-464">Introduzione al modulo di ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="27fcb-464">Introduction to ASP.NET Core Module</span></span>](xref:fundamentals/servers/aspnet-core-module)

* [<span data-ttu-id="27fcb-465">Guida di riferimento per la configurazione del modulo ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="27fcb-465">ASP.NET Core Module configuration reference</span></span>](xref:hosting/aspnet-core-module)

* [<span data-ttu-id="27fcb-466">Utilizzo dei moduli IIS con ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="27fcb-466">Using IIS Modules with ASP.NET Core</span></span>](xref:hosting/iis-modules)

* [<span data-ttu-id="27fcb-467">Introduzione a ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="27fcb-467">Introduction to ASP.NET Core</span></span>](../index.md)

* [<span data-ttu-id="27fcb-468">Il sito IIS ufficiale di Microsoft</span><span class="sxs-lookup"><span data-stu-id="27fcb-468">The Official Microsoft IIS Site</span></span>](https://www.iis.net/)

* [<span data-ttu-id="27fcb-469">Libreria di Microsoft TechNet: Windows Server</span><span class="sxs-lookup"><span data-stu-id="27fcb-469">Microsoft TechNet Library: Windows Server</span></span>](https://docs.microsoft.com/windows-server/windows-server-versions)
