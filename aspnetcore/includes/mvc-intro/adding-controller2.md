<span data-ttu-id="d77b9-101">Sostituire il contenuto di *Controllers/HelloWorldController.cs* con quanto segue:</span><span class="sxs-lookup"><span data-stu-id="d77b9-101">Replace the contents of *Controllers/HelloWorldController.cs* with the following:</span></span>

<span data-ttu-id="d77b9-102">[!code-csharp[Principale](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_1)]</span><span class="sxs-lookup"><span data-stu-id="d77b9-102">[!code-csharp[Main](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_1)]</span></span>

<span data-ttu-id="d77b9-103">È possibile chiamare ogni metodo `public` in un controller come endpoint HTTP.</span><span class="sxs-lookup"><span data-stu-id="d77b9-103">Every `public` method in a controller is callable as an HTTP endpoint.</span></span> <span data-ttu-id="d77b9-104">Nell'esempio precedente entrambi i metodi restituiscono una stringa.</span><span class="sxs-lookup"><span data-stu-id="d77b9-104">In the sample above, both methods return a string.</span></span>  <span data-ttu-id="d77b9-105">Notare i commenti che precedono ogni metodo.</span><span class="sxs-lookup"><span data-stu-id="d77b9-105">Note the comments preceding each method.</span></span>

<span data-ttu-id="d77b9-106">Un endpoint HTTP è un URL definibile come destinazione nell'applicazione Web, ad esempio `http://localhost:1234/HelloWorld`, e combina il protocollo usato (`HTTP`), il percorso di rete del server Web, tra cui la porta TCP (`localhost:1234`) e l'URI di destinazione (`HelloWorld`).</span><span class="sxs-lookup"><span data-stu-id="d77b9-106">An HTTP endpoint is a targetable URL in the web application, such as `http://localhost:1234/HelloWorld`, and combines the protocol used: `HTTP`, the network location of the web server (including the TCP port): `localhost:1234` and the target URI `HelloWorld`.</span></span>

<span data-ttu-id="d77b9-107">Il primo commento indica che si tratta di un metodo [HTTP GET](https://www.w3schools.com/tags/ref_httpmethods.asp) che viene richiamato aggiungendo "/HelloWorld/" all'URL di base.</span><span class="sxs-lookup"><span data-stu-id="d77b9-107">The first comment states this is an [HTTP GET](https://www.w3schools.com/tags/ref_httpmethods.asp) method that is invoked by appending "/HelloWorld/" to the base URL.</span></span> <span data-ttu-id="d77b9-108">Il secondo commento specifica un metodo [HTTP GET](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) che viene richiamato aggiungendo "/HelloWorld/Welcome/" all'URL.</span><span class="sxs-lookup"><span data-stu-id="d77b9-108">The second comment specifies an [HTTP GET](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) method that is invoked by appending "/HelloWorld/Welcome/" to the URL.</span></span> <span data-ttu-id="d77b9-109">In una fase successiva dell'esercitazione si userà il motore di scaffolding per generare i metodi `HTTP POST`.</span><span class="sxs-lookup"><span data-stu-id="d77b9-109">Later on in the tutorial you'll use the scaffolding engine to generate `HTTP POST` methods.</span></span>

<span data-ttu-id="d77b9-110">Eseguire l'app in modalità non di debug e aggiungere "HelloWorld" al percorso nella barra degli indirizzi.</span><span class="sxs-lookup"><span data-stu-id="d77b9-110">Run the app in non-debug mode and append "HelloWorld" to the path in the address bar.</span></span> <span data-ttu-id="d77b9-111">Il metodo `Index` restituisce una stringa.</span><span class="sxs-lookup"><span data-stu-id="d77b9-111">The `Index` method returns a string.</span></span>

![Finestra del browser con una risposta dell'applicazione, This is my default action](../../tutorials/first-mvc-app/adding-controller/_static/hell1.png)

<span data-ttu-id="d77b9-113">MVC richiama le classi controller, e i metodi di azione in esse contenute, in base all'URL in ingresso.</span><span class="sxs-lookup"><span data-stu-id="d77b9-113">MVC invokes controller classes (and the action methods within them) depending on the incoming URL.</span></span> <span data-ttu-id="d77b9-114">Il valore predefinito della [logica di routing degli URL](../../mvc/controllers/routing.md) usata da MVC usa un formato simile al seguente per determinare il codice di richiamare:</span><span class="sxs-lookup"><span data-stu-id="d77b9-114">The default [URL routing logic](../../mvc/controllers/routing.md) used by MVC uses a format like this to determine what code to invoke:</span></span>

`/[Controller]/[ActionName]/[Parameters]`

<span data-ttu-id="d77b9-115">Il formato per il routing viene impostato nel file *Startup.cs*.</span><span class="sxs-lookup"><span data-stu-id="d77b9-115">You set the format for routing in the *Startup.cs* file.</span></span>

<span data-ttu-id="d77b9-116">[!code-csharp[Principale](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Startup.cs?name=snippet_1&highlight=5)]</span><span class="sxs-lookup"><span data-stu-id="d77b9-116">[!code-csharp[Main](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Startup.cs?name=snippet_1&highlight=5)]</span></span>

<span data-ttu-id="d77b9-117">Quando si esegue l'app e non si forniscono i segmenti di URL, i valori predefiniti sono il controller "Home" e il metodo "Index" specificati nella riga del modello evidenziata sopra.</span><span class="sxs-lookup"><span data-stu-id="d77b9-117">When you run the app and don't supply any URL segments, it defaults to the "Home" controller and the "Index" method specified in the template line highlighted above.</span></span>

<span data-ttu-id="d77b9-118">Il primo segmento di URL determina la classe di controller da eseguire.</span><span class="sxs-lookup"><span data-stu-id="d77b9-118">The first URL segment determines the controller class to run.</span></span> <span data-ttu-id="d77b9-119">`localhost:xxxx/HelloWorld` esegue quindi il mapping alla classe `HelloWorldController`.</span><span class="sxs-lookup"><span data-stu-id="d77b9-119">So `localhost:xxxx/HelloWorld` maps to the `HelloWorldController` class.</span></span> <span data-ttu-id="d77b9-120">La seconda parte del segmento URL determina il metodo di azione per la classe.</span><span class="sxs-lookup"><span data-stu-id="d77b9-120">The second part of the URL segment determines the action method on the class.</span></span> <span data-ttu-id="d77b9-121">Pertanto `localhost:xxxx/HelloWorld/Index` causa l'esecuzione del metodo `Index` della classe `HelloWorldController`.</span><span class="sxs-lookup"><span data-stu-id="d77b9-121">So `localhost:xxxx/HelloWorld/Index` would cause the `Index` method of the `HelloWorldController` class to run.</span></span> <span data-ttu-id="d77b9-122">Si noti che è necessario solo passare a `localhost:xxxx/HelloWorld` e il metodo `Index` viene chiamato per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="d77b9-122">Notice that you only had to browse to `localhost:xxxx/HelloWorld` and the `Index` method was called by default.</span></span> <span data-ttu-id="d77b9-123">In questo modo `Index` è il metodo predefinito che verrà chiamato per un controller, se non viene specificato un nome di metodo in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="d77b9-123">This is because `Index` is the default method that will be called on a controller if a method name is not explicitly specified.</span></span> <span data-ttu-id="d77b9-124">La terza parte del segmento di URL ( `id`) è relativa ai dati di route.</span><span class="sxs-lookup"><span data-stu-id="d77b9-124">The third part of the URL segment ( `id`) is for route data.</span></span> <span data-ttu-id="d77b9-125">I dati di route verranno esaminati in una fase successiva di questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="d77b9-125">You'll see route data later on in this tutorial.</span></span>

<span data-ttu-id="d77b9-126">Passare a `http://localhost:xxxx/HelloWorld/Welcome`.</span><span class="sxs-lookup"><span data-stu-id="d77b9-126">Browse to `http://localhost:xxxx/HelloWorld/Welcome`.</span></span> <span data-ttu-id="d77b9-127">Il metodo `Welcome` viene eseguito e restituisce la stringa "This is the Welcome action method...".</span><span class="sxs-lookup"><span data-stu-id="d77b9-127">The `Welcome` method runs and returns the string "This is the Welcome action method...".</span></span> <span data-ttu-id="d77b9-128">Per questo URL, il controller è `HelloWorld` e il metodo di azione è `Welcome`.</span><span class="sxs-lookup"><span data-stu-id="d77b9-128">For this URL, the controller is `HelloWorld` and `Welcome` is the action method.</span></span> <span data-ttu-id="d77b9-129">Non è stata ancora usata la parte `[Parameters]` dell'URL.</span><span class="sxs-lookup"><span data-stu-id="d77b9-129">You haven't used the `[Parameters]` part of the URL yet.</span></span>

![Finestra del browser con una risposta dell'applicazione, This is the Welcome action method](../../tutorials/first-mvc-app/adding-controller/_static/welcome.png)

<span data-ttu-id="d77b9-131">Modificare il codice in modo da passare le informazioni dei parametri dall'URL al controller.</span><span class="sxs-lookup"><span data-stu-id="d77b9-131">Modify the code to pass some parameter information from the URL to the controller.</span></span> <span data-ttu-id="d77b9-132">Ad esempio `/HelloWorld/Welcome?name=Rick&numtimes=4`.</span><span class="sxs-lookup"><span data-stu-id="d77b9-132">For example, `/HelloWorld/Welcome?name=Rick&numtimes=4`.</span></span> <span data-ttu-id="d77b9-133">Modificare il metodo `Welcome` in modo da includere due parametri, come illustrato nel codice seguente.</span><span class="sxs-lookup"><span data-stu-id="d77b9-133">Change the `Welcome` method to include two parameters as shown in the following code.</span></span> 

<span data-ttu-id="d77b9-134">[!code-csharp[Principale](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_2)]</span><span class="sxs-lookup"><span data-stu-id="d77b9-134">[!code-csharp[Main](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_2)]</span></span>

<span data-ttu-id="d77b9-135">Il codice precedente:</span><span class="sxs-lookup"><span data-stu-id="d77b9-135">The preceding code:</span></span>

* <span data-ttu-id="d77b9-136">Usa la funzionalità di parametro facoltativo in C# per indicare che il parametro `numTimes` viene impostato come predefinito su 1, se non viene passato alcun valore.</span><span class="sxs-lookup"><span data-stu-id="d77b9-136">Uses the C# optional-parameter feature to indicate that the `numTimes` parameter defaults to 1 if no value is passed for that parameter.</span></span>
* <span data-ttu-id="d77b9-137">Usa `HtmlEncoder.Default.Encode` per proteggere le app da input dannoso, in particolare in JavaScript.</span><span class="sxs-lookup"><span data-stu-id="d77b9-137">Uses`HtmlEncoder.Default.Encode` to protect the app from malicious input (namely JavaScript).</span></span> 
* <span data-ttu-id="d77b9-138">Usa [stringhe interpolate](https://docs.microsoft.com/dotnet/articles/csharp/language-reference/keywords/interpolated-strings).</span><span class="sxs-lookup"><span data-stu-id="d77b9-138">Uses [Interpolated Strings](https://docs.microsoft.com/dotnet/articles/csharp/language-reference/keywords/interpolated-strings).</span></span>

<span data-ttu-id="d77b9-139">Eseguire l'app e passare a:</span><span class="sxs-lookup"><span data-stu-id="d77b9-139">Run your app and browse to:</span></span>

   `http://localhost:xxxx/HelloWorld/Welcome?name=Rick&numtimes=4`

<span data-ttu-id="d77b9-140">Sostituire xxxx con il numero di porta. È possibile provare diversi valori per `name` e `numtimes` nell'URL.</span><span class="sxs-lookup"><span data-stu-id="d77b9-140">(Replace xxxx with your port number.) You can try different values for `name` and `numtimes` in  the URL.</span></span> <span data-ttu-id="d77b9-141">Il sistema di [associazione di modelli](../../mvc/models/model-binding.md) MVC esegue il mapping dei parametri denominati dalla stringa di query nella barra degli indirizzi ai parametri nel metodo.</span><span class="sxs-lookup"><span data-stu-id="d77b9-141">The MVC [model binding](../../mvc/models/model-binding.md) system automatically maps the named parameters from  the query string in the address bar to parameters in your method.</span></span> <span data-ttu-id="d77b9-142">Per altre informazioni, vedere [Associazione di modelli](../../mvc/models/model-binding.md).</span><span class="sxs-lookup"><span data-stu-id="d77b9-142">See [Model Binding](../../mvc/models/model-binding.md) for more information.</span></span>

![Finestra del browser con una risposta dell'applicazione, Hello Rick, NumTimes is: 4](../../tutorials/first-mvc-app/adding-controller/_static/rick4.png)

<span data-ttu-id="d77b9-144">Nell'immagine precedente non viene usato il segmento di URL (`Parameters`), i parametri `name` e `numTimes` vengono passati come [stringhe di query](https://wikipedia.org/wiki/Query_string).</span><span class="sxs-lookup"><span data-stu-id="d77b9-144">In the image above, the URL segment (`Parameters`) is not used, the `name` and `numTimes` parameters are passed as [query strings](https://wikipedia.org/wiki/Query_string).</span></span> <span data-ttu-id="d77b9-145">Il punto interrogativo `?` nell'URL precedente è un separatore e seguono le stringhe di query.</span><span class="sxs-lookup"><span data-stu-id="d77b9-145">The `?` (question mark) in the above URL is a separator, and the query strings follow.</span></span> <span data-ttu-id="d77b9-146">Il carattere `&` separa le stringhe di query.</span><span class="sxs-lookup"><span data-stu-id="d77b9-146">The `&` character separates query strings.</span></span>

<span data-ttu-id="d77b9-147">Sostituire il metodo `Welcome` con il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="d77b9-147">Replace the `Welcome` method with the following code:</span></span>

<span data-ttu-id="d77b9-148">[!code-csharp[Principale](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_3)]</span><span class="sxs-lookup"><span data-stu-id="d77b9-148">[!code-csharp[Main](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_3)]</span></span>

<span data-ttu-id="d77b9-149">Eseguire l'app e immettere l'URL seguente: `http://localhost:xxx/HelloWorld/Welcome/3?name=Rick`</span><span class="sxs-lookup"><span data-stu-id="d77b9-149">Run the app and enter the following URL:  `http://localhost:xxx/HelloWorld/Welcome/3?name=Rick`</span></span>

![Finestra del browser con una risposta dell'applicazione, Hello Rick, ID: 3](../../tutorials/first-mvc-app/adding-controller/_static/rick_routedata.png)

<span data-ttu-id="d77b9-151">Questa volta il terzo segmento di URL corrisponde al parametro di route `id`.</span><span class="sxs-lookup"><span data-stu-id="d77b9-151">This time the third URL segment  matched the route parameter `id`.</span></span> <span data-ttu-id="d77b9-152">Il metodo `Welcome` contiene un parametro `id` che corrisponde al modello di URL nel metodo `MapRoute`.</span><span class="sxs-lookup"><span data-stu-id="d77b9-152">The `Welcome`  method contains a parameter  `id` that matched the URL template in the `MapRoute` method.</span></span> <span data-ttu-id="d77b9-153">Il carattere finale `?` (in `id?`) indica che il parametro `id` è facoltativo.</span><span class="sxs-lookup"><span data-stu-id="d77b9-153">The trailing `?`  (in `id?`) indicates the `id` parameter is optional.</span></span>

<span data-ttu-id="d77b9-154">[!code-csharp[Principale](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Startup.cs?name=snippet_1&highlight=5)]</span><span class="sxs-lookup"><span data-stu-id="d77b9-154">[!code-csharp[Main](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Startup.cs?name=snippet_1&highlight=5)]</span></span>

<span data-ttu-id="d77b9-155">In questi esempi il controller rappresenta la parte "VC" di MVC, ovvero il ruolo di vista e controller.</span><span class="sxs-lookup"><span data-stu-id="d77b9-155">In these examples the controller has been doing the "VC" portion  of MVC - that is, the view and controller work.</span></span> <span data-ttu-id="d77b9-156">Il controller restituisce direttamente l'HTML.</span><span class="sxs-lookup"><span data-stu-id="d77b9-156">The controller is returning HTML  directly.</span></span> <span data-ttu-id="d77b9-157">In genere è preferibile che i controller non restituiscano direttamente l'HTML, dal momento che la codifica e la gestione sono molto complesse.</span><span class="sxs-lookup"><span data-stu-id="d77b9-157">Generally you don't want controllers returning HTML directly, since  that becomes very cumbersome to code and maintain.</span></span> <span data-ttu-id="d77b9-158">In genere usare invece un file del modello di vista Razor separato per generare la risposta HTML.</span><span class="sxs-lookup"><span data-stu-id="d77b9-158">Instead you typically use a separate Razor view template file to help generate the HTML response.</span></span> <span data-ttu-id="d77b9-159">Questa operazione viene eseguita nell'esercitazione successiva.</span><span class="sxs-lookup"><span data-stu-id="d77b9-159">You do that in the next tutorial.</span></span>
