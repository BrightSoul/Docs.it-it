---
title: Avvio dell'applicazione in ASP.NET Core
author: ardalis
description: Illustra la classe di avvio in ASP.NET Core.
keywords: ASP.NET Core, avvio, il metodo di configurazione, ConfigureServices (metodo)
ms.author: tdykstra
manager: wpickett
ms.date: 02/29/2017
ms.topic: article
ms.technology: aspnet
ms.prod: asp.net-core
uid: fundamentals/startup
ms.openlocfilehash: 16969386c55ae2fd2ab574c1799a765e74f59278
ms.sourcegitcommit: 4147d2d29ea50e7e9b87879c572ac2a9fb51798c
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/15/2017
---
# <a name="application-startup-in-aspnet-core"></a><span data-ttu-id="675ed-104">Avvio dell'applicazione in ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="675ed-104">Application Startup in ASP.NET Core</span></span>

<span data-ttu-id="675ed-105">Da [Steve Smith](http://ardalis.com) e [Tom Dykstra](https://github.com/tdykstra/)</span><span class="sxs-lookup"><span data-stu-id="675ed-105">By [Steve Smith](http://ardalis.com) and [Tom Dykstra](https://github.com/tdykstra/)</span></span>

<span data-ttu-id="675ed-106">La `Startup` classe consente di configurare servizi e delle pipeline delle richieste dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="675ed-106">The `Startup` class configures services and the application's request pipeline.</span></span> 

## <a name="the-startup-class"></a><span data-ttu-id="675ed-107">La classe di avvio</span><span class="sxs-lookup"><span data-stu-id="675ed-107">The Startup class</span></span>

<span data-ttu-id="675ed-108">Le applicazioni ASP.NET Core richiedono un `Startup` classe.</span><span class="sxs-lookup"><span data-stu-id="675ed-108">ASP.NET Core apps require a `Startup` class.</span></span> <span data-ttu-id="675ed-109">Per convenzione, il `Startup` classe è denominata "Avvio".</span><span class="sxs-lookup"><span data-stu-id="675ed-109">By convention, the `Startup` class is named "Startup".</span></span> <span data-ttu-id="675ed-110">Specificare il nome di classe di avvio nel `Main` programma [WebHostBuilderExtensions](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.webhostbuilderextensions) [ `UseStartup<TStartup>` ](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.webhostbuilderextensions#Microsoft_AspNetCore_Hosting_WebHostBuilderExtensions_UseStartup__1_Microsoft_AspNetCore_Hosting_IWebHostBuilder_) metodo.</span><span class="sxs-lookup"><span data-stu-id="675ed-110">You specify the startup class name in the `Main` program's [WebHostBuilderExtensions](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.webhostbuilderextensions) [`UseStartup<TStartup>`](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.webhostbuilderextensions#Microsoft_AspNetCore_Hosting_WebHostBuilderExtensions_UseStartup__1_Microsoft_AspNetCore_Hosting_IWebHostBuilder_) method.</span></span> <span data-ttu-id="675ed-111">Vedere [Hosting](xref:fundamentals/hosting) per altre informazioni, vedere `WebHostBuilder`, che viene eseguito prima `Startup`.</span><span class="sxs-lookup"><span data-stu-id="675ed-111">See [Hosting](xref:fundamentals/hosting) to learn more about `WebHostBuilder`, which runs before `Startup`.</span></span>

<span data-ttu-id="675ed-112">È possibile definire separato `Startup` classi per diversi ambienti e verrà selezionato uno in fase di esecuzione appropriato.</span><span class="sxs-lookup"><span data-stu-id="675ed-112">You can define separate `Startup` classes for different environments, and the appropriate one will be selected at runtime.</span></span> <span data-ttu-id="675ed-113">Se si specifica `startupAssembly` nel [configurazione WebHost](https://docs.microsoft.com/en-us/aspnet/core/fundamentals/hosting?tabs=aspnetcore2x#configuring-a-host) o opzioni di hosting verranno caricare l'assembly di avvio, cercare un `Startup` o `Startup[Environment]` tipo.</span><span class="sxs-lookup"><span data-stu-id="675ed-113">If you specify `startupAssembly` in the [WebHost configuration](https://docs.microsoft.com/en-us/aspnet/core/fundamentals/hosting?tabs=aspnetcore2x#configuring-a-host) or options, hosting will load that startup assembly and search for a `Startup` or `Startup[Environment]` type.</span></span> <span data-ttu-id="675ed-114">La classe il cui corrispondenze suffisso di nome sarà valutato l'ambiente corrente, pertanto se si esegue l'app nel *sviluppo* ambiente e include sia un `Startup` e un `StartupDevelopment` (classe), la `StartupDevelopment` classe sarà utilizzato.</span><span class="sxs-lookup"><span data-stu-id="675ed-114">The class whose name suffix matches the current environment will be prioritized, so if the app is run in the *Development* environment, and includes both a `Startup` and a `StartupDevelopment` class, the `StartupDevelopment` class will be used.</span></span> <span data-ttu-id="675ed-115">Vedere [FindStartupType](https://github.com/aspnet/Hosting/blob/rel/1.1.0/src/Microsoft.AspNetCore.Hosting/Internal/StartupLoader.cs) in `StartupLoader` e [utilizzo di più ambienti](environments.md#startup-conventions).</span><span class="sxs-lookup"><span data-stu-id="675ed-115">See [FindStartupType](https://github.com/aspnet/Hosting/blob/rel/1.1.0/src/Microsoft.AspNetCore.Hosting/Internal/StartupLoader.cs) in `StartupLoader` and [Working with multiple environments](environments.md#startup-conventions).</span></span>

<span data-ttu-id="675ed-116">In alternativa, è possibile definire fisse `Startup` classe che verrà utilizzato indipendentemente dall'ambiente chiamando `UseStartup<TStartup>`.</span><span class="sxs-lookup"><span data-stu-id="675ed-116">Alternatively, you can define a fixed `Startup` class that will be used regardless of the environment by calling `UseStartup<TStartup>`.</span></span> <span data-ttu-id="675ed-117">Si tratta dell'approccio consigliato.</span><span class="sxs-lookup"><span data-stu-id="675ed-117">This is the recommended approach.</span></span>

<span data-ttu-id="675ed-118">Il `Startup` costruttore della classe può accettare le dipendenze che vengono fornite tramite [inserimento di dipendenze](xref:fundamentals/dependency-injection).</span><span class="sxs-lookup"><span data-stu-id="675ed-118">The `Startup` class constructor can accept dependencies that are provided through [dependency injection](xref:fundamentals/dependency-injection).</span></span> <span data-ttu-id="675ed-119">Un approccio comune consiste nell'utilizzare `IHostingEnvironment` impostare [configurazione](xref:fundamentals/configuration) origini.</span><span class="sxs-lookup"><span data-stu-id="675ed-119">A common approach is to use `IHostingEnvironment` to set up [configuration](xref:fundamentals/configuration) sources.</span></span>

<span data-ttu-id="675ed-120">Il `Startup` classe deve includere un `Configure` metodo e può includere facoltativamente un `ConfigureServices` (metodo), che vengono chiamati quando l'avvio dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="675ed-120">The `Startup` class must include a `Configure` method and can optionally include a `ConfigureServices` method, both of which are called when the application starts.</span></span> <span data-ttu-id="675ed-121">La classe può anche includere [versioni specifiche dell'ambiente di questi metodi](xref:fundamentals/environments#startup-conventions).</span><span class="sxs-lookup"><span data-stu-id="675ed-121">The class can also include [environment-specific versions of these methods](xref:fundamentals/environments#startup-conventions).</span></span> <span data-ttu-id="675ed-122">`ConfigureServices`, se presente, viene chiamato prima `Configure`.</span><span class="sxs-lookup"><span data-stu-id="675ed-122">`ConfigureServices`, if present, is called before `Configure`.</span></span>

<span data-ttu-id="675ed-123">Informazioni su [la gestione delle eccezioni durante l'avvio dell'applicazione](xref:fundamentals/error-handling#startup-exception-handling).</span><span class="sxs-lookup"><span data-stu-id="675ed-123">Learn about [handling exceptions during application startup](xref:fundamentals/error-handling#startup-exception-handling).</span></span>

## <a name="the-configureservices-method"></a><span data-ttu-id="675ed-124">Il metodo ConfigureServices</span><span class="sxs-lookup"><span data-stu-id="675ed-124">The ConfigureServices method</span></span>

<span data-ttu-id="675ed-125">Il [ConfigureServices](https://docs.microsoft.com/en-us/aspnet/core/api/microsoft.aspnetcore.hosting.startupbase#Microsoft_AspNetCore_Hosting_StartupBase_ConfigureServices_Microsoft_Extensions_DependencyInjection_IServiceCollection_) è facoltativo; ma se utilizzato, viene chiamato prima di `Configure` metodo dall'host web.</span><span class="sxs-lookup"><span data-stu-id="675ed-125">The [ConfigureServices](https://docs.microsoft.com/en-us/aspnet/core/api/microsoft.aspnetcore.hosting.startupbase#Microsoft_AspNetCore_Hosting_StartupBase_ConfigureServices_Microsoft_Extensions_DependencyInjection_IServiceCollection_) method is optional; but if used, it's called before the `Configure` method by the web host.</span></span> <span data-ttu-id="675ed-126">L'host web può configurare alcuni servizi prima ``Startup`` metodi vengono chiamati (vedere [hosting](xref:fundamentals/hosting)).</span><span class="sxs-lookup"><span data-stu-id="675ed-126">The web host may configure some services before ``Startup`` methods are called (see [hosting](xref:fundamentals/hosting)).</span></span> <span data-ttu-id="675ed-127">Per convenzione, [opzioni di configurazione](xref:fundamentals/configuration) sono impostate in questo metodo.</span><span class="sxs-lookup"><span data-stu-id="675ed-127">By convention, [Configuration options](xref:fundamentals/configuration) are set in this method.</span></span>

<span data-ttu-id="675ed-128">Per le funzionalità che richiedono l'installazione sostanziale esistono `Add[Service]` metodi di estensione in [IServiceCollection](https://docs.microsoft.com/en-us/aspnet/core/api/microsoft.extensions.dependencyinjection.iservicecollection).</span><span class="sxs-lookup"><span data-stu-id="675ed-128">For features that require substantial setup there are `Add[Service]` extension methods on [IServiceCollection](https://docs.microsoft.com/en-us/aspnet/core/api/microsoft.extensions.dependencyinjection.iservicecollection).</span></span> <span data-ttu-id="675ed-129">In questo esempio il modello di sito web predefinito configurato l'applicazione per utilizzare i servizi per Entity Framework, l'identità e MVC:</span><span class="sxs-lookup"><span data-stu-id="675ed-129">This example from the default web site template configures the app to use services for Entity Framework, Identity, and MVC:</span></span>

<span data-ttu-id="675ed-130">[!code-csharp[Principale](../common/samples/WebApplication1/Startup.cs?highlight=4,7,11&start=40&end=55)]</span><span class="sxs-lookup"><span data-stu-id="675ed-130">[!code-csharp[Main](../common/samples/WebApplication1/Startup.cs?highlight=4,7,11&start=40&end=55)]</span></span>

<span data-ttu-id="675ed-131">Aggiunta di servizi per il contenitore dei servizi sono disponibili all'interno dell'applicazione tramite [inserimento di dipendenze](xref:fundamentals/dependency-injection).</span><span class="sxs-lookup"><span data-stu-id="675ed-131">Adding services to the services container makes them available within your application via [dependency injection](xref:fundamentals/dependency-injection).</span></span>

## <a name="services-available-in-startup"></a><span data-ttu-id="675ed-132">Servizi disponibili nella finestra di avvio</span><span class="sxs-lookup"><span data-stu-id="675ed-132">Services Available in Startup</span></span>

<span data-ttu-id="675ed-133">Inserimento di dipendenze di ASP.NET Core fornisce servizi durante l'avvio di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="675ed-133">ASP.NET Core dependency injection provides services during an application's startup.</span></span> <span data-ttu-id="675ed-134">È possibile richiedere questi servizi, includendo l'interfaccia appropriata come parametro nel `Startup` costruttore della classe o il relativo `Configure` metodo.</span><span class="sxs-lookup"><span data-stu-id="675ed-134">You can request these services by including the appropriate interface as a parameter on your `Startup` class's constructor or its `Configure` method.</span></span> <span data-ttu-id="675ed-135">Il `ConfigureServices` metodo accetta solo un `IServiceCollection` parametro (ma può essere qualsiasi servizio registrato recuperare dalla raccolta, pertanto i parametri aggiuntivi non sono necessari).</span><span class="sxs-lookup"><span data-stu-id="675ed-135">The `ConfigureServices` method only takes an `IServiceCollection` parameter (but any registered service can be retrieved from this collection, so additional parameters are not necessary).</span></span>

<span data-ttu-id="675ed-136">Di seguito sono riportati alcuni dei servizi in genere richiesti da `Startup` metodi:</span><span class="sxs-lookup"><span data-stu-id="675ed-136">Below are some of the services typically requested by `Startup` methods:</span></span>

* <span data-ttu-id="675ed-137">Nel costruttore: `IHostingEnvironment`,`ILogger<Startup>`</span><span class="sxs-lookup"><span data-stu-id="675ed-137">In the constructor:  `IHostingEnvironment`, `ILogger<Startup>`</span></span>
* <span data-ttu-id="675ed-138">In `ConfigureServices`:`IServiceCollection`</span><span class="sxs-lookup"><span data-stu-id="675ed-138">In `ConfigureServices`:  `IServiceCollection`</span></span>
* <span data-ttu-id="675ed-139">In `Configure`: `IApplicationBuilder`, `IHostingEnvironment`,`ILoggerFactory`</span><span class="sxs-lookup"><span data-stu-id="675ed-139">In `Configure`:  `IApplicationBuilder`, `IHostingEnvironment`, `ILoggerFactory`</span></span>

<span data-ttu-id="675ed-140">Tutti i servizi aggiunti dal ``WebHostBuilder`` ``ConfigureServices`` metodo può essere richiesto dal ``Startup`` costruttore della classe o il relativo ``Configure`` metodo.</span><span class="sxs-lookup"><span data-stu-id="675ed-140">Any services added by the ``WebHostBuilder`` ``ConfigureServices`` method may be requested by the ``Startup`` class constructor or its ``Configure`` method.</span></span> <span data-ttu-id="675ed-141">Utilizzare `WebHostBuilder` per fornire qualsiasi servizio, è necessario durante `Startup` metodi.</span><span class="sxs-lookup"><span data-stu-id="675ed-141">Use `WebHostBuilder` to provide any services you need during `Startup` methods.</span></span>

## <a name="the-configure-method"></a><span data-ttu-id="675ed-142">Metodo Configure</span><span class="sxs-lookup"><span data-stu-id="675ed-142">The Configure method</span></span>

<span data-ttu-id="675ed-143">Il `Configure` consente di specificare la modalità con cui l'applicazione ASP.NET di risposta alle richieste HTTP.</span><span class="sxs-lookup"><span data-stu-id="675ed-143">The `Configure` method is used to specify how the ASP.NET application will respond to HTTP requests.</span></span> <span data-ttu-id="675ed-144">La pipeline delle richieste è configurata tramite l'aggiunta di [middleware](middleware.md) componenti da un `IApplicationBuilder` istanza fornito dall'inserimento di dipendenze.</span><span class="sxs-lookup"><span data-stu-id="675ed-144">The request pipeline is configured by adding [middleware](middleware.md) components to an `IApplicationBuilder` instance that is provided by dependency injection.</span></span>

<span data-ttu-id="675ed-145">Nell'esempio seguente il modello di sito web predefinito, i diversi metodi di estensione vengono utilizzati per configurare la pipeline con il supporto per [BrowserLink](http://vswebessentials.com/features/browserlink), pagine di errore, file statici, ASP.NET MVC e identità.</span><span class="sxs-lookup"><span data-stu-id="675ed-145">In the following example from the default web site template, several extension methods are used to configure the pipeline with support for [BrowserLink](http://vswebessentials.com/features/browserlink), error pages, static files, ASP.NET MVC, and Identity.</span></span>

<span data-ttu-id="675ed-146">[!code-csharp[Principale](../common/samples/WebApplication1/Startup.cs?highlight=8,9,10,14,17,19,21&start=58&end=84)]</span><span class="sxs-lookup"><span data-stu-id="675ed-146">[!code-csharp[Main](../common/samples/WebApplication1/Startup.cs?highlight=8,9,10,14,17,19,21&start=58&end=84)]</span></span>

<span data-ttu-id="675ed-147">Ogni `Use` metodo di estensione aggiunge un [middleware](xref:fundamentals/middleware) componente alla pipeline delle richieste.</span><span class="sxs-lookup"><span data-stu-id="675ed-147">Each `Use` extension method adds a [middleware](xref:fundamentals/middleware) component to the request pipeline.</span></span> <span data-ttu-id="675ed-148">Ad esempio, il `UseMvc` metodo di estensione aggiunge la [routing](routing.md) middleware alla pipeline delle richieste e configura [MVC](xref:mvc/overview) come gestore predefinito.</span><span class="sxs-lookup"><span data-stu-id="675ed-148">For instance, the `UseMvc` extension method adds the [routing](routing.md) middleware to the request pipeline and configures [MVC](xref:mvc/overview) as the default handler.</span></span>

<span data-ttu-id="675ed-149">Per ulteriori informazioni su come usare `IApplicationBuilder`, vedere [Middleware](xref:fundamentals/middleware).</span><span class="sxs-lookup"><span data-stu-id="675ed-149">For more information about how to use `IApplicationBuilder`, see [Middleware](xref:fundamentals/middleware).</span></span>

<span data-ttu-id="675ed-150">Servizi aggiuntivi, ad esempio `IHostingEnvironment` e `ILoggerFactory` può anche essere specificato nella firma del metodo, nel qual caso questi servizi sono [inserito](dependency-injection.md) se sono disponibili.</span><span class="sxs-lookup"><span data-stu-id="675ed-150">Additional services, like `IHostingEnvironment` and `ILoggerFactory` may also be specified in the method signature, in which case these services will be [injected](dependency-injection.md) if they are available.</span></span> 

## <a name="additional-resources"></a><span data-ttu-id="675ed-151">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="675ed-151">Additional Resources</span></span>

* [<span data-ttu-id="675ed-152">Utilizzo di più ambienti</span><span class="sxs-lookup"><span data-stu-id="675ed-152">Working with Multiple Environments</span></span>](xref:fundamentals/environments)
* [<span data-ttu-id="675ed-153">Middleware</span><span class="sxs-lookup"><span data-stu-id="675ed-153">Middleware</span></span>](xref:fundamentals/middleware)
* [<span data-ttu-id="675ed-154">Registrazione</span><span class="sxs-lookup"><span data-stu-id="675ed-154">Logging</span></span>](xref:fundamentals/logging)
* [<span data-ttu-id="675ed-155">Configurazione</span><span class="sxs-lookup"><span data-stu-id="675ed-155">Configuration</span></span>](xref:fundamentals/configuration)
