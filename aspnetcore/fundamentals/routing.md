---
title: Routing di ASP.NET Core
author: ardalis
description: "Individuare la funzionalità di routing di ASP.NET Core è responsabile per il mapping di una richiesta in ingresso a un gestore di route."
keywords: ASP.NET Core,
ms.author: riande
manager: wpickett
ms.date: 10/14/2016
ms.topic: article
ms.assetid: bbbcf9e4-3c4c-4f50-b91e-175fe9cae4e2
ms.technology: aspnet
ms.prod: asp.net-core
uid: fundamentals/routing
ms.openlocfilehash: 9d24c2956c24a7995b3eeffc19e8c0a827349493
ms.sourcegitcommit: ed401027aac45c5938c917c7f518a33ceffe9f95
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/02/2017
---
# <a name="routing-in-aspnet-core"></a><span data-ttu-id="45a8a-104">Routing di ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="45a8a-104">Routing in ASP.NET Core</span></span>

<span data-ttu-id="45a8a-105">Da [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), e [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="45a8a-105">By [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="45a8a-106">Funzionalità di routing è responsabile per il mapping di una richiesta in ingresso a un gestore di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-106">Routing functionality is responsible for mapping an incoming request to a route handler.</span></span> <span data-ttu-id="45a8a-107">Le route sono definite nell'applicazione di ASP.NET e configurate quando viene avviata l'app.</span><span class="sxs-lookup"><span data-stu-id="45a8a-107">Routes are defined in the ASP.NET app and configured when the app starts up.</span></span> <span data-ttu-id="45a8a-108">Una route può facoltativamente estrarre valori dall'URL contenuta nella richiesta, e questi valori possono quindi essere utilizzati per l'elaborazione della richiesta.</span><span class="sxs-lookup"><span data-stu-id="45a8a-108">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="45a8a-109">Utilizza informazioni relative all'itinerario da app ASP.NET, la funzionalità di routing è in grado di generare gli URL che eseguono il mapping ai gestori di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-109">Using route information from the ASP.NET app, the routing functionality is also able to generate URLs that map to route handlers.</span></span> <span data-ttu-id="45a8a-110">Pertanto, routing, è possibile trovare un gestore di route in base a un URL o l'URL corrispondente a un gestore di route specificato in base alle informazioni del gestore di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-110">Therefore, routing can find a route handler based on a URL, or the URL corresponding to a given route handler based on route handler information.</span></span>

>[!IMPORTANT]
> <span data-ttu-id="45a8a-111">Questo documento descrive di basso livello ASP.NET Core routing.</span><span class="sxs-lookup"><span data-stu-id="45a8a-111">This document covers the low level ASP.NET Core routing.</span></span> <span data-ttu-id="45a8a-112">Per il routing di ASP.NET MVC di base, vedere [Routing alle azioni del Controller](../mvc/controllers/routing.md)</span><span class="sxs-lookup"><span data-stu-id="45a8a-112">For ASP.NET Core MVC routing, see [Routing to Controller Actions](../mvc/controllers/routing.md)</span></span>

<span data-ttu-id="45a8a-113">[Consente di visualizzare o scaricare codice di esempio](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/sample) ([come scaricare](xref:tutorials/index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="45a8a-113">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/sample) ([how to download](xref:tutorials/index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="45a8a-114">Nozioni fondamentali di routing</span><span class="sxs-lookup"><span data-stu-id="45a8a-114">Routing basics</span></span>

<span data-ttu-id="45a8a-115">Il routing utilizza *route* (implementazioni di [IRouter](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.routing.irouter)) per:</span><span class="sxs-lookup"><span data-stu-id="45a8a-115">Routing uses *routes* (implementations of [IRouter](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.routing.irouter)) to:</span></span>

* <span data-ttu-id="45a8a-116">eseguire il mapping di richieste in ingresso per *indirizzare gestori*</span><span class="sxs-lookup"><span data-stu-id="45a8a-116">map incoming requests to *route handlers*</span></span>

* <span data-ttu-id="45a8a-117">generare gli URL usati nelle risposte</span><span class="sxs-lookup"><span data-stu-id="45a8a-117">generate URLs used in responses</span></span>

<span data-ttu-id="45a8a-118">In genere, un'applicazione ha un unico insieme di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-118">Generally, an app has a single collection of routes.</span></span> <span data-ttu-id="45a8a-119">Quando arriva una richiesta, nell'ordine viene elaborato l'insieme di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-119">When a request arrives, the route collection is processed in order.</span></span> <span data-ttu-id="45a8a-120">Esegue la ricerca della richiesta in ingresso per una route corrispondente all'URL di richiesta chiamando il `RouteAsync` metodo su ogni route disponibile nell'insieme di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-120">The incoming request looks for a route that matches the request URL by calling the `RouteAsync` method on each available route in the route collection.</span></span> <span data-ttu-id="45a8a-121">Al contrario, una risposta può utilizzare il routing per generare URL (ad esempio, per il reindirizzamento o collegamenti) in base alle informazioni sulla route e pertanto evitare di dover URL a livello di codice, che consente di manutenibilità.</span><span class="sxs-lookup"><span data-stu-id="45a8a-121">By contrast, a response can use routing to generate URLs (for example, for redirection or links) based on route information, and thus avoid having to hard-code URLs, which helps maintainability.</span></span>

<span data-ttu-id="45a8a-122">Routing è connesso il [middleware](middleware.md) pipeline per la `RouterMiddleware` classe.</span><span class="sxs-lookup"><span data-stu-id="45a8a-122">Routing is connected to the [middleware](middleware.md) pipeline by the `RouterMiddleware` class.</span></span> <span data-ttu-id="45a8a-123">[ASP.NET MVC](../mvc/overview.md) aggiunge il routing a pipeline middleware come parte della relativa configurazione.</span><span class="sxs-lookup"><span data-stu-id="45a8a-123">[ASP.NET MVC](../mvc/overview.md) adds routing to the middleware pipeline as part of its configuration.</span></span> <span data-ttu-id="45a8a-124">Per ulteriori informazioni sull'utilizzo di routing come componente autonomo, vedere [utilizzando routing-middleware](#using-routing-middleware).</span><span class="sxs-lookup"><span data-stu-id="45a8a-124">To learn about using routing as a standalone component, see [using-routing-middleware](#using-routing-middleware).</span></span>

<a name=url-matching-ref></a>

### <a name="url-matching"></a><span data-ttu-id="45a8a-125">URL corrispondente</span><span class="sxs-lookup"><span data-stu-id="45a8a-125">URL matching</span></span>

<span data-ttu-id="45a8a-126">URL corrispondente è il processo per il routing invia un fax in ingresso richieste per un *gestore*.</span><span class="sxs-lookup"><span data-stu-id="45a8a-126">URL matching is the process by which routing dispatches an incoming request to a *handler*.</span></span> <span data-ttu-id="45a8a-127">Questo processo è in genere in base ai dati nel percorso URL, ma può essere estesa per prendere in considerazione tutti i dati nella richiesta.</span><span class="sxs-lookup"><span data-stu-id="45a8a-127">This process is generally based on data in the URL path, but can be extended to consider any data in the request.</span></span> <span data-ttu-id="45a8a-128">La possibilità di inviare le richieste ai diversi gestori è fondamentale per il ridimensionamento le dimensioni e la complessità di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="45a8a-128">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an application.</span></span>

<span data-ttu-id="45a8a-129">Immettere le richieste in ingresso di `RouterMiddleware`, che chiama il `RouteAsync` metodo su ogni route nella sequenza.</span><span class="sxs-lookup"><span data-stu-id="45a8a-129">Incoming requests enter the `RouterMiddleware`, which calls the `RouteAsync` method on each route in sequence.</span></span> <span data-ttu-id="45a8a-130">Il `IRouter` istanza sceglie se *gestire* richiesta impostando il `RouteContext.Handler` con un valore non null `RequestDelegate`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-130">The `IRouter` instance chooses whether to *handle* the request by setting the `RouteContext.Handler` to a non-null `RequestDelegate`.</span></span> <span data-ttu-id="45a8a-131">Se una route imposta un gestore per la richiesta, verrà richiamato per elaborare la richiesta di elaborazione viene arrestata e il gestore di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-131">If a route sets a handler for the request, route processing stops and the handler will be invoked to process the request.</span></span> <span data-ttu-id="45a8a-132">Se tutte le route vengono tentate e viene individuato alcun gestore per la richiesta, il middleware chiama *Avanti* e viene richiamato il middleware successivo nella pipeline delle richieste.</span><span class="sxs-lookup"><span data-stu-id="45a8a-132">If all routes are tried and no handler is found for the request, the middleware calls *next* and the next middleware in the request pipeline is invoked.</span></span>

<span data-ttu-id="45a8a-133">L'input principale `RouteAsync` è il `RouteContext.HttpContext` associato alla richiesta corrente.</span><span class="sxs-lookup"><span data-stu-id="45a8a-133">The primary input to `RouteAsync` is the `RouteContext.HttpContext` associated with the current request.</span></span> <span data-ttu-id="45a8a-134">Il `RouteContext.Handler` e `RouteContext.RouteData` sono output che verranno impostati dopo una route corrispondente.</span><span class="sxs-lookup"><span data-stu-id="45a8a-134">The `RouteContext.Handler` and `RouteContext.RouteData` are outputs that will be set after a route matches.</span></span>

<span data-ttu-id="45a8a-135">Una corrispondenza durante `RouteAsync` verrà inoltre impostare le proprietà del `RouteContext.RouteData` ai valori appropriati in base l'elaborazione della richiesta fino a questo punto.</span><span class="sxs-lookup"><span data-stu-id="45a8a-135">A match during `RouteAsync` will also set the properties of the `RouteContext.RouteData` to appropriate values based on the request processing done so far.</span></span> <span data-ttu-id="45a8a-136">Se una route corrisponde a una richiesta, il `RouteContext.RouteData` conterrà le informazioni sullo stato importanti circa la *risultato*.</span><span class="sxs-lookup"><span data-stu-id="45a8a-136">If a route matches a request, the `RouteContext.RouteData` will contain important state information about the *result*.</span></span>

<span data-ttu-id="45a8a-137">`RouteData.Values`è un dizionario di *i valori di route* prodotta dalla route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-137">`RouteData.Values` is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="45a8a-138">Questi valori in genere sono determinati dalla suddivisione in token l'URL e possono essere utilizzati per accettare l'input dell'utente o per prendere decisioni ulteriormente invio all'interno dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="45a8a-138">These values are usually determined by tokenizing the URL, and can be used to accept user input, or to make further dispatching decisions inside the application.</span></span>

<span data-ttu-id="45a8a-139">`RouteData.DataTokens`è un contenitore delle proprietà di dati aggiuntivi relativi a una route corrispondente.</span><span class="sxs-lookup"><span data-stu-id="45a8a-139">`RouteData.DataTokens`  is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="45a8a-140">`DataTokens`vengono forniti per supportare lo stato di associazione dati con ogni route in modo l'applicazione può prendere decisioni in un secondo momento in base la route corrispondono.</span><span class="sxs-lookup"><span data-stu-id="45a8a-140">`DataTokens` are provided to support associating state data with each route so the application can make decisions later based on which route matched.</span></span> <span data-ttu-id="45a8a-141">Questi valori sono definite dallo sviluppatore e si **non** influiscono sul comportamento di routing in alcun modo.</span><span class="sxs-lookup"><span data-stu-id="45a8a-141">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="45a8a-142">Inoltre, i valori accantonati nei token di dati possono essere di qualsiasi tipo, a differenza di valori di route, che deve essere facilmente convertibili da e verso le stringhe.</span><span class="sxs-lookup"><span data-stu-id="45a8a-142">Additionally, values stashed in data tokens can be of any type, in contrast to route values, which must be easily convertible to and from strings.</span></span>

<span data-ttu-id="45a8a-143">`RouteData.Routers`è un elenco di route che ha partecipato alla corrispondenza correttamente la richiesta.</span><span class="sxs-lookup"><span data-stu-id="45a8a-143">`RouteData.Routers` is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="45a8a-144">Le route possono essere annidate all'interno di un altro e `Routers` proprietà riflette il percorso nell'albero logico di route che ha comportato una corrispondenza.</span><span class="sxs-lookup"><span data-stu-id="45a8a-144">Routes can be nested inside one another, and the `Routers` property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="45a8a-145">In genere il primo elemento `Routers` è la raccolta di route e deve essere utilizzato per la generazione di URL.</span><span class="sxs-lookup"><span data-stu-id="45a8a-145">Generally the first item in `Routers` is the route collection, and should be used for URL generation.</span></span> <span data-ttu-id="45a8a-146">L'ultimo elemento `Routers` è il gestore di route corrispondente.</span><span class="sxs-lookup"><span data-stu-id="45a8a-146">The last item in `Routers` is the route handler that matched.</span></span>

### <a name="url-generation"></a><span data-ttu-id="45a8a-147">Generazione di URL</span><span class="sxs-lookup"><span data-stu-id="45a8a-147">URL generation</span></span>

<span data-ttu-id="45a8a-148">Generazione di URL è il processo da cui il routing può creare un percorso URL basato su un set di valori di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-148">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="45a8a-149">In questo modo una separazione logica tra i gestori e gli URL che vi accedono.</span><span class="sxs-lookup"><span data-stu-id="45a8a-149">This allows for a logical separation between your handlers and the URLs that access them.</span></span>

<span data-ttu-id="45a8a-150">Generazione URL segue un processo iterativo simile, ma ha inizio con il codice utente o il framework chiama la `GetVirtualPath` dell'insieme di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-150">URL generation follows a similar iterative process, but starts with user or framework code calling into the `GetVirtualPath` method of the route collection.</span></span> <span data-ttu-id="45a8a-151">Ogni *route* avranno relativo `GetVirtualPath` metodo chiamato nella sequenza finché non null `VirtualPathData` viene restituito.</span><span class="sxs-lookup"><span data-stu-id="45a8a-151">Each *route* will then have its `GetVirtualPath` method called in sequence until a non-null `VirtualPathData` is returned.</span></span>

<span data-ttu-id="45a8a-152">Il database primario è input `GetVirtualPath` sono:</span><span class="sxs-lookup"><span data-stu-id="45a8a-152">The primary inputs to `GetVirtualPath` are:</span></span>

* `VirtualPathContext.HttpContext`

* `VirtualPathContext.Values`

* `VirtualPathContext.AmbientValues`

<span data-ttu-id="45a8a-153">Le route usano principalmente i valori della route forniti dal `Values` e `AmbientValues` decidere dove è possibile generare un URL e valori da includere.</span><span class="sxs-lookup"><span data-stu-id="45a8a-153">Routes primarily use the route values provided by the `Values` and `AmbientValues` to decide where it is possible to generate a URL and what values to include.</span></span> <span data-ttu-id="45a8a-154">Il `AmbientValues` sono il set di valori di route che sono state prodotte dalla corrispondenza la richiesta corrente con il sistema di routing.</span><span class="sxs-lookup"><span data-stu-id="45a8a-154">The `AmbientValues` are the set of route values that were produced from matching the current request with the routing system.</span></span> <span data-ttu-id="45a8a-155">Al contrario, `Values` sono i valori della route che specificano la modalità generare l'URL desiderato per l'operazione corrente.</span><span class="sxs-lookup"><span data-stu-id="45a8a-155">In contrast, `Values` are the route values that specify how to generate the desired URL for the current operation.</span></span> <span data-ttu-id="45a8a-156">Il `HttpContext` viene fornita nel caso in cui una route deve ottenere servizi o dati aggiuntivi associati al contesto corrente.</span><span class="sxs-lookup"><span data-stu-id="45a8a-156">The `HttpContext` is provided in case a route needs to get services or additional data associated with the current context.</span></span>

<span data-ttu-id="45a8a-157">Suggerimento: Considerare `Values` come un set di override per il `AmbientValues`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-157">Tip: Think of `Values` as being a set of overrides for the `AmbientValues`.</span></span> <span data-ttu-id="45a8a-158">Generazione URL tenta di riutilizzare i valori di route della richiesta corrente per semplificarne l'inserimento generare URL per i collegamenti utilizzando la stessa route o valori di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-158">URL generation tries to reuse route values from the current request to make it easy to generate URLs for links using the same route or route values.</span></span>

<span data-ttu-id="45a8a-159">L'output di `GetVirtualPath` è un `VirtualPathData`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-159">The output of `GetVirtualPath` is a `VirtualPathData`.</span></span> <span data-ttu-id="45a8a-160">`VirtualPathData`è un'operazione parallela del `RouteData`; contiene il `VirtualPath` per l'URL di output, nonché alcune proprietà aggiuntive che deve essere impostata per la route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-160">`VirtualPathData` is a parallel of `RouteData`; it contains the `VirtualPath` for the output URL as well as the some additional properties that should be set by the route.</span></span>

<span data-ttu-id="45a8a-161">Il `VirtualPathData.VirtualPath` proprietà contiene il *percorso virtuale* prodotta dalla route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-161">The `VirtualPathData.VirtualPath` property contains the *virtual path* produced by the route.</span></span> <span data-ttu-id="45a8a-162">A seconda delle esigenze potrebbe essere necessario elaborare ulteriormente il percorso.</span><span class="sxs-lookup"><span data-stu-id="45a8a-162">Depending on your needs you may need to process the path further.</span></span> <span data-ttu-id="45a8a-163">Ad esempio, se si desidera eseguire il rendering in HTML URL generato è necessario anteporre il percorso di base dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="45a8a-163">For instance, if you want to render the generated URL in HTML you need to prepend the base path of the application.</span></span>

<span data-ttu-id="45a8a-164">Il `VirtualPathData.Router` è un riferimento alla route che è stato generato correttamente l'URL.</span><span class="sxs-lookup"><span data-stu-id="45a8a-164">The `VirtualPathData.Router` is a reference to the route that successfully generated the URL.</span></span>

<span data-ttu-id="45a8a-165">Il `VirtualPathData.DataTokens` proprietà è un dizionario di dati aggiuntivi relativi alla route che ha generato l'URL.</span><span class="sxs-lookup"><span data-stu-id="45a8a-165">The `VirtualPathData.DataTokens` properties is a dictionary of additional data related to the route that generated the URL.</span></span> <span data-ttu-id="45a8a-166">Si tratta di parallelo di `RouteData.DataTokens`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-166">This is the parallel of `RouteData.DataTokens`.</span></span>

### <a name="creating-routes"></a><span data-ttu-id="45a8a-167">Creazione di route</span><span class="sxs-lookup"><span data-stu-id="45a8a-167">Creating routes</span></span>

<span data-ttu-id="45a8a-168">Fornisce il routing di `Route` classe dell'implementazione standard di `IRouter`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-168">Routing provides the `Route` class as the standard implementation of `IRouter`.</span></span> <span data-ttu-id="45a8a-169">`Route`Usa il *modello di route* sintassi per definire i modelli che verranno trovata corrispondenza con il percorso dell'URL quando `RouteAsync` viene chiamato.</span><span class="sxs-lookup"><span data-stu-id="45a8a-169">`Route` uses the *route template* syntax to define patterns that will match against the URL path when `RouteAsync` is called.</span></span> <span data-ttu-id="45a8a-170">`Route`verrà utilizzato lo stesso modello di route per generare un URL quando `GetVirtualPath` viene chiamato.</span><span class="sxs-lookup"><span data-stu-id="45a8a-170">`Route` will use the same route template to generate a URL when `GetVirtualPath` is called.</span></span>

<span data-ttu-id="45a8a-171">La maggior parte delle applicazioni creerà le route chiamando `MapRoute` o uno dei metodi di estensione simile definiti in `IRouteBuilder`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-171">Most applications will create routes by calling `MapRoute` or one of the similar extension methods defined on `IRouteBuilder`.</span></span> <span data-ttu-id="45a8a-172">Tutti questi metodi verrà creata un'istanza di `Route` e aggiungerlo all'insieme di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-172">All of these methods will create an instance of `Route` and add it to the route collection.</span></span>

<span data-ttu-id="45a8a-173">Nota: `MapRoute` non accetta un parametro del gestore di route - aggiunge solo le route che verranno gestite dal `DefaultHandler`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-173">Note: `MapRoute` doesn't take a route handler parameter - it only adds routes that will be handled by the `DefaultHandler`.</span></span> <span data-ttu-id="45a8a-174">Poiché il gestore predefinito è un `IRouter`, potrebbe decidere di non gestire la richiesta.</span><span class="sxs-lookup"><span data-stu-id="45a8a-174">Since the default handler is an `IRouter`, it may decide not to handle the request.</span></span> <span data-ttu-id="45a8a-175">Ad esempio, ASP.NET MVC viene in genere configurato come un gestore predefinito che gestisce solo le richieste che corrispondono a un'azione e del controller disponibili.</span><span class="sxs-lookup"><span data-stu-id="45a8a-175">For example, ASP.NET MVC is typically configured as a default handler that only handles requests that match an available controller and action.</span></span> <span data-ttu-id="45a8a-176">Per ulteriori informazioni sul routing per MVC, vedere [Routing alle azioni del Controller](../mvc/controllers/routing.md).</span><span class="sxs-lookup"><span data-stu-id="45a8a-176">To learn more about routing to MVC, see [Routing to Controller Actions](../mvc/controllers/routing.md).</span></span>

<span data-ttu-id="45a8a-177">Questo è un esempio di un `MapRoute` chiamata utilizzata da una definizione di route ASP.NET MVC tipico:</span><span class="sxs-lookup"><span data-stu-id="45a8a-177">This is an example of a `MapRoute` call used by a typical ASP.NET MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="45a8a-178">Questo modello corrisponderanno a un percorso URL come `/Products/Details/17` ed estrarre i valori della route `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-178">This template will match a URL path like `/Products/Details/17` and extract the route values `{ controller = Products, action = Details, id = 17 }`.</span></span> <span data-ttu-id="45a8a-179">I valori della route sono determinati da suddividere il percorso dell'URL in segmenti una e la corrispondenza di ogni segmento con il *parametro di route* nel modello di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-179">The route values are determined by splitting the URL path into segments, and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="45a8a-180">Sono denominati parametri di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-180">Route parameters are named.</span></span> <span data-ttu-id="45a8a-181">Vengono definiti da racchiudere il nome del parametro tra parentesi graffe `{ }`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-181">They are defined by enclosing the parameter name in braces `{ }`.</span></span>

<span data-ttu-id="45a8a-182">Il modello può anche corrispondere il percorso URL `/` e potrebbe creare i valori `{ controller = Home, action = Index }`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-182">The template above could also match the URL path `/` and would produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="45a8a-183">Ciò accade perché il `{controller}` e `{action}` i parametri di route hanno valori predefiniti e `id` parametro di route è facoltativo.</span><span class="sxs-lookup"><span data-stu-id="45a8a-183">This happens because the `{controller}` and `{action}` route parameters have default values, and the `id` route parameter is optional.</span></span> <span data-ttu-id="45a8a-184">Uguale `=` sign seguita da un valore dopo il nome del parametro di route definisce un valore predefinito per il parametro.</span><span class="sxs-lookup"><span data-stu-id="45a8a-184">An equals `=` sign followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="45a8a-185">Un punto interrogativo `?` dopo il nome del parametro di route definisce il parametro come facoltativi.</span><span class="sxs-lookup"><span data-stu-id="45a8a-185">A question mark `?` after the route parameter name defines the parameter as optional.</span></span> <span data-ttu-id="45a8a-186">Parametri con un valore predefinito della route *sempre* producono un valore di route, se la route corrisponde, i parametri facoltativi non produrrà un valore di route se si è verificato alcun segmento di percorso URL corrispondente.</span><span class="sxs-lookup"><span data-stu-id="45a8a-186">Route parameters with a default value *always* produce a route value when the route matches - optional parameters will not produce a route value if there was no corresponding URL path segment.</span></span>

<span data-ttu-id="45a8a-187">Vedere [al riferimento di modello di route](#route-template-reference) per una descrizione completa della sintassi e le caratteristiche del modello di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-187">See [route-template-reference](#route-template-reference) for a thorough description of route template features and syntax.</span></span>

<span data-ttu-id="45a8a-188">Questo esempio è inclusa una *indirizzare vincolo*:</span><span class="sxs-lookup"><span data-stu-id="45a8a-188">This example includes a *route constraint*:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="45a8a-189">Questo modello corrisponderanno a un percorso URL come `/Products/Details/17`, ma non `/Products/Details/Apples`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-189">This template will match a URL path like `/Products/Details/17`, but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="45a8a-190">La definizione di parametro di route `{id:int}` definisce un *indirizzare vincolo* per il `id` parametro di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-190">The route parameter definition `{id:int}` defines a *route constraint* for the `id` route parameter.</span></span> <span data-ttu-id="45a8a-191">Implementano vincoli della route `IRouteConstraint` ed esaminare i valori di route per la verifica.</span><span class="sxs-lookup"><span data-stu-id="45a8a-191">Route constraints implement `IRouteConstraint` and inspect route values to verify them.</span></span> <span data-ttu-id="45a8a-192">In questo esempio il valore di route `id` deve essere convertibile in un numero intero.</span><span class="sxs-lookup"><span data-stu-id="45a8a-192">In this example the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="45a8a-193">Vedere [riferimento di vincolo di route](#route-constraint-reference) per una spiegazione più dettagliata di vincoli della route che vengono forniti dal framework.</span><span class="sxs-lookup"><span data-stu-id="45a8a-193">See [route-constraint-reference](#route-constraint-reference) for a more detailed explanation of route constraints that are provided by the framework.</span></span>

<span data-ttu-id="45a8a-194">Altri overload di `MapRoute` accettare i valori per `constraints`, `dataTokens`, e `defaults`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-194">Additional overloads of `MapRoute` accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="45a8a-195">Questi parametri aggiuntivi di `MapRoute` sono definite come tipo `object`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-195">These additional parameters of `MapRoute` are defined as type `object`.</span></span> <span data-ttu-id="45a8a-196">L'utilizzo tipico di questi parametri consiste nel passare un oggetto tipizzato in modo anonimo, in cui i nomi delle proprietà della corrispondenza di tipo anonimo nomi di parametro di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-196">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="45a8a-197">I due esempi seguenti creano route equivalente:</span><span class="sxs-lookup"><span data-stu-id="45a8a-197">The following two examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="45a8a-198">Suggerimento: La sintassi inline per definire i vincoli e le impostazioni predefinite può essere più utile per le route semplice.</span><span class="sxs-lookup"><span data-stu-id="45a8a-198">Tip: The inline syntax for defining constraints and defaults can be more convenient for simple routes.</span></span> <span data-ttu-id="45a8a-199">Tuttavia, esistono delle funzionalità, ad esempio i token dei dati che non sono supportati dalla sintassi inline.</span><span class="sxs-lookup"><span data-stu-id="45a8a-199">However, there are features such as data tokens which are not supported by inline syntax.</span></span>

<span data-ttu-id="45a8a-200">In questo esempio illustra alcune altre funzionalità:</span><span class="sxs-lookup"><span data-stu-id="45a8a-200">This example demonstrates a few more features:</span></span>

```csharp
routes.MapRoute(
  name: "blog",
  template: "Blog/{*article}",
  defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="45a8a-201">Questo modello corrisponderanno a un percorso URL come `/Blog/All-About-Routing/Introduction` che consentirà di estrarre i valori `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-201">This template will match a URL path like `/Blog/All-About-Routing/Introduction` and will extract the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="45a8a-202">I valori per la route predefinita `controller` e `action` vengono generati dalla route anche se sono non presenti parametri di route corrispondente nel modello.</span><span class="sxs-lookup"><span data-stu-id="45a8a-202">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="45a8a-203">Nel modello di route, è possono specificare i valori predefiniti.</span><span class="sxs-lookup"><span data-stu-id="45a8a-203">Default values can be specified in the route template.</span></span> <span data-ttu-id="45a8a-204">Il `article` parametro di route è definito come un *catch-all* dall'aspetto di un asterisco `*` prima del nome di parametro di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-204">The `article` route parameter is defined as a *catch-all* by the appearance of an asterisk `*` before the route parameter name.</span></span> <span data-ttu-id="45a8a-205">I parametri di route catch-all acquisire il resto del percorso dell'URL e possono anche corrispondere a una stringa vuota.</span><span class="sxs-lookup"><span data-stu-id="45a8a-205">Catch-all route parameters capture the remainder of the URL path, and can also match the empty string.</span></span>

<span data-ttu-id="45a8a-206">Questo esempio vengono aggiunti i token di dati e i vincoli della route:</span><span class="sxs-lookup"><span data-stu-id="45a8a-206">This example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="45a8a-207">Questo modello corrisponderanno a un percorso URL come `/Products/5` che consentirà di estrarre i valori `{ controller = Products, action = Details, id = 5 }` e token di dati `{ locale = en-US }`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-207">This template will match a URL path like `/Products/5` and will extract the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Token di Windows di variabili locali](routing/_static/tokens.png)

<a name=id1></a>

### <a name="url-generation"></a><span data-ttu-id="45a8a-209">Generazione di URL</span><span class="sxs-lookup"><span data-stu-id="45a8a-209">URL generation</span></span>

<span data-ttu-id="45a8a-210">La `Route` classe può inoltre eseguire generazione URL combinando un set di valori di route con il relativo modello di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-210">The `Route` class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="45a8a-211">Questo è logicamente il processo inverso di corrispondente al percorso URL.</span><span class="sxs-lookup"><span data-stu-id="45a8a-211">This is logically the reverse process of matching the URL path.</span></span>

<span data-ttu-id="45a8a-212">Suggerimento: Per comprendere meglio la generazione di URL, si supponga l'URL a cui si desidera generare e quindi considerare come un modello di route corrisponderebbe tale URL.</span><span class="sxs-lookup"><span data-stu-id="45a8a-212">Tip: To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="45a8a-213">I valori che deve essere prodotta?</span><span class="sxs-lookup"><span data-stu-id="45a8a-213">What values would be produced?</span></span> <span data-ttu-id="45a8a-214">È l'equivalente del funzionamento di generazione di URL in approssimativa di `Route` classe.</span><span class="sxs-lookup"><span data-stu-id="45a8a-214">This is the rough equivalent of how URL generation works in the `Route` class.</span></span>

<span data-ttu-id="45a8a-215">In questo esempio utilizza una route di stile di ASP.NET MVC base:</span><span class="sxs-lookup"><span data-stu-id="45a8a-215">This example uses a basic ASP.NET MVC style route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="45a8a-216">Con i valori della route `{ controller = Products, action = List }`, questa route genererà l'URL `/Products/List`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-216">With the route values `{ controller = Products, action = List }`, this route will generate the URL `/Products/List`.</span></span> <span data-ttu-id="45a8a-217">I valori della route vengono sostituiti dai parametri di route corrispondenti formare il percorso URL.</span><span class="sxs-lookup"><span data-stu-id="45a8a-217">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="45a8a-218">Poiché `id` è un parametro di route, non rappresenta alcun problema che non ha un valore.</span><span class="sxs-lookup"><span data-stu-id="45a8a-218">Since `id` is an optional route parameter, it's no problem that it doesn't have a value.</span></span>

<span data-ttu-id="45a8a-219">Con i valori della route `{ controller = Home, action = Index }`, questa route genererà l'URL `/`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-219">With the route values `{ controller = Home, action = Index }`, this route will generate the URL `/`.</span></span> <span data-ttu-id="45a8a-220">I valori della route che sono stati specificati corrispondano ai valori predefiniti in modo i segmenti corrispondenti a tali valori possono essere omesso in modo sicuro.</span><span class="sxs-lookup"><span data-stu-id="45a8a-220">The route values that were provided match the default values so the segments corresponding to those values can be safely omitted.</span></span> <span data-ttu-id="45a8a-221">Si noti che entrambi gli URL generati verrebbero andata e ritorno con la definizione route e producono gli stessi valori di route che sono stati utilizzati per generare l'URL.</span><span class="sxs-lookup"><span data-stu-id="45a8a-221">Note that both URLs generated would round-trip with this route definition and produce the same route values that were used to generate the URL.</span></span>

<span data-ttu-id="45a8a-222">Suggerimento: È necessario utilizzare un'applicazione mediante ASP.NET MVC `UrlHelper` per generare URL anziché chiamare direttamente il routing.</span><span class="sxs-lookup"><span data-stu-id="45a8a-222">Tip: An app using ASP.NET MVC should use `UrlHelper` to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="45a8a-223">Per ulteriori informazioni sul processo di generazione di URL, vedere [url-generazione-riferimento](#url-generation-reference).</span><span class="sxs-lookup"><span data-stu-id="45a8a-223">For more details about the URL generation process, see [url-generation-reference](#url-generation-reference).</span></span>

## <a name="using-routing-middleware"></a><span data-ttu-id="45a8a-224">Utilizzando Routing Middleware</span><span class="sxs-lookup"><span data-stu-id="45a8a-224">Using Routing Middleware</span></span>

<span data-ttu-id="45a8a-225">Aggiungere il pacchetto NuGet "Microsoft.AspNetCore.Routing".</span><span class="sxs-lookup"><span data-stu-id="45a8a-225">Add the NuGet package "Microsoft.AspNetCore.Routing".</span></span>

<span data-ttu-id="45a8a-226">Aggiungere il routing al contenitore del servizio in *Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="45a8a-226">Add routing to the service container in *Startup.cs*:</span></span>

[!code-csharp[Main](../fundamentals/routing/sample/RoutingSample/Startup.cs?highlight=3&start=11&end=14)]

<span data-ttu-id="45a8a-227">Le route devono essere configurate nel `Configure` metodo la `Startup` classe.</span><span class="sxs-lookup"><span data-stu-id="45a8a-227">Routes must be configured in the `Configure` method in the `Startup` class.</span></span> <span data-ttu-id="45a8a-228">Nell'esempio seguente Usa queste API:</span><span class="sxs-lookup"><span data-stu-id="45a8a-228">The sample below uses these APIs:</span></span>

* `RouteBuilder`
* `Build`
* <span data-ttu-id="45a8a-229">`MapGet`Corrisponde solo richieste GET HTTP</span><span class="sxs-lookup"><span data-stu-id="45a8a-229">`MapGet`  Matches only HTTP GET requests</span></span>
* `UseRouter`

```csharp
public void Configure(IApplicationBuilder app, ILoggerFactory loggerFactory)
{
    var trackPackageRouteHandler = new RouteHandler(context =>
    {
        var routeValues = context.GetRouteData().Values;
        return context.Response.WriteAsync(
            $"Hello! Route values: {string.Join(", ", routeValues)}");
    });

    var routeBuilder = new RouteBuilder(app, trackPackageRouteHandler);

    routeBuilder.MapRoute(
        "Track Package Route",
        "package/{operation:regex(^(track|create|detonate)$)}/{id:int}");

    routeBuilder.MapGet("hello/{name}", context =>
    {
        var name = context.GetRouteValue("name");
        // This is the route handler when HTTP GET "hello/<anything>"  matches
        // To match HTTP GET "hello/<anything>/<anything>,
        // use routeBuilder.MapGet("hello/{*name}"
        return context.Response.WriteAsync($"Hi, {name}!");
    });

    var routes = routeBuilder.Build();
    app.UseRouter(routes);
}
```

<span data-ttu-id="45a8a-230">La tabella seguente mostra le risposte con l'URI specificato.</span><span class="sxs-lookup"><span data-stu-id="45a8a-230">The table below shows the responses with the given URIs.</span></span>

| <span data-ttu-id="45a8a-231">URI</span><span class="sxs-lookup"><span data-stu-id="45a8a-231">URI</span></span> | <span data-ttu-id="45a8a-232">Risposta</span><span class="sxs-lookup"><span data-stu-id="45a8a-232">Response</span></span>  |
| ------- | -------- |
| <span data-ttu-id="45a8a-233">/package/create/3</span><span class="sxs-lookup"><span data-stu-id="45a8a-233">/package/create/3</span></span>  | <span data-ttu-id="45a8a-234">Hello!</span><span class="sxs-lookup"><span data-stu-id="45a8a-234">Hello!</span></span> <span data-ttu-id="45a8a-235">I valori di route: [operazione, creare], [id, 3]</span><span class="sxs-lookup"><span data-stu-id="45a8a-235">Route values: [operation, create], [id, 3]</span></span> |
| <span data-ttu-id="45a8a-236">pacchetto/traccia/3</span><span class="sxs-lookup"><span data-stu-id="45a8a-236">/package/track/-3</span></span>  | <span data-ttu-id="45a8a-237">Hello!</span><span class="sxs-lookup"><span data-stu-id="45a8a-237">Hello!</span></span> <span data-ttu-id="45a8a-238">I valori di route: [operazione, traccia], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="45a8a-238">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="45a8a-239">/ pacchetto/traccia/3 /</span><span class="sxs-lookup"><span data-stu-id="45a8a-239">/package/track/-3/</span></span> | <span data-ttu-id="45a8a-240">Hello!</span><span class="sxs-lookup"><span data-stu-id="45a8a-240">Hello!</span></span> <span data-ttu-id="45a8a-241">I valori di route: [operazione, traccia], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="45a8a-241">Route values: [operation, track], [id, -3]</span></span>  |
| <span data-ttu-id="45a8a-242">/package traccia /</span><span class="sxs-lookup"><span data-stu-id="45a8a-242">/package/track/</span></span> | <span data-ttu-id="45a8a-243">\<Passaggio alcuna corrispondenza ></span><span class="sxs-lookup"><span data-stu-id="45a8a-243">\<Fall through, no match></span></span> |
| <span data-ttu-id="45a8a-244">OTTENERE /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="45a8a-244">GET /hello/Joe</span></span> | <span data-ttu-id="45a8a-245">Salve, Joe!</span><span class="sxs-lookup"><span data-stu-id="45a8a-245">Hi, Joe!</span></span> |
| <span data-ttu-id="45a8a-246">POST /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="45a8a-246">POST /hello/Joe</span></span> | <span data-ttu-id="45a8a-247">\<Passaggio a, HTTP GET solo corrispondenze ></span><span class="sxs-lookup"><span data-stu-id="45a8a-247">\<Fall through, matches HTTP GET only></span></span> |
| <span data-ttu-id="45a8a-248">OTTENERE /hello/Joe/Smith</span><span class="sxs-lookup"><span data-stu-id="45a8a-248">GET /hello/Joe/Smith</span></span> | <span data-ttu-id="45a8a-249">\<Passaggio alcuna corrispondenza ></span><span class="sxs-lookup"><span data-stu-id="45a8a-249">\<Fall through, no match></span></span> |

<span data-ttu-id="45a8a-250">Se si sta configurando una singola route, chiamare `app.UseRouter` passando un `IRouter` istanza.</span><span class="sxs-lookup"><span data-stu-id="45a8a-250">If you are configuring a single route, call `app.UseRouter` passing in an `IRouter` instance.</span></span> <span data-ttu-id="45a8a-251">Non è necessario chiamare `RouteBuilder`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-251">You won't need to call `RouteBuilder`.</span></span>

<span data-ttu-id="45a8a-252">Il framework fornisce un set di metodi di estensione per la creazione di route, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="45a8a-252">The framework provides a set of extension methods for creating routes such as:</span></span>

* `MapRoute`
* `MapGet`
* `MapPost`
* `MapPut`
* `MapDelete`
* `MapVerb`

<span data-ttu-id="45a8a-253">Alcuni di questi metodi, ad esempio `MapGet` richiedono un `RequestDelegate` deve essere fornito.</span><span class="sxs-lookup"><span data-stu-id="45a8a-253">Some of these methods such as `MapGet` require a `RequestDelegate` to be provided.</span></span> <span data-ttu-id="45a8a-254">Il `RequestDelegate` verrà utilizzato come il *gestore di route* quando la route corrisponde.</span><span class="sxs-lookup"><span data-stu-id="45a8a-254">The `RequestDelegate` will be used as the *route handler* when the route matches.</span></span> <span data-ttu-id="45a8a-255">Altri metodi di questa famiglia consentono di configurare una pipeline middleware che verrà utilizzata come gestore di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-255">Other methods in this family allow configuring a middleware pipeline which will be used as the route handler.</span></span> <span data-ttu-id="45a8a-256">Se il *mappa* metodo non accetta un gestore, ad esempio `MapRoute`, viene utilizzata la `DefaultHandler`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-256">If the *Map* method doesn't accept a handler, such as `MapRoute`, then it will use the `DefaultHandler`.</span></span>

<span data-ttu-id="45a8a-257">Il `Map[Verb]` metodi utilizzano i vincoli per limitare la route per il verbo HTTP nel nome del metodo.</span><span class="sxs-lookup"><span data-stu-id="45a8a-257">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="45a8a-258">Ad esempio, vedere [MapGet](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L85-L88) e [MapVerb](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L156-L180).</span><span class="sxs-lookup"><span data-stu-id="45a8a-258">For example, see [MapGet](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L85-L88) and [MapVerb](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L156-L180).</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="45a8a-259">Riferimento del modello di route</span><span class="sxs-lookup"><span data-stu-id="45a8a-259">Route Template Reference</span></span>

<span data-ttu-id="45a8a-260">Token all'interno delle parentesi graffe (`{ }`) definire *parametri della route* che verrà associato se esiste una corrispondenza per la route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-260">Tokens within curly braces (`{ }`) define *route parameters* which will be bound if the route is matched.</span></span> <span data-ttu-id="45a8a-261">È possibile definire più di un parametro di route in un segmento di route, ma devono essere separati da un valore letterale.</span><span class="sxs-lookup"><span data-stu-id="45a8a-261">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="45a8a-262">Ad esempio `{controller=Home}{action=Index}` non sarebbe una route valida, poiché è presente alcun valore letterale tra `{controller}` e `{action}`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-262">For example `{controller=Home}{action=Index}` would not be a valid route, since there is no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="45a8a-263">Questi parametri di route devono avere un nome e possono avere attributi aggiuntivi specificato.</span><span class="sxs-lookup"><span data-stu-id="45a8a-263">These route parameters must have a name, and may have additional attributes specified.</span></span>

<span data-ttu-id="45a8a-264">Testo letterale diverso da parametri di route (ad esempio, `{id}`) e il separatore di percorso `/` deve corrispondere il testo nell'URL.</span><span class="sxs-lookup"><span data-stu-id="45a8a-264">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="45a8a-265">Criteri di testo è in base alla rappresentazione del percorso URL decodificato con distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="45a8a-265">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="45a8a-266">In modo che corrisponda il delimitatore di parametro di route letterale `{` o `}`, ripetendo il carattere di escape (`{{` o `}}`).</span><span class="sxs-lookup"><span data-stu-id="45a8a-266">To match the literal route parameter delimiter `{` or  `}`, escape it by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="45a8a-267">I modelli di URL che tentano di acquisire un nome file con un'estensione di file facoltativo sono considerazioni aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="45a8a-267">URL patterns that attempt to capture a filename with an optional file extension have additional considerations.</span></span> <span data-ttu-id="45a8a-268">Ad esempio, utilizzando il modello `files/{filename}.{ext?}` : se entrambi `filename` e `ext` esiste, verranno popolati entrambi i valori.</span><span class="sxs-lookup"><span data-stu-id="45a8a-268">For example, using the template `files/{filename}.{ext?}` - When both `filename` and `ext` exist, both values will be populated.</span></span> <span data-ttu-id="45a8a-269">Se solo `filename` esiste nell'URL, le corrispondenze di route, perché il punto finale `.` è facoltativo.</span><span class="sxs-lookup"><span data-stu-id="45a8a-269">If only `filename` exists in the URL, the route matches because the trailing period `.` is  optional.</span></span> <span data-ttu-id="45a8a-270">I seguenti URL corrisponderebbe questa route:</span><span class="sxs-lookup"><span data-stu-id="45a8a-270">The following URLs would match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile.`
* `/files/myFile`

<span data-ttu-id="45a8a-271">È possibile utilizzare il `*` carattere come prefisso per un parametro di route da associare al resto dell'URI - si tratta di un *catch-all* parametro.</span><span class="sxs-lookup"><span data-stu-id="45a8a-271">You can use the `*` character as a prefix to a route parameter to bind to the rest of the URI - this is called a *catch-all* parameter.</span></span> <span data-ttu-id="45a8a-272">Ad esempio, `blog/{*slug}` corrisponderà a qualsiasi URI avviata con `/blog` e qualsiasi valore riportata di seguito (che verrebbe assegnato al `slug` indirizzare valore).</span><span class="sxs-lookup"><span data-stu-id="45a8a-272">For example, `blog/{*slug}` would match any URI that started with `/blog` and had any value following it (which would be assigned to the `slug` route value).</span></span> <span data-ttu-id="45a8a-273">I parametri di catch-all possono inoltre corrispondere la stringa vuota.</span><span class="sxs-lookup"><span data-stu-id="45a8a-273">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="45a8a-274">Possono avere parametri di route *i valori predefiniti*, designato specificando il valore predefinito dopo il nome del parametro, separato da un `=`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-274">Route parameters may have *default values*, designated by specifying the default after the parameter name, separated by an `=`.</span></span> <span data-ttu-id="45a8a-275">Ad esempio, `{controller=Home}` definirebbe `Home` come valore predefinito per `controller`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-275">For example, `{controller=Home}` would define `Home` as the default value for `controller`.</span></span> <span data-ttu-id="45a8a-276">Se è presente nell'URL per il parametro alcun valore, viene utilizzato il valore predefinito.</span><span class="sxs-lookup"><span data-stu-id="45a8a-276">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="45a8a-277">Oltre ai valori predefiniti, i parametri di route possono essere facoltativi (specificati mediante l'aggiunta di un `?` alla fine del nome del parametro, come in `id?`).</span><span class="sxs-lookup"><span data-stu-id="45a8a-277">In addition to default values, route parameters may be optional (specified by appending a `?` to the end of the parameter name, as in `id?`).</span></span> <span data-ttu-id="45a8a-278">La differenza tra facoltativo e "con valore predefinito" è che un parametro di route con un valore predefinito produce sempre un valore. parametro facoltativo ha un valore solo se è disponibile.</span><span class="sxs-lookup"><span data-stu-id="45a8a-278">The difference between optional and "has default" is that a route parameter with a default value always produces a value; an optional parameter has a value only when one is provided.</span></span>

<span data-ttu-id="45a8a-279">I parametri di route possono inoltre avere vincoli, che devono corrispondere al valore di route associato dall'URL.</span><span class="sxs-lookup"><span data-stu-id="45a8a-279">Route parameters may also have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="45a8a-280">Aggiunta di due punti `:` e il nome del vincolo dopo il nome del parametro di route specifica un *vincolo inline* su un parametro di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-280">Adding a colon `:` and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="45a8a-281">Se il vincolo richiede argomenti quelle racchiuso tra parentesi `( )` dopo il nome del vincolo.</span><span class="sxs-lookup"><span data-stu-id="45a8a-281">If the constraint requires arguments those are provided enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="45a8a-282">È possibile specificare più vincoli inline aggiungendo un'altra virgola `:` e il nome del vincolo.</span><span class="sxs-lookup"><span data-stu-id="45a8a-282">Multiple inline constraints can be specified by appending another colon `:` and constraint name.</span></span> <span data-ttu-id="45a8a-283">Il nome del vincolo viene passato per il `IInlineConstraintResolver` servizio per creare un'istanza di `IRouteConstraint` da utilizzare nell'elaborazione di URL.</span><span class="sxs-lookup"><span data-stu-id="45a8a-283">The constraint name is passed to the `IInlineConstraintResolver` service to create an instance of `IRouteConstraint` to use in URL processing.</span></span> <span data-ttu-id="45a8a-284">Ad esempio, il modello di route `blog/{article:minlength(10)}` specifica il `minlength` vincolo con l'argomento `10`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-284">For example, the route template `blog/{article:minlength(10)}` specifies the `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="45a8a-285">Per ulteriori vincoli della route descrizione e un elenco dei vincoli fornita dal framework, vedere [riferimento di vincolo di route](#route-constraint-reference).</span><span class="sxs-lookup"><span data-stu-id="45a8a-285">For more description route constraints, and a listing of the constraints provided by the framework, see [route-constraint-reference](#route-constraint-reference).</span></span>

<span data-ttu-id="45a8a-286">Nella tabella seguente illustra alcuni modelli di route e il relativo comportamento.</span><span class="sxs-lookup"><span data-stu-id="45a8a-286">The following table demonstrates some route templates and their behavior.</span></span>

| <span data-ttu-id="45a8a-287">Modello di route</span><span class="sxs-lookup"><span data-stu-id="45a8a-287">Route Template</span></span> | <span data-ttu-id="45a8a-288">Esempio di URL corrispondenti</span><span class="sxs-lookup"><span data-stu-id="45a8a-288">Example Matching URL</span></span> | <span data-ttu-id="45a8a-289">Note</span><span class="sxs-lookup"><span data-stu-id="45a8a-289">Notes</span></span> |
| -------- | -------- | ------- |
| <span data-ttu-id="45a8a-290">hello</span><span class="sxs-lookup"><span data-stu-id="45a8a-290">hello</span></span>  | <span data-ttu-id="45a8a-291">/Hello</span><span class="sxs-lookup"><span data-stu-id="45a8a-291">/hello</span></span>  | <span data-ttu-id="45a8a-292">Solo corrisponda al percorso del singolo`/hello`</span><span class="sxs-lookup"><span data-stu-id="45a8a-292">Only matches the single path `/hello`</span></span> |
| <span data-ttu-id="45a8a-293">{Pagina Home =}</span><span class="sxs-lookup"><span data-stu-id="45a8a-293">{Page=Home}</span></span> | / | <span data-ttu-id="45a8a-294">Corrispondente e imposta `Page` per`Home`</span><span class="sxs-lookup"><span data-stu-id="45a8a-294">Matches and sets `Page` to `Home`</span></span> |
| <span data-ttu-id="45a8a-295">{Pagina Home =}</span><span class="sxs-lookup"><span data-stu-id="45a8a-295">{Page=Home}</span></span>  | <span data-ttu-id="45a8a-296">/ Contatto</span><span class="sxs-lookup"><span data-stu-id="45a8a-296">/Contact</span></span>  | <span data-ttu-id="45a8a-297">Corrispondente e imposta `Page` per`Contact`</span><span class="sxs-lookup"><span data-stu-id="45a8a-297">Matches and sets `Page` to `Contact`</span></span> |
| <span data-ttu-id="45a8a-298">{controller} / {action} / {id}?</span><span class="sxs-lookup"><span data-stu-id="45a8a-298">{controller}/{action}/{id?}</span></span> | <span data-ttu-id="45a8a-299">/ / Elenco dei prodotti</span><span class="sxs-lookup"><span data-stu-id="45a8a-299">/Products/List</span></span> | <span data-ttu-id="45a8a-300">Esegue il mapping a `Products` controller e `List` azione</span><span class="sxs-lookup"><span data-stu-id="45a8a-300">Maps to `Products` controller and `List`  action</span></span> |
| <span data-ttu-id="45a8a-301">{controller} / {action} / {id}?</span><span class="sxs-lookup"><span data-stu-id="45a8a-301">{controller}/{action}/{id?}</span></span> | <span data-ttu-id="45a8a-302">/ Prodotti/dettagli/123</span><span class="sxs-lookup"><span data-stu-id="45a8a-302">/Products/Details/123</span></span>  |  <span data-ttu-id="45a8a-303">Esegue il mapping a `Products` controller e `Details` azione.</span><span class="sxs-lookup"><span data-stu-id="45a8a-303">Maps to `Products` controller and  `Details` action.</span></span>  <span data-ttu-id="45a8a-304">`id`Impostare su 123</span><span class="sxs-lookup"><span data-stu-id="45a8a-304">`id` set to 123</span></span> |
| <span data-ttu-id="45a8a-305">{controller Home =} / {azione = indice} / {id}?</span><span class="sxs-lookup"><span data-stu-id="45a8a-305">{controller=Home}/{action=Index}/{id?}</span></span> | /  |  <span data-ttu-id="45a8a-306">Esegue il mapping a `Home` controller e `Index` ; (metodo) `id` viene ignorato.</span><span class="sxs-lookup"><span data-stu-id="45a8a-306">Maps to `Home` controller and `Index`  method; `id` is ignored.</span></span> |

<span data-ttu-id="45a8a-307">Utilizzo di un modello è in genere l'approccio più semplice per il routing.</span><span class="sxs-lookup"><span data-stu-id="45a8a-307">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="45a8a-308">I vincoli e le impostazioni predefinite possono essere specificate anche all'esterno del modello di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-308">Constraints and defaults can also be specified outside the route template.</span></span>

<span data-ttu-id="45a8a-309">Suggerimento: Abilitare [registrazione](logging.md) per vedere come il basate nelle implementazioni di routine, ad esempio `Route`, alle richieste.</span><span class="sxs-lookup"><span data-stu-id="45a8a-309">Tip: Enable [Logging](logging.md) to see how the built in routing implementations, such as `Route`, match requests.</span></span>

## <a name="route-constraint-reference"></a><span data-ttu-id="45a8a-310">Riferimento di vincolo di route</span><span class="sxs-lookup"><span data-stu-id="45a8a-310">Route Constraint Reference</span></span>

<span data-ttu-id="45a8a-311">Vincoli della route eseguire quando un `Route` ha corrisponde la sintassi dell'URL in ingresso e in formato token percorso dell'URL in valori di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-311">Route constraints execute when a `Route` has matched the syntax of the incoming URL and tokenized the URL path into route values.</span></span> <span data-ttu-id="45a8a-312">Vincoli della route in genere di controllare il valore di route associato tramite il modello di route ed eseguire una semplice sì/no decisione sulla o meno il valore è accettabile.</span><span class="sxs-lookup"><span data-stu-id="45a8a-312">Route constraints generally inspect the route value associated via the route template and make a simple yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="45a8a-313">Alcuni vincoli della route usare dati all'esterno del valore di route per valutare se la richiesta può essere instradata.</span><span class="sxs-lookup"><span data-stu-id="45a8a-313">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="45a8a-314">Ad esempio, il `HttpMethodRouteConstraint` può accettare o rifiutare una richiesta basata sul relativo verbo HTTP.</span><span class="sxs-lookup"><span data-stu-id="45a8a-314">For example, the `HttpMethodRouteConstraint` can accept or reject a request based on its HTTP verb.</span></span>

>[!WARNING]
> <span data-ttu-id="45a8a-315">Evitare l'utilizzo di vincoli per **convalida dell'input**, poiché ciò significa che tale valore non valido genererà un errore 404 (non trovato) anziché un 400 con un messaggio di errore appropriato.</span><span class="sxs-lookup"><span data-stu-id="45a8a-315">Avoid using constraints for **input validation**, because doing so means that invalid input will result in a 404 (Not Found) instead of a 400 with an appropriate error message.</span></span> <span data-ttu-id="45a8a-316">Vincoli della route devono essere utilizzati per **ambiguità** tra route simili, non si desidera convalidare l'input per una route specifica.</span><span class="sxs-lookup"><span data-stu-id="45a8a-316">Route constraints should be used to **disambiguate** between similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="45a8a-317">Nella tabella seguente illustra alcuni vincoli della route e il relativo comportamento previsto.</span><span class="sxs-lookup"><span data-stu-id="45a8a-317">The following table demonstrates some route constraints and their expected behavior.</span></span>

| <span data-ttu-id="45a8a-318">vincolo</span><span class="sxs-lookup"><span data-stu-id="45a8a-318">constraint</span></span> | <span data-ttu-id="45a8a-319">Esempio</span><span class="sxs-lookup"><span data-stu-id="45a8a-319">Example</span></span> | <span data-ttu-id="45a8a-320">Corrispondenze di esempio</span><span class="sxs-lookup"><span data-stu-id="45a8a-320">Example Matches</span></span> | <span data-ttu-id="45a8a-321">Note</span><span class="sxs-lookup"><span data-stu-id="45a8a-321">Notes</span></span> |
| --------   | ------- | ------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="45a8a-322">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="45a8a-322">`123456789`, `-123456789`</span></span>  | <span data-ttu-id="45a8a-323">Corrisponde a qualsiasi numero intero</span><span class="sxs-lookup"><span data-stu-id="45a8a-323">Matches any integer</span></span> |
| `bool`  | `{active:bool}` | <span data-ttu-id="45a8a-324">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="45a8a-324">`true`, `FALSE`</span></span> | <span data-ttu-id="45a8a-325">Corrispondenze `true` o `false` (tra maiuscole e minuscole)</span><span class="sxs-lookup"><span data-stu-id="45a8a-325">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="45a8a-326">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="45a8a-326">`2016-12-31`, `2016-12-31 7:32pm`</span></span>  | <span data-ttu-id="45a8a-327">Corrisponde a un oggetto valido `DateTime` valore (in lingua inglese - vedere avviso)</span><span class="sxs-lookup"><span data-stu-id="45a8a-327">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="45a8a-328">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="45a8a-328">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="45a8a-329">Corrisponde a un oggetto valido `decimal` valore (in lingua inglese - vedere avviso)</span><span class="sxs-lookup"><span data-stu-id="45a8a-329">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double`  | `{weight:double}` | <span data-ttu-id="45a8a-330">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="45a8a-330">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="45a8a-331">Corrisponde a un oggetto valido `double` valore (in lingua inglese - vedere avviso)</span><span class="sxs-lookup"><span data-stu-id="45a8a-331">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float`  | `{weight:float}` | <span data-ttu-id="45a8a-332">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="45a8a-332">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="45a8a-333">Corrisponde a un oggetto valido `float` valore (in lingua inglese - vedere avviso)</span><span class="sxs-lookup"><span data-stu-id="45a8a-333">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid`  | `{id:guid}` | <span data-ttu-id="45a8a-334">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="45a8a-334">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="45a8a-335">Corrisponde a un oggetto valido `Guid` valore</span><span class="sxs-lookup"><span data-stu-id="45a8a-335">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="45a8a-336">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="45a8a-336">`123456789`, `-123456789`</span></span> | <span data-ttu-id="45a8a-337">Corrisponde a un oggetto valido `long` valore</span><span class="sxs-lookup"><span data-stu-id="45a8a-337">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="45a8a-338">Stringa deve contenere almeno 4 caratteri</span><span class="sxs-lookup"><span data-stu-id="45a8a-338">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="45a8a-339">Stringa deve essere non più di 8 caratteri</span><span class="sxs-lookup"><span data-stu-id="45a8a-339">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="45a8a-340">Stringa deve essere esattamente di 12 caratteri</span><span class="sxs-lookup"><span data-stu-id="45a8a-340">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="45a8a-341">Stringa deve contenere almeno 8 e non più di 16 caratteri</span><span class="sxs-lookup"><span data-stu-id="45a8a-341">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="45a8a-342">Valore intero deve essere almeno 18</span><span class="sxs-lookup"><span data-stu-id="45a8a-342">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` |  `91` | <span data-ttu-id="45a8a-343">Valore intero deve essere non più di 120</span><span class="sxs-lookup"><span data-stu-id="45a8a-343">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="45a8a-344">Valore intero deve essere almeno 18 ma non più di 120</span><span class="sxs-lookup"><span data-stu-id="45a8a-344">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="45a8a-345">Stringa deve essere costituito da uno o più caratteri alfabetici (`a`-`z`tra maiuscole e minuscole)</span><span class="sxs-lookup"><span data-stu-id="45a8a-345">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="45a8a-346">Stringa deve corrispondere all'espressione regolare (vedere i suggerimenti per la definizione di un'espressione regolare)</span><span class="sxs-lookup"><span data-stu-id="45a8a-346">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required`  | `{name:required}` | `Rick` |  <span data-ttu-id="45a8a-347">Utilizzato per imporre che un valore di parametro non è presente durante la generazione di URL</span><span class="sxs-lookup"><span data-stu-id="45a8a-347">Used to enforce that a non-parameter value is present during URL generation</span></span> |

>[!WARNING]
> <span data-ttu-id="45a8a-348">Vincoli della route per verificare l'URL possono essere convertiti in un tipo CLR (ad esempio `int` o `DateTime`) utilizzare sempre le impostazioni cultura invarianti, si presuppone l'URL è non localizzabile.</span><span class="sxs-lookup"><span data-stu-id="45a8a-348">Route constraints that verify the URL can be converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture - they assume the URL is non-localizable.</span></span> <span data-ttu-id="45a8a-349">I vincoli della route forniti dal framework non modificare i valori archiviati nei valori di route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-349">The framework-provided route constraints do not modify the values stored in route values.</span></span> <span data-ttu-id="45a8a-350">Tutti i valori di route analizzati dall'URL vengono archiviati come stringhe.</span><span class="sxs-lookup"><span data-stu-id="45a8a-350">All route values parsed from the URL will be stored as strings.</span></span> <span data-ttu-id="45a8a-351">Ad esempio, il [il vincolo di route Float](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/Constraints/FloatRouteConstraint.cs#L44-L60) tenterà di convertire il valore di route per un valore float, ma il valore convertito viene utilizzato solo per verificare che può essere convertito in un valore float.</span><span class="sxs-lookup"><span data-stu-id="45a8a-351">For example, the [Float route constraint](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/Constraints/FloatRouteConstraint.cs#L44-L60) will attempt to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="45a8a-352">Espressioni regolari</span><span class="sxs-lookup"><span data-stu-id="45a8a-352">Regular expressions</span></span> 

<span data-ttu-id="45a8a-353">Aggiunge il framework di ASP.NET Core `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` al costruttore di espressione regolare.</span><span class="sxs-lookup"><span data-stu-id="45a8a-353">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="45a8a-354">Vedere [RegexOptions Enumeration](https://docs.microsoft.com/dotnet/api/system.text.regularexpressions.regexoptions) per una descrizione di questi membri.</span><span class="sxs-lookup"><span data-stu-id="45a8a-354">See [RegexOptions Enumeration](https://docs.microsoft.com/dotnet/api/system.text.regularexpressions.regexoptions) for a description of these members.</span></span>

<span data-ttu-id="45a8a-355">Espressioni regolari utilizzano delimitatori e i token simili a quelli utilizzati dal servizio Routing e il linguaggio c#.</span><span class="sxs-lookup"><span data-stu-id="45a8a-355">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="45a8a-356">I token di espressione regolare devono essere codificati.</span><span class="sxs-lookup"><span data-stu-id="45a8a-356">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="45a8a-357">Ad esempio, per utilizzare l'espressione regolare `^\d{3}-\d{2}-\d{4}$` nel servizio di Routing, è necessario disporre di `\` caratteri digitati come `\\` nel file di origine c# di escape per il `\` stringa di caratteri di escape (non usa [verbatim valori letterali stringa](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/string).</span><span class="sxs-lookup"><span data-stu-id="45a8a-357">For example, to use the regular expression `^\d{3}-\d{2}-\d{4}$` in Routing, it needs to have the `\` characters typed in as `\\` in the C# source file to escape the `\` string escape character (unless using [verbatim string literals](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/string).</span></span> <span data-ttu-id="45a8a-358">Il `{` , `}` , ' [' e ']' necessario caratteri di escape raddoppiando in modo che i caratteri di delimitazione di parametro di Routing di escape.</span><span class="sxs-lookup"><span data-stu-id="45a8a-358">The `{` , `}` , '[' and ']' characters need to be escaped by doubling them to escape the Routing parameter delimiter characters.</span></span>  <span data-ttu-id="45a8a-359">Nella tabella seguente viene illustrata un'espressione regolare e la versione sottoposta a escape.</span><span class="sxs-lookup"><span data-stu-id="45a8a-359">The table below shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="45a8a-360">Espressione</span><span class="sxs-lookup"><span data-stu-id="45a8a-360">Expression</span></span>               | <span data-ttu-id="45a8a-361">Nota</span><span class="sxs-lookup"><span data-stu-id="45a8a-361">Note</span></span> |
| ----------------- | ------------ | 
| `^\d{3}-\d{2}-\d{4}$` | <span data-ttu-id="45a8a-362">Espressione regolare</span><span class="sxs-lookup"><span data-stu-id="45a8a-362">Regular expression</span></span> |
| `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` | <span data-ttu-id="45a8a-363">Caratteri di escape</span><span class="sxs-lookup"><span data-stu-id="45a8a-363">Escaped</span></span>  |
| `^[a-z]{2}$` | <span data-ttu-id="45a8a-364">Espressione regolare</span><span class="sxs-lookup"><span data-stu-id="45a8a-364">Regular expression</span></span> |
| `^[[a-z]]{{2}}$` | <span data-ttu-id="45a8a-365">Caratteri di escape</span><span class="sxs-lookup"><span data-stu-id="45a8a-365">Escaped</span></span>  |

<span data-ttu-id="45a8a-366">Le espressioni regolari usate nel routing spesso inizierà con il `^` carattere (corrispondenza della posizione della stringa iniziale) e terminare con il `$` carattere (corrispondenza della posizione della stringa finale).</span><span class="sxs-lookup"><span data-stu-id="45a8a-366">Regular expressions used in routing will often start with the `^` character (match starting position of the string) and end with the `$` character (match ending position of the string).</span></span> <span data-ttu-id="45a8a-367">Il `^` e `$` caratteri assicurarsi che la corrispondenza di espressione regolare il valore del parametro intera route.</span><span class="sxs-lookup"><span data-stu-id="45a8a-367">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="45a8a-368">Senza il `^` e `$` caratteri dell'espressione regolare corrisponderà qualsiasi sottostringa all'interno della stringa, che è spesso non si desidera.</span><span class="sxs-lookup"><span data-stu-id="45a8a-368">Without the `^` and `$` characters the regular expression will match any sub-string within the string, which is often not what you want.</span></span> <span data-ttu-id="45a8a-369">Nella tabella seguente vengono illustrati alcuni esempi e viene spiegato perché corrispondono o non corrispondono.</span><span class="sxs-lookup"><span data-stu-id="45a8a-369">The table below shows some examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="45a8a-370">Espressione</span><span class="sxs-lookup"><span data-stu-id="45a8a-370">Expression</span></span>               | <span data-ttu-id="45a8a-371">Stringa</span><span class="sxs-lookup"><span data-stu-id="45a8a-371">String</span></span> | <span data-ttu-id="45a8a-372">Corrispondenza con</span><span class="sxs-lookup"><span data-stu-id="45a8a-372">Match</span></span> | <span data-ttu-id="45a8a-373">Commento</span><span class="sxs-lookup"><span data-stu-id="45a8a-373">Comment</span></span> |
| ----------------- | ------------ |  ------------ |  ------------ | 
| `[a-z]{2}` | <span data-ttu-id="45a8a-374">hello</span><span class="sxs-lookup"><span data-stu-id="45a8a-374">hello</span></span> | <span data-ttu-id="45a8a-375">sì</span><span class="sxs-lookup"><span data-stu-id="45a8a-375">yes</span></span> | <span data-ttu-id="45a8a-376">sottostringa corrispondenze</span><span class="sxs-lookup"><span data-stu-id="45a8a-376">substring matches</span></span> |
| `[a-z]{2}` | <span data-ttu-id="45a8a-377">123abc456</span><span class="sxs-lookup"><span data-stu-id="45a8a-377">123abc456</span></span> | <span data-ttu-id="45a8a-378">sì</span><span class="sxs-lookup"><span data-stu-id="45a8a-378">yes</span></span> | <span data-ttu-id="45a8a-379">sottostringa corrispondenze</span><span class="sxs-lookup"><span data-stu-id="45a8a-379">substring matches</span></span> |
| `[a-z]{2}` | <span data-ttu-id="45a8a-380">MZ</span><span class="sxs-lookup"><span data-stu-id="45a8a-380">mz</span></span> | <span data-ttu-id="45a8a-381">sì</span><span class="sxs-lookup"><span data-stu-id="45a8a-381">yes</span></span> | <span data-ttu-id="45a8a-382">corrisponde all'espressione</span><span class="sxs-lookup"><span data-stu-id="45a8a-382">matches expression</span></span> |
| `[a-z]{2}` | <span data-ttu-id="45a8a-383">MZ</span><span class="sxs-lookup"><span data-stu-id="45a8a-383">MZ</span></span> | <span data-ttu-id="45a8a-384">sì</span><span class="sxs-lookup"><span data-stu-id="45a8a-384">yes</span></span> | <span data-ttu-id="45a8a-385">prevedono la distinzione tra maiuscole e minuscole non</span><span class="sxs-lookup"><span data-stu-id="45a8a-385">not case sensitive</span></span> |
| `^[a-z]{2}$` |  <span data-ttu-id="45a8a-386">hello</span><span class="sxs-lookup"><span data-stu-id="45a8a-386">hello</span></span> | <span data-ttu-id="45a8a-387">No</span><span class="sxs-lookup"><span data-stu-id="45a8a-387">no</span></span> | <span data-ttu-id="45a8a-388">vedere `^` e `$` sopra</span><span class="sxs-lookup"><span data-stu-id="45a8a-388">see `^` and `$` above</span></span> |
| `^[a-z]{2}$` |  <span data-ttu-id="45a8a-389">123abc456</span><span class="sxs-lookup"><span data-stu-id="45a8a-389">123abc456</span></span> | <span data-ttu-id="45a8a-390">No</span><span class="sxs-lookup"><span data-stu-id="45a8a-390">no</span></span> | <span data-ttu-id="45a8a-391">vedere `^` e `$` sopra</span><span class="sxs-lookup"><span data-stu-id="45a8a-391">see `^` and `$` above</span></span> |

<span data-ttu-id="45a8a-392">Fare riferimento a [espressioni regolari di .NET Framework](https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference) per ulteriori informazioni sulla sintassi delle espressioni regolari.</span><span class="sxs-lookup"><span data-stu-id="45a8a-392">Refer to [.NET Framework Regular Expressions](https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference) for more information on regular expression syntax.</span></span>

<span data-ttu-id="45a8a-393">Per limitare un parametro con un set noto di valori possibili, utilizzare un'espressione regolare.</span><span class="sxs-lookup"><span data-stu-id="45a8a-393">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="45a8a-394">Ad esempio `{action:regex(^(list|get|create)$)}` Cerca solo corrispondenze di `action` indirizzare valore `list`, `get`, o `create`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-394">For example `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="45a8a-395">Se passato nel dizionario di vincoli, la stringa "^ (elenco | get | creare) $" sarebbe equivalente.</span><span class="sxs-lookup"><span data-stu-id="45a8a-395">If passed into the constraints dictionary, the string "^(list|get|create)$" would be equivalent.</span></span> <span data-ttu-id="45a8a-396">I vincoli che vengono passati nel dizionario di vincoli (non in linea all'interno di un modello) che non corrispondono a uno dei vincoli noti vengono inoltre considerati espressioni regolari.</span><span class="sxs-lookup"><span data-stu-id="45a8a-396">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

## <a name="url-generation-reference"></a><span data-ttu-id="45a8a-397">Riferimento di generazione di URL</span><span class="sxs-lookup"><span data-stu-id="45a8a-397">URL Generation Reference</span></span>

<span data-ttu-id="45a8a-398">Nell'esempio seguente viene illustrato come generare un collegamento a una route specificata di un dizionario dei valori di route e un `RouteCollection`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-398">The example below shows how to generate a link to a route given a dictionary of route values and a `RouteCollection`.</span></span>

[!code-csharp[Main](../fundamentals/routing/sample/RoutingSample/Startup.cs?range=45-59)]

<span data-ttu-id="45a8a-399">Il `VirtualPath` generato alla fine dell'esempio precedente è `/package/create/123`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-399">The `VirtualPath` generated at the end of the sample above is `/package/create/123`.</span></span>

<span data-ttu-id="45a8a-400">Il secondo parametro per il `VirtualPathContext` costruttore è una raccolta di *ambiente valori*.</span><span class="sxs-lookup"><span data-stu-id="45a8a-400">The second parameter to the `VirtualPathContext` constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="45a8a-401">I valori di ambiente epoca limitando il numero di valori, che uno sviluppatore deve specificare all'interno di un determinato contesto di richiesta.</span><span class="sxs-lookup"><span data-stu-id="45a8a-401">Ambient values provide convenience by limiting the number of values a developer must specify within a certain request context.</span></span> <span data-ttu-id="45a8a-402">I valori della route corrente della richiesta corrente vengono considerati valori di ambiente per la generazione del collegamento.</span><span class="sxs-lookup"><span data-stu-id="45a8a-402">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="45a8a-403">Ad esempio, in un'applicazione MVC ASP.NET se è il `About` azione del `HomeController`, non è necessario specificare il valore di route controller a cui collegarsi il `Index` azione (il valore di ambiente di `Home` verrà utilizzato).</span><span class="sxs-lookup"><span data-stu-id="45a8a-403">For example, in an ASP.NET MVC app if you are in the `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action (the ambient value of `Home` will be used).</span></span>

<span data-ttu-id="45a8a-404">I valori di ambiente che non corrispondano a un parametro vengono ignorati e i valori di ambiente vengono ignorati anche quando un valore fornito in modo esplicito ne esegue l'override, da sinistra verso destra nell'URL.</span><span class="sxs-lookup"><span data-stu-id="45a8a-404">Ambient values that don't match a parameter are ignored, and ambient values are also ignored when an explicitly-provided value overrides it, going from left to right in the URL.</span></span>

<span data-ttu-id="45a8a-405">I valori che vengono forniti in modo esplicito, ma che non corrisponde a nessun elemento vengono aggiunti alla stringa di query.</span><span class="sxs-lookup"><span data-stu-id="45a8a-405">Values that are explicitly provided but which don't match anything are added to the query string.</span></span> <span data-ttu-id="45a8a-406">Nella tabella seguente mostra il risultato quando si usa il modello di route `{controller}/{action}/{id?}`.</span><span class="sxs-lookup"><span data-stu-id="45a8a-406">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="45a8a-407">Valori di ambiente</span><span class="sxs-lookup"><span data-stu-id="45a8a-407">Ambient Values</span></span> | <span data-ttu-id="45a8a-408">Valori espliciti</span><span class="sxs-lookup"><span data-stu-id="45a8a-408">Explicit Values</span></span> | <span data-ttu-id="45a8a-409">Risultato</span><span class="sxs-lookup"><span data-stu-id="45a8a-409">Result</span></span> |
| -------------   | -------------- | ------ |
| <span data-ttu-id="45a8a-410">controller = "Home"</span><span class="sxs-lookup"><span data-stu-id="45a8a-410">controller="Home"</span></span> | <span data-ttu-id="45a8a-411">azione = "About"</span><span class="sxs-lookup"><span data-stu-id="45a8a-411">action="About"</span></span> | `/Home/About` |
| <span data-ttu-id="45a8a-412">controller = "Home"</span><span class="sxs-lookup"><span data-stu-id="45a8a-412">controller="Home"</span></span> | <span data-ttu-id="45a8a-413">controller = "Order", azione = "About"</span><span class="sxs-lookup"><span data-stu-id="45a8a-413">controller="Order",action="About"</span></span> | `/Order/About` |
| <span data-ttu-id="45a8a-414">controller = "Home", color = "Red"</span><span class="sxs-lookup"><span data-stu-id="45a8a-414">controller="Home",color="Red"</span></span> | <span data-ttu-id="45a8a-415">azione = "About"</span><span class="sxs-lookup"><span data-stu-id="45a8a-415">action="About"</span></span> | `/Home/About` |
| <span data-ttu-id="45a8a-416">controller = "Home"</span><span class="sxs-lookup"><span data-stu-id="45a8a-416">controller="Home"</span></span> | <span data-ttu-id="45a8a-417">azione = colore "About" = "Red"</span><span class="sxs-lookup"><span data-stu-id="45a8a-417">action="About",color="Red"</span></span> | `/Home/About?color=Red`

<span data-ttu-id="45a8a-418">Se una route ha un valore predefinito che non corrisponde a un parametro e tale valore viene fornito in modo esplicito, il valore predefinito deve corrispondere.</span><span class="sxs-lookup"><span data-stu-id="45a8a-418">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value.</span></span> <span data-ttu-id="45a8a-419">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="45a8a-419">For example:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
  defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="45a8a-420">Generazione di collegamento genererebbero solo un collegamento per la route quando vengono specificati i valori corrispondenti per azione e del controller.</span><span class="sxs-lookup"><span data-stu-id="45a8a-420">Link generation would only generate a link for this route when the matching values for controller and action are provided.</span></span>
