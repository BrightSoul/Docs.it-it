---
title: Pagine Razor con Entity Framework Core - ordinamento, filtro, Paging - 3 di 8
author: rick-anderson
description: "In questa esercitazione si aggiungeranno ordinamento, filtro e paging funzionalità alla pagina utilizzando ASP.NET Core e componenti di base di Entity Framework."
keywords: ASP.NET Core, Entity Framework Core, ordinamento, filtro, il paging, raggruppamento
ms.author: riande
ms.date: 10/22/2017
ms.topic: get-started-article
ms.technology: aspnet
ms.prod: asp.net-core
uid: data/ef-rp/sort-filter-page
ms.openlocfilehash: 5e17663b88a622101245228e9372db55e4e874be
ms.sourcegitcommit: 703593d5fd14076e79be2ba75a5b8da12a60ab15
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/05/2017
---
# <a name="sorting-filtering-paging-and-grouping---ef-core-with-razor-pages-3-of-8"></a><span data-ttu-id="d2eb9-104">Ordinamento, filtro, paging e raggruppamento: EF Core con pagine Razor (3 di 8)</span><span class="sxs-lookup"><span data-stu-id="d2eb9-104">Sorting, filtering, paging, and grouping - EF Core with Razor Pages (3 of 8)</span></span>

<span data-ttu-id="d2eb9-105">Da [Tom Dykstra](https://github.com/tdykstra), [Rick Anderson](https://twitter.com/RickAndMSFT), e [Jon P Smith](https://twitter.com/thereformedprog)</span><span class="sxs-lookup"><span data-stu-id="d2eb9-105">By [Tom Dykstra](https://github.com/tdykstra), [Rick Anderson](https://twitter.com/RickAndMSFT), and [Jon P Smith](https://twitter.com/thereformedprog)</span></span>

[!INCLUDE[about the series](../../includes/RP-EF/intro.md)]

<span data-ttu-id="d2eb9-106">In questa esercitazione, ordinamento, filtro, raggruppamento e il paging, viene aggiunta la funzionalità.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-106">In this tutorial, sorting, filtering, grouping, and paging, functionality is added.</span></span>

<span data-ttu-id="d2eb9-107">Nella figura seguente mostra una pagina completata.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-107">The following illustration shows a completed page.</span></span> <span data-ttu-id="d2eb9-108">Le intestazioni di colonna sono collegamenti selezionabili per ordinare la colonna.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-108">The column headings are clickable links to sort the column.</span></span> <span data-ttu-id="d2eb9-109">Fare clic su una colonna con intestazione ripetutamente passa tra crescente e decrescente.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-109">Clicking a column heading repeatedly switches between ascending and descending sort order.</span></span>

![Pagina di indice di studenti](sort-filter-page/_static/paging.png)

<span data-ttu-id="d2eb9-111">Se si verificano problemi, è possibile risolvere, scaricare il [app completata per questa fase](https://github.com/aspnet/Docs/tree/master/aspnetcore/data/ef-rp/intro/samples/StageSnapShots/cu-part3-sorting).</span><span class="sxs-lookup"><span data-stu-id="d2eb9-111">If you run into problems you can't solve, download the [completed app for this stage](https://github.com/aspnet/Docs/tree/master/aspnetcore/data/ef-rp/intro/samples/StageSnapShots/cu-part3-sorting).</span></span>

## <a name="add-sorting-to-the-index-page"></a><span data-ttu-id="d2eb9-112">Aggiungere l'ordinamento alla pagina di indice</span><span class="sxs-lookup"><span data-stu-id="d2eb9-112">Add sorting to the Index page</span></span>

<span data-ttu-id="d2eb9-113">Aggiungere stringhe di *Students/Index.cshtml.cs* `PageModel` per contenere i parametri di ordinamento:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-113">Add strings to the *Students/Index.cshtml.cs* `PageModel` to contain the sorting paramaters:</span></span>

[!code-csharp[Main](intro/samples/cu/Pages/Students/Index.cshtml.cs?name=snippet1&highlight=10-13)]


<span data-ttu-id="d2eb9-114">Aggiornamento di *Students/Index.cshtml.cs* `OnGetAsync` con il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-114">Update the *Students/Index.cshtml.cs* `OnGetAsync` with the following code:</span></span>

[!code-csharp[Main](intro/samples/cu/Pages/Students/Index.cshtml.cs?name=snippet_SortOnly)]

<span data-ttu-id="d2eb9-115">Il codice precedente riceve un `sortOrder` parametro dalla stringa di query nell'URL.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-115">The preceding code receives a `sortOrder` parameter from the query string in the URL.</span></span> <span data-ttu-id="d2eb9-116">L'URL (inclusa la stringa di query) viene generato dal [Helper di Tag di ancoraggio](xref:mvc/views/tag-helpers/builtin-th/anchor-tag-helper
)</span><span class="sxs-lookup"><span data-stu-id="d2eb9-116">The URL (including the query string) is generated by the [Anchor Tag Helper](xref:mvc/views/tag-helpers/builtin-th/anchor-tag-helper
)</span></span>

<span data-ttu-id="d2eb9-117">Il `sortOrder` parametro è "Name" o "Data".</span><span class="sxs-lookup"><span data-stu-id="d2eb9-117">The `sortOrder` parameter is either "Name" or "Date."</span></span> <span data-ttu-id="d2eb9-118">Il `sortOrder` parametro è facoltativamente seguito da "_desc" per specificare l'ordine decrescente.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-118">The `sortOrder` parameter is optionally followed by "_desc" to specify descending order.</span></span> <span data-ttu-id="d2eb9-119">L'ordinamento predefinito è crescente.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-119">The default sort order is ascending.</span></span>

<span data-ttu-id="d2eb9-120">Quando la pagina di indice viene richiesto dal **studenti** collegare, nessuna stringa di query.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-120">When the Index page is requested from the **Students** link, there's no query string.</span></span> <span data-ttu-id="d2eb9-121">Gli studenti vengono visualizzati in ordine crescente in base al cognome.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-121">The students are displayed in ascending order by last name.</span></span> <span data-ttu-id="d2eb9-122">Ordine crescente in base al cognome è il valore predefinito (istruzione case) nei `switch` istruzione.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-122">Ascending order by last name is the default (fall-through case) in the `switch` statement.</span></span> <span data-ttu-id="d2eb9-123">Quando l'utente fa clic su un collegamento di intestazione di colonna, appropriato `sortOrder` valore viene fornito il valore di stringa di query.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-123">When the user clicks a column heading link, the appropriate `sortOrder` value is provided in the query string value.</span></span>

<span data-ttu-id="d2eb9-124">`NameSort`e `DateSort` vengono utilizzati dalla pagina Razor per configurare i collegamenti ipertestuali sull'intestazione di colonna con i valori di stringa di query appropriata:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-124">`NameSort` and `DateSort` are used by the Razor Page to configure the column heading hyperlinks with the appropriate query string values:</span></span>

[!code-csharp[Main](intro/samples/cu/Pages/Students/Index.cshtml.cs?name=snippet_SortOnly&highlight=3-4)]

<span data-ttu-id="d2eb9-125">Contiene il seguente codice c# [?: operatore](https://docs.microsoft.com/dotnet/csharp/language-reference/operators/conditional-operator):</span><span class="sxs-lookup"><span data-stu-id="d2eb9-125">The following code contains the C# [?: operator](https://docs.microsoft.com/dotnet/csharp/language-reference/operators/conditional-operator):</span></span>

[!code-csharp[Main](intro/samples/cu/Pages/Students/Index.cshtml.cs?name=snippet_Ternary)]

<span data-ttu-id="d2eb9-126">La prima riga specifica che quando `sortOrder` è null o vuoto, `NameSort` è impostata su "name_desc".</span><span class="sxs-lookup"><span data-stu-id="d2eb9-126">The first line specifies that when `sortOrder` is null or empty, `NameSort` is set to "name_desc."</span></span> <span data-ttu-id="d2eb9-127">Se `sortOrder` è **non** null o vuoto, `NameSort` è impostata su una stringa vuota.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-127">If `sortOrder` is **not** null or empty, `NameSort` is set to an empty string.</span></span>

<span data-ttu-id="d2eb9-128">Il `?: operator` è noto anche come l'operatore ternario disponibile.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-128">The `?: operator` is also known as the ternary operator.</span></span>

<span data-ttu-id="d2eb9-129">Le due istruzioni seguenti consentono la visualizzazione impostare la colonna collegamenti ipertestuali di intestazione come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-129">These two statements enable the view to set the column heading hyperlinks as follows:</span></span>

| <span data-ttu-id="d2eb9-130">Ordinamento corrente</span><span class="sxs-lookup"><span data-stu-id="d2eb9-130">Current sort order</span></span> | <span data-ttu-id="d2eb9-131">Collegamento ipertestuale cognome</span><span class="sxs-lookup"><span data-stu-id="d2eb9-131">Last Name Hyperlink</span></span> | <span data-ttu-id="d2eb9-132">Collegamento ipertestuale Data</span><span class="sxs-lookup"><span data-stu-id="d2eb9-132">Date Hyperlink</span></span> |
|:--------------------:|:-------------------:|:--------------:|
| <span data-ttu-id="d2eb9-133">Ultimo nome (crescente)</span><span class="sxs-lookup"><span data-stu-id="d2eb9-133">Last Name ascending</span></span> | <span data-ttu-id="d2eb9-134">descending</span><span class="sxs-lookup"><span data-stu-id="d2eb9-134">descending</span></span>        | <span data-ttu-id="d2eb9-135">ascending</span><span class="sxs-lookup"><span data-stu-id="d2eb9-135">ascending</span></span>      |
| <span data-ttu-id="d2eb9-136">Ultimo nome (decrescente)</span><span class="sxs-lookup"><span data-stu-id="d2eb9-136">Last Name descending</span></span> | <span data-ttu-id="d2eb9-137">ascending</span><span class="sxs-lookup"><span data-stu-id="d2eb9-137">ascending</span></span>           | <span data-ttu-id="d2eb9-138">ascending</span><span class="sxs-lookup"><span data-stu-id="d2eb9-138">ascending</span></span>      |
| <span data-ttu-id="d2eb9-139">Data ordine crescente</span><span class="sxs-lookup"><span data-stu-id="d2eb9-139">Date ascending</span></span>       | <span data-ttu-id="d2eb9-140">ascending</span><span class="sxs-lookup"><span data-stu-id="d2eb9-140">ascending</span></span>           | <span data-ttu-id="d2eb9-141">descending</span><span class="sxs-lookup"><span data-stu-id="d2eb9-141">descending</span></span>     |
| <span data-ttu-id="d2eb9-142">Data ordine decrescente</span><span class="sxs-lookup"><span data-stu-id="d2eb9-142">Date descending</span></span>      | <span data-ttu-id="d2eb9-143">ascending</span><span class="sxs-lookup"><span data-stu-id="d2eb9-143">ascending</span></span>           | <span data-ttu-id="d2eb9-144">ascending</span><span class="sxs-lookup"><span data-stu-id="d2eb9-144">ascending</span></span>      |

<span data-ttu-id="d2eb9-145">Il metodo Usa LINQ to Entities per specificare la colonna da ordinare.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-145">The method uses LINQ to Entities to specify the column to sort by.</span></span> <span data-ttu-id="d2eb9-146">Il codice Inizializza un `IQueryable<Student> ` prima dell'istruzione switch e lo modifica nell'istruzione switch:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-146">The code initializes an `IQueryable<Student> ` before the switch statement, and modifies it in the switch statement:</span></span>

[!code-csharp[Main](intro/samples/cu/Pages/Students/Index.cshtml.cs?name=snippet_SortOnly&highlight=6-)]

 <span data-ttu-id="d2eb9-147">Quando un`IQueryable` viene creata o modificata, non viene inviata alcuna query al database.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-147">When an`IQueryable` is created or modified, no query is sent to the database.</span></span> <span data-ttu-id="d2eb9-148">La query non viene eseguita finché il `IQueryable` oggetto viene convertito in una raccolta.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-148">The query is not executed until the `IQueryable` object is converted into a collection.</span></span> <span data-ttu-id="d2eb9-149">`IQueryable`vengono convertiti in una raccolta chiamando un metodo, ad esempio `ToListAsync`.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-149">`IQueryable` are converted to a collection by calling a method such as `ToListAsync`.</span></span> <span data-ttu-id="d2eb9-150">Pertanto, il `IQueryable` codice risultati in una singola query che non viene eseguito fino a quando l'istruzione seguente:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-150">Therefore, the `IQueryable` code results in a single query that is not executed until the following statement:</span></span>

[!code-csharp[Main](intro/samples/cu/Pages/Students/Index.cshtml.cs?name=snippet_SortOnlyRtn)]

<span data-ttu-id="d2eb9-151">`OnGetAsync`è stato possibile ottenere dettagliato con un numero elevato di colonne.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-151">`OnGetAsync` could get verbose with a large number of columns.</span></span>

### <a name="add-column-heading-hyperlinks-to-the-student-index-view"></a><span data-ttu-id="d2eb9-152">Aggiungere collegamenti ipertestuali sull'intestazione di colonna per la visualizzazione dell'indice di Student</span><span class="sxs-lookup"><span data-stu-id="d2eb9-152">Add column heading hyperlinks to the Student Index view</span></span>

<span data-ttu-id="d2eb9-153">Sostituire il codice in *Students/Index.cshtml*, con il seguente codice evidenziato:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-153">Replace the code in *Students/Index.cshtml*, with the following highlighted code:</span></span>

[!code-html[](intro/samples/cu/Pages/Students/Index2.cshtml?highlight=17-19,25-27)]

<span data-ttu-id="d2eb9-154">Il codice precedente:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-154">The preceding code:</span></span>

* <span data-ttu-id="d2eb9-155">Aggiunti collegamenti ipertestuali per il `LastName` e `EnrollmentDate` le intestazioni di colonna.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-155">Adds hyperlinks to the `LastName` and `EnrollmentDate` column headings.</span></span>
* <span data-ttu-id="d2eb9-156">Utilizza le informazioni contenute in `NameSort` e `DateSort` per impostare i collegamenti ipertestuali con i valori di ordinamento corrente.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-156">Uses the information in `NameSort` and `DateSort` to set up hyperlinks with the current sort order values.</span></span>

<span data-ttu-id="d2eb9-157">Per verificare il funzionamento dell'ordinamento:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-157">To verify that sorting works:</span></span>

* <span data-ttu-id="d2eb9-158">Eseguire l'app e selezionare il **studenti** scheda.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-158">Run the app and select the **Students** tab.</span></span>
* <span data-ttu-id="d2eb9-159">Fare clic su **cognome**.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-159">Click **Last Name**.</span></span>
* <span data-ttu-id="d2eb9-160">Fare clic su **data di registrazione**.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-160">Click **Enrollment Date**.</span></span>

<span data-ttu-id="d2eb9-161">Per ottenere una migliore comprensione del codice:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-161">To get a better understanding of the code:</span></span>

* <span data-ttu-id="d2eb9-162">In *Student/Index.cshtml.cs*, impostare un punto di interruzione `switch (sortOrder)`.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-162">In *Student/Index.cshtml.cs*, set a breakpoint on `switch (sortOrder)`.</span></span>
* <span data-ttu-id="d2eb9-163">Aggiungere un'espressione di controllo per `NameSort` e `DateSort`.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-163">Add a watch for `NameSort` and `DateSort`.</span></span>
* <span data-ttu-id="d2eb9-164">In *Student/Index.cshtml*, impostare un punto di interruzione `@Html.DisplayNameFor(model => model.Student[0].LastName)`.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-164">In *Student/Index.cshtml*, set a breakpoint on `@Html.DisplayNameFor(model => model.Student[0].LastName)`.</span></span>

<span data-ttu-id="d2eb9-165">Eseguire il debugger.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-165">Step through the debugger.</span></span>

## <a name="add-a-search-box-to-the-students-index-page"></a><span data-ttu-id="d2eb9-166">Aggiungere una casella di ricerca alla pagina di indice di studenti</span><span class="sxs-lookup"><span data-stu-id="d2eb9-166">Add a Search Box to the Students Index page</span></span>

<span data-ttu-id="d2eb9-167">Per aggiungere filtri alla pagina di indice di studenti:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-167">To add filtering to the Students Index page:</span></span>

* <span data-ttu-id="d2eb9-168">Una casella di testo e un pulsante di invio viene aggiunto alla pagina Razor.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-168">A text box and a submit button is added to the Razor Page.</span></span> <span data-ttu-id="d2eb9-169">La casella di testo fornisce una stringa di ricerca sul nome del primo o ultimo.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-169">The text box supplies a search string on the first or last name.</span></span>
* <span data-ttu-id="d2eb9-170">Il file code-behind viene aggiornato per utilizzare il valore della casella di testo.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-170">The code-behind file is updated to use the text box value.</span></span>

### <a name="add-filtering-functionality-to-the-index-method"></a><span data-ttu-id="d2eb9-171">Aggiungere funzionalità di filtro per il metodo di Index</span><span class="sxs-lookup"><span data-stu-id="d2eb9-171">Add filtering functionality to the Index method</span></span>

<span data-ttu-id="d2eb9-172">Aggiornamento di *Students/Index.cshtml.cs* `OnGetAsync` con il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-172">Update the *Students/Index.cshtml.cs* `OnGetAsync` with the following code:</span></span>

[!code-csharp[Main](intro/samples/cu/Pages/Students/Index.cshtml.cs?name=snippet_SortFilter&highlight=1,5,9-13)]

<span data-ttu-id="d2eb9-173">Il codice precedente:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-173">The preceding code:</span></span>

* <span data-ttu-id="d2eb9-174">Aggiunge il `searchString` parametro per il `OnGetAsync` metodo.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-174">Adds the `searchString` parameter to the `OnGetAsync` method.</span></span> <span data-ttu-id="d2eb9-175">Il valore di stringa di ricerca viene ricevuto da una casella di testo che viene aggiunto nella sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-175">The search string value is received from a text box that is added in the next section.</span></span>
* <span data-ttu-id="d2eb9-176">Aggiungere l'istruzione LINQ un `Where` clausola.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-176">Added to the LINQ statement a `Where` clause.</span></span> <span data-ttu-id="d2eb9-177">Il `Where` clausola seleziona solo gli studenti il cui nome o cognome contengono la stringa di ricerca.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-177">The `Where` clause selects only students whose first name or last name contains the search string.</span></span> <span data-ttu-id="d2eb9-178">L'istruzione LINQ viene eseguita solo se è presente un valore per la ricerca.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-178">The LINQ statement is executed only if there's a value to search for.</span></span>

<span data-ttu-id="d2eb9-179">Nota: Il precedente codice chiama il `Where` metodo su un `IQueryable` oggetto e il filtro viene elaborato nel server.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-179">Note: The preceding code calls the `Where` method on an `IQueryable` object, and the filter is processed on the server.</span></span> <span data-ttu-id="d2eb9-180">In alcuni scenari, potrebbe essere chiamata di app il `Where` metodo come metodo di estensione per una raccolta in memoria.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-180">In some scenarios, tha app might be calling the `Where` method as an extension method on an in-memory collection.</span></span> <span data-ttu-id="d2eb9-181">Si supponga ad esempio `_context.Students` cambia da Entity Framework Core `DbSet` a un metodo di repository che restituisce un `IEnumerable` insieme.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-181">For example, suppose `_context.Students` changes from EF Core `DbSet` to a repository method that returns an `IEnumerable` collection.</span></span> <span data-ttu-id="d2eb9-182">Il risultato sarebbe normalmente la stessa, ma in alcuni casi potrebbe essere diverso.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-182">The result would normally be the same but in some cases may be different.</span></span>

<span data-ttu-id="d2eb9-183">Ad esempio, l'implementazione di .NET Framework di `Contains` esegue un confronto tra maiuscole e minuscole per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-183">For example, the .NET Framework implementation of `Contains` performs a case-sensitive comparison by default.</span></span> <span data-ttu-id="d2eb9-184">In SQL Server, `Contains` distinzione maiuscole/minuscole è determinato dall'impostazione delle regole di confronto dell'istanza di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-184">In SQL Server, `Contains` case-sensitivity is determined by the collation setting of the SQL Server instance.</span></span> <span data-ttu-id="d2eb9-185">SQL Server per impostazione predefinita a tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-185">SQL Serve defaults to case-insensitive.</span></span> <span data-ttu-id="d2eb9-186">`ToUpper`può essere chiamata per eseguire il test in modo esplicito tra maiuscole e minuscole:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-186">`ToUpper` could be called to make the test explicitly case-insensitive:</span></span>

`Where(s => s.LastName.ToUpper().Contains(searchString.ToUpper())`

<span data-ttu-id="d2eb9-187">Il codice precedente di assicurarsi che i risultati sono distinzione tra maiuscole e se viene modificato il codice per l'utilizzo di `IEnumerable`.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-187">The preceding code would ensure that results are case-insensitive if the code changes to use `IEnumerable`.</span></span> <span data-ttu-id="d2eb9-188">Quando `Contains` viene chiamato su un `IEnumerable` insieme, viene utilizzata l'implementazione di .NET Core.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-188">When `Contains` is called on an `IEnumerable` collection, the .NET Core implementation is used.</span></span> <span data-ttu-id="d2eb9-189">Quando `Contains` viene chiamato su un `IQueryable` dell'oggetto, viene utilizzata l'implementazione di database.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-189">When `Contains` is called on an `IQueryable` object, the database implementation is used.</span></span> <span data-ttu-id="d2eb9-190">Restituzione di un `IEnumerable` da un repository può avere un penality significativo delle prestazioni:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-190">Returning an `IEnumerable` from a repository can have a significant performance penality:</span></span>

1. <span data-ttu-id="d2eb9-191">Tutte le righe vengono restituite dal server di database.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-191">All the rows are returned from the DB server.</span></span>
1. <span data-ttu-id="d2eb9-192">Il filtro viene applicato a tutte le righe restituite nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-192">The filter is applied to all the returned rows in the application.</span></span>

<span data-ttu-id="d2eb9-193">Si verifica una riduzione delle prestazioni per chiamare `ToUpper`.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-193">There is a performance penalty for calling `ToUpper`.</span></span> <span data-ttu-id="d2eb9-194">Il `ToUpper` codice aggiunge una funzione nella clausola WHERE dell'istruzione SELECT TSQL.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-194">The `ToUpper` code adds a function in the WHERE clause of the TSQL SELECT statement.</span></span> <span data-ttu-id="d2eb9-195">La funzione aggiunta impedisce l'utilizzo di un indice query optimizer.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-195">The added function prevents the optimizer from using an index.</span></span> <span data-ttu-id="d2eb9-196">Dato che SQL viene installato come tra maiuscole e minuscole, è consigliabile evitare di `ToUpper` chiamare quando non è necessaria.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-196">Given that SQL is installed as case-insensitive, it's best to avoid the `ToUpper` call when it's not needed.</span></span>

### <a name="add-a-search-box-to-the-student-index-view"></a><span data-ttu-id="d2eb9-197">Aggiungere una casella di ricerca per la visualizzazione dell'indice per studenti</span><span class="sxs-lookup"><span data-stu-id="d2eb9-197">Add a Search Box to the Student Index View</span></span>

<span data-ttu-id="d2eb9-198">In *Views/Student/Index.cshtml*, aggiungere il codice evidenziato di seguito per creare un **ricerca** pulsante e chrome diversi.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-198">In *Views/Student/Index.cshtml*, add the following highlighted code to create a **Search** button and assorted chrome.</span></span>

[!code-html[](intro/samples/cu/Pages/Students/Index3.cshtml?highlight=14-23&range=1-25)]

<span data-ttu-id="d2eb9-199">Il codice precedente utilizza il `<form>` [helper di tag](xref:mvc/views/tag-helpers/intro) per aggiungere la casella di testo di ricerca e un pulsante.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-199">The preceding code uses the `<form>` [tag helper](xref:mvc/views/tag-helpers/intro) to add the search text box and button.</span></span> <span data-ttu-id="d2eb9-200">Per impostazione predefinita, il `<form>` helper di tag invia dati con un POST del form.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-200">By default, the `<form>` tag helper submits form data with a POST.</span></span> <span data-ttu-id="d2eb9-201">Con POST, i parametri vengono passati nel corpo del messaggio HTTP e non nell'URL.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-201">With POST, the parameters are passed in the HTTP message body and not in the URL.</span></span> <span data-ttu-id="d2eb9-202">Quando viene utilizzato HTTP GET, i dati del form viene passati nell'URL come stringhe di query.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-202">When HTTP GET is used, the form data is passed in the URL as query strings.</span></span> <span data-ttu-id="d2eb9-203">Il passaggio di dati con le stringhe di query consente agli utenti di segnalibro l'URL.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-203">Passing the data with query strings enables users to bookmark the URL.</span></span> <span data-ttu-id="d2eb9-204">Il [linee guida W3C](https://www.w3.org/2001/tag/doc/whenToUseGet.html) consiglia che GET deve essere utilizzato quando l'azione non comporta un aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-204">The [W3C guidelines](https://www.w3.org/2001/tag/doc/whenToUseGet.html) recommend that GET should be used when the action does not result in an update.</span></span>

<span data-ttu-id="d2eb9-205">Testare l'app:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-205">Test the app:</span></span>

* <span data-ttu-id="d2eb9-206">Selezionare il **studenti** scheda e immettere una stringa di ricerca.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-206">Select the **Students** tab and enter a search string.</span></span>
* <span data-ttu-id="d2eb9-207">Selezionare **ricerca**.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-207">Select **Search**.</span></span>

<span data-ttu-id="d2eb9-208">Si noti che l'URL contiene la stringa di ricerca.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-208">Notice that the URL contains the search string.</span></span>

```html
http://localhost:5000/Students?SearchString=an
```

<span data-ttu-id="d2eb9-209">Se la pagina è contrassegnata, il segnalibro contiene l'URL alla pagina e `SearchString` stringa di query.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-209">If the page is bookmarked, the bookmark contains the URL to the page and the `SearchString` query string.</span></span> <span data-ttu-id="d2eb9-210">Il `method="get"` nel `form` tag è ciò che ha determinato la stringa di query da generare.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-210">The `method="get"` in the `form` tag is what caused the query string to be generated.</span></span>

<span data-ttu-id="d2eb9-211">Attualmente, quando si seleziona un collegamento di ordinamento di intestazione di colonna, il filtro valore il **ricerca** casella viene persa.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-211">Currently, when a column heading sort link is selected, the filter value from the **Search** box is lost.</span></span> <span data-ttu-id="d2eb9-212">Il valore di filtro persi è stato risolto nella sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-212">The lost filter value is fixed in the next section.</span></span>

## <a name="add-paging-functionality-to-the-students-index-page"></a><span data-ttu-id="d2eb9-213">Aggiungere funzionalità di paging alla pagina di indice di studenti</span><span class="sxs-lookup"><span data-stu-id="d2eb9-213">Add paging functionality to the Students Index page</span></span>

<span data-ttu-id="d2eb9-214">In questa sezione, un `PaginatedList` classe viene creata per supportare il paging.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-214">In this section, a `PaginatedList` class is created to support paging.</span></span> <span data-ttu-id="d2eb9-215">Il `PaginatedList` utilizzato dalla classe `Skip` e `Take` istruzioni per filtrare i dati sul server invece di recuperare tutte le righe della tabella.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-215">The `PaginatedList` class uses `Skip` and `Take` statements to filter data on the server instead of retrieving all rows of the table.</span></span> <span data-ttu-id="d2eb9-216">Nella figura seguente mostra i pulsanti di spostamento.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-216">The following illustration shows the paging buttons.</span></span>

![Gli studenti indice pagina con collegamenti di spostamento](sort-filter-page/_static/paging.png)

<span data-ttu-id="d2eb9-218">Nella cartella del progetto, creare `PaginatedList.cs` con il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-218">In the project folder, create `PaginatedList.cs` with the following code:</span></span>

[!code-csharp[Main](intro/samples/cu/PaginatedList.cs)]

<span data-ttu-id="d2eb9-219">Il `CreateAsync` metodo nel codice precedente ha dimensioni di pagina e il numero di pagina e applica appropriata `Skip` e `Take` istruzioni per la `IQueryable`.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-219">The `CreateAsync` method in the preceding code takes page size and page number and applies the appropriate `Skip` and `Take` statements to the `IQueryable`.</span></span> <span data-ttu-id="d2eb9-220">Quando `ToListAsync` viene chiamato sul `IQueryable`, viene restituito un elenco contenente solo la pagina richiesta.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-220">When `ToListAsync` is called on the `IQueryable`, it returns a List containing only the requested page.</span></span> <span data-ttu-id="d2eb9-221">Le proprietà `HasPreviousPage` e `HasNextPage` vengono utilizzati per abilitare o disabilitare **precedente** e **Avanti** pulsanti di spostamento.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-221">The properties `HasPreviousPage` and `HasNextPage` are used to enable or disable **Previous** and **Next** paging buttons.</span></span>

<span data-ttu-id="d2eb9-222">Il `CreateAsync` metodo viene utilizzato per creare il `PaginatedList<T>`.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-222">The `CreateAsync` method is used to create the `PaginatedList<T>`.</span></span> <span data-ttu-id="d2eb9-223">Non è possibile creare un costruttore di `PaginatedList<T>` dell'oggetto, i costruttori non possono eseguire codice asincrono.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-223">A constructor can't create the `PaginatedList<T>` object, constructors can't run asynchronous code.</span></span>

## <a name="add-paging-functionality-to-the-index-method"></a><span data-ttu-id="d2eb9-224">Aggiungere funzionalità di paging per il metodo di Index</span><span class="sxs-lookup"><span data-stu-id="d2eb9-224">Add paging functionality to the Index method</span></span>

<span data-ttu-id="d2eb9-225">In *Students/Index.cshtml.cs*, aggiornare il tipo di `Student` da `IList<Student>` a `PaginatedList<Student>`:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-225">In *Students/Index.cshtml.cs*, update the type of `Student` from `IList<Student>` to `PaginatedList<Student>`:</span></span>

[!code-csharp[Main](intro/samples/cu/Pages/Students/Index.cshtml.cs?name=snippet_SortFilterPageType)]

<span data-ttu-id="d2eb9-226">Aggiornamento di *Students/Index.cshtml.cs* `OnGetAsync` con il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-226">Update the *Students/Index.cshtml.cs* `OnGetAsync` with the following code:</span></span>

[!code-csharp[Main](intro/samples/cu/Pages/Students/Index.cshtml.cs?name=snippet_SortFilterPage&highlight=1-4,7-14,41-)]

<span data-ttu-id="d2eb9-227">Il codice precedente aggiunge l'indice della pagina, corrente `sortOrder`e `currentFilter` alla firma del metodo.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-227">The preceding code adds the page index, the current `sortOrder`, and the `currentFilter` to the method signature.</span></span>

[!code-csharp[Main](intro/samples/cu/Pages/Students/Index.cshtml.cs?name=snippet_SortFilterPage2)]

<span data-ttu-id="d2eb9-228">Tutti i parametri sono null quando:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-228">All the parameters are null when:</span></span>

* <span data-ttu-id="d2eb9-229">La pagina viene chiamata dal **studenti** collegamento.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-229">The page is called from the **Students** link.</span></span>
* <span data-ttu-id="d2eb9-230">L'utente non è stato selezionato un paging o ordinamento di collegamento.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-230">The user hasn't clicked a paging or sorting link.</span></span>

<span data-ttu-id="d2eb9-231">Quando viene fatto clic su un collegamento di paging, la variabile di indice di pagina contiene il numero di pagina da visualizzare.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-231">When a paging link is clicked, the page index variable contains the page number to display.</span></span>

<span data-ttu-id="d2eb9-232">`CurrentSort`fornisce la pagina Razor con il criterio di ordinamento corrente.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-232">`CurrentSort` provides the Razor Page with the current sort order.</span></span> <span data-ttu-id="d2eb9-233">L'ordinamento corrente deve essere inclusi i collegamenti di spostamento per mantenere l'ordinamento durante il paging.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-233">The current sort order must be included in the paging links to keep the sort order while paging.</span></span>

<span data-ttu-id="d2eb9-234">`CurrentFilter`fornisce la pagina Razor con la stringa di filtro corrente.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-234">`CurrentFilter` provides the Razor Page with the current filter string.</span></span> <span data-ttu-id="d2eb9-235">Il `CurrentFilter` valore:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-235">The `CurrentFilter` value:</span></span>

* <span data-ttu-id="d2eb9-236">Devono essere inclusi i collegamenti di spostamento per mantenere le impostazioni di filtro durante il paging.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-236">Must be included in the paging links in order to maintain the filter settings during paging.</span></span>
* <span data-ttu-id="d2eb9-237">Devono essere ripristinati nella casella di testo quando viene nuovamente visualizzata la pagina.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-237">Must be restored to the text box when the page is redisplayed.</span></span>

<span data-ttu-id="d2eb9-238">Se la stringa di ricerca viene modificata durante il paging, la pagina viene reimpostata su 1.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-238">If the search string is changed while paging, the page is reset to 1.</span></span> <span data-ttu-id="d2eb9-239">La pagina deve essere reimpostato su 1, in quanto può comportare dati diversi per visualizzare il nuovo filtro.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-239">The page has to be reset to 1 because the new filter can result in different data to display.</span></span> <span data-ttu-id="d2eb9-240">Quando viene immesso un valore di ricerca e **Invia** è selezionata:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-240">When a search value is entered and **Submit** is selected:</span></span>

* <span data-ttu-id="d2eb9-241">La stringa di ricerca viene modificata.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-241">The search string is changed.</span></span>
* <span data-ttu-id="d2eb9-242">Il `searchString` parametro non è null.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-242">The `searchString` parameter is not null.</span></span>

[!code-csharp[Main](intro/samples/cu/Pages/Students/Index.cshtml.cs?name=snippet_SortFilterPage3)]

<span data-ttu-id="d2eb9-243">Il `PaginatedList.CreateAsync` metodo converte la query di studenti in una singola pagina degli studenti iscritti a un tipo di insieme che supporta il paging.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-243">The `PaginatedList.CreateAsync` method converts the student query to a single page of students in a collection type that supports paging.</span></span> <span data-ttu-id="d2eb9-244">Pagina singola di studenti viene passato alla pagina Razor.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-244">That single page of students is passed to the Razor Page.</span></span>

[!code-csharp[Main](intro/samples/cu/Pages/Students/Index.cshtml.cs?name=snippet_SortFilterPage4)]

<span data-ttu-id="d2eb9-245">I due punti interrogativi in `PaginatedList.CreateAsync` rappresentano il [operatore null-coalescing](https://docs.microsoft.com/ dotnet/csharp/language-reference/operators/null-conditional-operator).</span><span class="sxs-lookup"><span data-stu-id="d2eb9-245">The two question marks in `PaginatedList.CreateAsync` represent the [null-coalescing operator](https://docs.microsoft.com/ dotnet/csharp/language-reference/operators/null-conditional-operator).</span></span> <span data-ttu-id="d2eb9-246">L'operatore null-coalescing definisce un valore predefinito per un tipo nullable.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-246">The null-coalescing operator defines a default value for a nullable type.</span></span> <span data-ttu-id="d2eb9-247">L'espressione `(pageIndex ?? 1)` significa restituisca il valore di `pageIndex` se ha un valore.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-247">The expression `(pageIndex ?? 1)` means return the value of `pageIndex` if it has a value.</span></span> <span data-ttu-id="d2eb9-248">Se `pageIndex` non hanno un valore, restituiscono 1.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-248">If `pageIndex` doesn't have a value, return 1.</span></span>

## <a name="add-paging-links-to-the-student-razor-page"></a><span data-ttu-id="d2eb9-249">Aggiungere collegamenti di spostamento allo studente pagina Razor</span><span class="sxs-lookup"><span data-stu-id="d2eb9-249">Add paging links to the student Razor Page</span></span>

<span data-ttu-id="d2eb9-250">Aggiornare il markup in *Students/Index.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-250">Update the markup in *Students/Index.cshtml*.</span></span> <span data-ttu-id="d2eb9-251">Le modifiche vengono evidenziate:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-251">The changes are highlighted:</span></span>

[!code-html[](intro/samples/cu/Pages/Students/Index.cshtml?highlight=28-31,37-40,68-)]

<span data-ttu-id="d2eb9-252">I collegamenti di intestazione di colonna utilizzano la stringa di query per passare la stringa di ricerca corrente per il `OnGetAsync` metodo in modo che l'utente può ordinare all'interno dei risultati di filtro:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-252">The column header links use the query string to pass the current search string to the `OnGetAsync` method so that the user can sort within filter results:</span></span>

[!code-html[](intro/samples/cu/Pages/Students/Index.cshtml?range=28-31)]

<span data-ttu-id="d2eb9-253">Per gli helper di tag vengono visualizzati i pulsanti di paging:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-253">The paging buttons are displayed by tag helpers:</span></span>

[!code-html[](intro/samples/cu/Pages/Students/Index.cshtml?range=72-)]

<span data-ttu-id="d2eb9-254">Eseguire l'app e passare alla pagina di studenti.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-254">Run the app and navigate to the students page.</span></span>

* <span data-ttu-id="d2eb9-255">Per rendere che funziona di paging, fare clic sui collegamenti di spostamento in diversi tipi di ordinamento.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-255">To make sure paging works, click the paging links in different sort orders.</span></span>
* <span data-ttu-id="d2eb9-256">Per verificare che il paging funziona correttamente con ordinamento e filtro, immettere una stringa di ricerca e provare il paging.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-256">To verify that paging works correctly with sorting and filtering, enter a search string and try paging.</span></span>

![Gli studenti indice pagina con collegamenti di spostamento](sort-filter-page/_static/paging.png)

<span data-ttu-id="d2eb9-258">Per ottenere una migliore comprensione del codice:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-258">To get a better understanding of the code:</span></span>

* <span data-ttu-id="d2eb9-259">In *Student/Index.cshtml.cs*, impostare un punto di interruzione `switch (sortOrder)`.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-259">In *Student/Index.cshtml.cs*, set a breakpoint on `switch (sortOrder)`.</span></span>
* <span data-ttu-id="d2eb9-260">Aggiungere un'espressione di controllo per `NameSort`, `DateSort`, `CurrentSort`, e `Model.Student.PageIndex`.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-260">Add a watch for `NameSort`, `DateSort`, `CurrentSort`, and `Model.Student.PageIndex`.</span></span>
* <span data-ttu-id="d2eb9-261">In *Student/Index.cshtml*, impostare un punto di interruzione `@Html.DisplayNameFor(model => model.Student[0].LastName)`.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-261">In *Student/Index.cshtml*, set a breakpoint on `@Html.DisplayNameFor(model => model.Student[0].LastName)`.</span></span>

<span data-ttu-id="d2eb9-262">Eseguire il debugger.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-262">Step through the debugger.</span></span>

## <a name="update-the-about-page-to-show-student-statistics"></a><span data-ttu-id="d2eb9-263">Aggiornare la pagina di informazioni su per visualizzare le statistiche di student</span><span class="sxs-lookup"><span data-stu-id="d2eb9-263">Update the About page to show student statistics</span></span>

<span data-ttu-id="d2eb9-264">In questo passaggio, *Pages/About.cshtml* viene aggiornato per visualizzare il numero di studenti sono registrati per ciascuna data di registrazione.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-264">In this step, *Pages/About.cshtml* is updated to display how many students have enrolled for each enrollment date.</span></span> <span data-ttu-id="d2eb9-265">L'aggiornamento viene utilizzato il raggruppamento e include i passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-265">The update uses grouping, and includes the following steps:</span></span>

* <span data-ttu-id="d2eb9-266">Creare una classe di modello di visualizzazione per i dati utilizzati dal **su** pagina.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-266">Create a view model class for the data used by the **About** Page.</span></span>
* <span data-ttu-id="d2eb9-267">Modificare il file code-behind e sulla pagina Razor.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-267">Modify the About Razor Page and code-behind file.</span></span>

### <a name="create-the-view-model"></a><span data-ttu-id="d2eb9-268">Creare il modello di visualizzazione</span><span class="sxs-lookup"><span data-stu-id="d2eb9-268">Create the view model</span></span>

<span data-ttu-id="d2eb9-269">Creare un *SchoolViewModels* cartella la *modelli* cartella.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-269">Create a *SchoolViewModels* folder in the *Models* folder.</span></span>

<span data-ttu-id="d2eb9-270">Nel *SchoolViewModels* cartella, aggiungere un *EnrollmentDateGroup.cs* con il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-270">In the *SchoolViewModels* folder, add a *EnrollmentDateGroup.cs* with the following code:</span></span>

[!code-csharp[Main](intro/samples/cu/Models/SchoolViewModels/EnrollmentDateGroup.cs)]

### <a name="update-the-about-code-behind-page"></a><span data-ttu-id="d2eb9-271">Aggiornare la pagina code-behind di informazioni su</span><span class="sxs-lookup"><span data-stu-id="d2eb9-271">Update the About code-behind page</span></span>

<span data-ttu-id="d2eb9-272">Aggiornamento di *Pages/About.cshtml.cs* file con il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-272">Update the *Pages/About.cshtml.cs* file with the following code:</span></span>

[!code-csharp[Main](intro/samples/cu/Pages/About.cshtml.cs)]

<span data-ttu-id="d2eb9-273">Raggruppa le entità di studenti per data di registrazione dell'istruzione LINQ, calcola il numero di entità in ciascun gruppo e archivia i risultati in una raccolta di `EnrollmentDateGroup` consente di visualizzare gli oggetti del modello.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-273">The LINQ statement groups the student entities by enrollment date, calculates the number of entities in each group, and stores the results in a collection of `EnrollmentDateGroup` view model objects.</span></span>

<span data-ttu-id="d2eb9-274">Nota: LINQ `group` comando attualmente non è supportato da Entity Framework Core.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-274">Note: The LINQ `group` command isn't currently supported by EF Core.</span></span> <span data-ttu-id="d2eb9-275">Nel codice precedente, vengono restituiti tutti i record di studenti da SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-275">In the preceding code, all the student records are returned from SQL Server.</span></span> <span data-ttu-id="d2eb9-276">Il `group` comando viene applicato nell'app pagine Razor, non in SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-276">The `group` command is applied in the Razor Pages app, not on the SQL Server.</span></span> <span data-ttu-id="d2eb9-277">Core EF 2.1 supporterà questa LINQ `group` operatore e il raggruppamento si verifica in SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-277">EF Core 2.1 will support this LINQ `group` operator, and the grouping occurs on the SQL Server.</span></span> <span data-ttu-id="d2eb9-278">Vedere [relazionale: supporta la conversione di GroupBy per SQL](https://github.com/aspnet/EntityFrameworkCore/issues/2341).</span><span class="sxs-lookup"><span data-stu-id="d2eb9-278">See [Relational: Support translating GroupBy() to SQL](https://github.com/aspnet/EntityFrameworkCore/issues/2341).</span></span> <span data-ttu-id="d2eb9-279">[Core EF 2.1](https://github.com/aspnet/EntityFrameworkCore/wiki/roadmap) verrà rilasciata con .NET Core 2.1.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-279">[EF Core 2.1](https://github.com/aspnet/EntityFrameworkCore/wiki/roadmap) will be released with .NET Core 2.1.</span></span> <span data-ttu-id="d2eb9-280">Per ulteriori informazioni, vedere il [Guida di orientamento per componenti di base .NET](https://github.com/dotnet/core/blob/master/roadmap.md).</span><span class="sxs-lookup"><span data-stu-id="d2eb9-280">For more information, see the [.NET Core Roadmap](https://github.com/dotnet/core/blob/master/roadmap.md).</span></span>

### <a name="modify-the-about-razor-page"></a><span data-ttu-id="d2eb9-281">Modificare le informazioni sulla pagina Razor</span><span class="sxs-lookup"><span data-stu-id="d2eb9-281">Modify the About Razor Page</span></span>

<span data-ttu-id="d2eb9-282">Sostituire il codice di *Views/Home/About.cshtml* file con il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="d2eb9-282">Replace the code in the *Views/Home/About.cshtml* file with the following code:</span></span>

[!code-html[](intro/samples/cu/Pages/About.cshtml)]

<span data-ttu-id="d2eb9-283">Eseguire l'app e passare alla pagina di informazioni.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-283">Run the app and navigate to the About page.</span></span> <span data-ttu-id="d2eb9-284">Il numero di studenti per ogni data di registrazione viene visualizzato in una tabella.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-284">The count of students for each enrollment date is displayed in a table.</span></span>

<span data-ttu-id="d2eb9-285">Se si verificano problemi, è possibile risolvere, scaricare il [app completata per questa fase](https://github.com/aspnet/Docs/tree/master/aspnetcore/data/ef-rp/intro/samples/StageSnapShots/cu-part3-sorting).</span><span class="sxs-lookup"><span data-stu-id="d2eb9-285">If you run into problems you can't solve, download the [completed app for this stage](https://github.com/aspnet/Docs/tree/master/aspnetcore/data/ef-rp/intro/samples/StageSnapShots/cu-part3-sorting).</span></span>

![Informazioni sulla pagina](sort-filter-page/_static/about.png)

## <a name="additional-resources"></a><span data-ttu-id="d2eb9-287">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="d2eb9-287">Additional Resources</span></span>

* [<span data-ttu-id="d2eb9-288">Debug di origine di ASP.NET Core 2. x</span><span class="sxs-lookup"><span data-stu-id="d2eb9-288">Debugging ASP.NET Core 2.x source</span></span>](https://github.com/aspnet/Docs/issues/4155)

<span data-ttu-id="d2eb9-289">Nella prossima esercitazione, l'app Usa le migrazioni per aggiornare il modello di dati.</span><span class="sxs-lookup"><span data-stu-id="d2eb9-289">In the next tutorial, the app uses migrations to update the data model.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="d2eb9-290">[Precedente](xref:data/ef-rp/crud)
[Successivo](xref:data/ef-rp/migrations)</span><span class="sxs-lookup"><span data-stu-id="d2eb9-290">[Previous](xref:data/ef-rp/crud)
[Next](xref:data/ef-rp/migrations)</span></span>